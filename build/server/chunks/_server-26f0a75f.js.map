{"version":3,"file":"_server-26f0a75f.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/operator/lesson/_server.js"],"sourcesContent":["import \"../../../../chunks/index.js\";\nimport \"fs\";\nimport { G as GetText, b as GetDict, R as ReadSpeech, W as WriteSpeech } from \"../../../../chunks/db.js\";\nconst config = {\n  runtime: \"edge\"\n  // isr:{\n  // \texpiration: false// 10\n  // }\n};\nasync function GET({ url, fetch, cookies }) {\n  const abonent = url.searchParams.get(\"abonent\");\n  const text = url.searchParams.get(\"text\");\n  const dict = url.searchParams.get(\"dict\");\n  const key = url.searchParams.get(\"key\");\n  if (text) {\n    const level = url.searchParams.get(\"level\");\n    const theme = url.searchParams.get(\"theme\");\n    let text2 = await GetText({ owner: abonent, level, theme });\n    let obj = { text: text2 };\n    let response = new Response(JSON.stringify({ obj }));\n    response.headers.append(\"Access-Control-Allow-Origin\", `*`);\n    return response;\n  } else if (dict) {\n    const level = url.searchParams.get(\"level\");\n    const theme = url.searchParams.get(\"theme\");\n    let data = await GetDict({ owner: abonent, type: dict, level, theme });\n    if (data) {\n      let response = new Response(JSON.stringify({ data }));\n      response.headers.append(\"Access-Control-Allow-Origin\", `*`);\n      return response;\n    }\n  } else if (key) {\n    const audio = await ReadSpeech({ key });\n    let response = new Response(JSON.stringify({ audio }));\n    response.headers.append(\"Access-Control-Allow-Origin\", `*`);\n    return response;\n  }\n}\nasync function POST({ request, url, fetch }) {\n  const { voice } = await request.json();\n  voice[\"admin\"];\n  let key = voice[\"key\"];\n  let data = voice[\"data\"];\n  WriteSpeech({ admin: \"admin\", key, data });\n  return new Response(\"Successfully post file\");\n}\nexport {\n  GET,\n  POST,\n  config\n};\n"],"names":[],"mappings":";;;;;;;;;AAGK,MAAC,MAAM,GAAG;AACf,EAAE,OAAO,EAAE,MAAM;AACjB;AACA;AACA;AACA,EAAE;AACF,eAAe,GAAG,CAAC,EAAE,GAAG,EAAE,KAAK,EAAE,OAAO,EAAE,EAAE;AAC5C,EAAE,MAAM,OAAO,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;AAClD,EAAE,MAAM,IAAI,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AAC5C,EAAE,MAAM,IAAI,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AAC5C,EAAE,MAAM,GAAG,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAC1C,EAAE,IAAI,IAAI,EAAE;AACZ,IAAI,MAAM,KAAK,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAChD,IAAI,MAAM,KAAK,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAChD,IAAI,IAAI,KAAK,GAAG,MAAM,OAAO,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;AAChE,IAAI,IAAI,GAAG,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;AAC9B,IAAI,IAAI,QAAQ,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;AACzD,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,6BAA6B,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAChE,IAAI,OAAO,QAAQ,CAAC;AACpB,GAAG,MAAM,IAAI,IAAI,EAAE;AACnB,IAAI,MAAM,KAAK,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAChD,IAAI,MAAM,KAAK,GAAG,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAChD,IAAI,IAAI,IAAI,GAAG,MAAM,OAAO,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;AAC3E,IAAI,IAAI,IAAI,EAAE;AACd,MAAM,IAAI,QAAQ,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AAC5D,MAAM,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,6BAA6B,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAClE,MAAM,OAAO,QAAQ,CAAC;AACtB,KAAK;AACL,GAAG,MAAM,IAAI,GAAG,EAAE;AAClB,IAAI,MAAM,KAAK,GAAG,MAAM,UAAU,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC;AAC5C,IAAI,IAAI,QAAQ,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;AAC3D,IAAI,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,6BAA6B,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;AAChE,IAAI,OAAO,QAAQ,CAAC;AACpB,GAAG;AACH,CAAC;AACD,eAAe,IAAI,CAAC,EAAE,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,EAAE;AAC7C,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE,CAAC;AACzC,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;AACjB,EAAE,IAAI,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;AACzB,EAAE,IAAI,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;AAC3B,EAAE,WAAW,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;AAC7C,EAAE,OAAO,IAAI,QAAQ,CAAC,wBAAwB,CAAC,CAAC;AAChD;;;;"}