{"version":3,"file":"_server-a9ba8a25.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/site/_server.js"],"sourcesContent":["import \"../../../chunks/index.js\";\nimport { C as CheckOperator, a as CreateOperator } from \"../../../chunks/db.js\";\nimport \"nodemailer\";\nimport md5 from \"md5\";\nimport pkg from \"lodash\";\nconst { find, findKey } = pkg;\nconst config = {\n  // runtime: 'edge'\n  // isr: {\n  // \texpiration: false // 10\n  // }\n};\nasync function POST({ request, cookies, url }) {\n  let abonent = url.searchParams.get(\"abonent\");\n  const { par } = await request.json();\n  const q = par;\n  let res = cookies.get(\"abonent:\" + abonent);\n  let kolmit;\n  if (res) {\n    kolmit = JSON.parse(res);\n  } else {\n    kolmit = { psw: md5(\"demo\") };\n  }\n  let resp = {};\n  switch (par.func) {\n    case \"operator\":\n      if (q.email && q.psw) {\n        if (CreateOperator(q)) {\n          cookies.set(\n            \"abonent:\" + q.abonent,\n            JSON.stringify({\n              operator: q.email,\n              abonent: q.abonent,\n              psw: q.psw,\n              lang: q.lang\n            }),\n            { maxAge: 60 * 60 * 24 * 30 }\n          );\n          resp = JSON.stringify({\n            func: par.func,\n            operator: q.email,\n            abonent: q.email,\n            lang: q.lang\n          });\n        }\n      }\n      break;\n    case \"check\":\n      SetParams(q);\n      if (q.type === \"user\") {\n        let cnt_queue = 0;\n        global.rtcPull[q.type][q.abonent][q.em][q.uid];\n        resp = {\n          func: q.func,\n          type: q.type,\n          check: true,\n          queue: String(cnt_queue)\n        };\n        SendOperatorStatus(q);\n        return new Response(JSON.stringify({ resp }));\n      } else if (q.type === \"operator\") {\n        q.psw = kolmit.psw;\n        resp = await CheckOperator(q);\n        console.log(resp);\n      }\n      break;\n    case \"offer\":\n      try {\n        SetParams(q);\n        BroadcastOperatorStatus(q, \"offer\");\n      } catch (ex) {\n        console.log();\n      }\n      break;\n    case \"call\":\n      HandleCall(q);\n      break;\n    case \"status\":\n      if (q.status === \"call\") {\n        if (q.type === \"operator\") {\n          let item = global.rtcPull[q.type][q.abonent][q.em][q.uid];\n          if (item)\n            item.status = \"busy\";\n          BroadcastOperatorStatus(q);\n        }\n        break;\n      }\n      if (q.status === \"close\") {\n        try {\n          let item = global.rtcPull[q.type][q.abonent][q.em][q.uid];\n          if (item) {\n            item.status = q.status;\n            if (q.type === \"operator\")\n              BroadcastOperatorStatus(q, \"close\");\n          }\n        } catch (ex) {\n        }\n        break;\n      }\n      SetParams(q);\n      break;\n  }\n  let response = new Response(JSON.stringify({ resp }));\n  response.headers.append(\"Access-Control-Allow-Origin\", `*`);\n  return response;\n}\nfunction SetParams(q) {\n  if (!global.rtcPull[q.type][q.abonent]) {\n    global.rtcPull[q.type][q.abonent] = {};\n  }\n  if (!global.rtcPull[q.type][q.abonent][q.em])\n    global.rtcPull[q.type][q.abonent][q.em] = [];\n  let item;\n  if (q.type === \"user\") {\n    item = global.rtcPull[q.type][q.abonent][q.em][q.uid];\n  } else\n    item = global.rtcPull[q.type][q.abonent][q.em][0];\n  if (!item) {\n    item = {};\n    item.cand = [];\n    global.rtcPull[q.type][q.abonent][q.em][q.uid] = item;\n  }\n  item.uid = q.uid;\n  item.status = q.status;\n  item.abonent = q.abonent;\n  item.operator = q.em;\n  if (q.desc)\n    item.desc = q.desc;\n  if (Array.isArray(q.cand)) {\n    q.cand.forEach((cand, index) => {\n      item.cand.push(cand);\n    });\n  } else if (q.cand)\n    item.cand.push(q.cand);\n}\nfunction BroadcastOperatorStatus(q, status) {\n  try {\n    let queue = 0;\n    if (!global.rtcPull[\"user\"][q.abonent])\n      return;\n    for (let uid in global.rtcPull[\"user\"][q.abonent][q.em]) {\n      if (q.uid && global.rtcPull[\"user\"][q.abonent][q.em][uid]) {\n        queue++;\n      }\n    }\n    let type = q.type === \"operator\" ? \"user\" : \"operator\";\n    let operators = { [q.em]: {} };\n    for (let uid in global.rtcPull[\"operator\"][q.abonent][q.em]) {\n      if (uid !== \"resolve\")\n        operators[q.em][uid] = {\n          type: q.type,\n          abonent: q.abonent,\n          em: q.em,\n          uid: q.uid,\n          status: global.rtcPull[\"operator\"][q.abonent][q.em][uid].status,\n          queue\n        };\n    }\n    for (let em in global.rtcPull[type][q.abonent]) {\n      if (em === q.em && q.status === \"call\")\n        continue;\n      for (let uid in global.rtcPull[type][q.abonent][em]) {\n        let item = global.rtcPull[type][q.abonent][em][uid];\n        let offer = find(operators[q.em], { status: \"offer\" });\n        if (offer && // && item.abonent === q.em\n        item.uid !== q.uid) {\n          if (item.status === \"wait\") {\n            let oper = global.rtcPull[\"operator\"][q.abonent][q.em][q.uid];\n            let remAr2 = {\n              func: q.func,\n              type,\n              abonent: q.abonent,\n              oper_uid: q.uid,\n              desc: oper.desc,\n              cand: oper.cand\n            };\n            if (global.rtcPull[type][q.abonent][em].resolve)\n              global.rtcPull[type][q.abonent][em].resolve(remAr2);\n          } else {\n            if (global.rtcPull[type][q.abonent][em].resolve)\n              global.rtcPull[type][q.abonent][em].resolve({\n                func: q.func,\n                type,\n                abonent: q.abonent,\n                em: q.em,\n                uid: q.uid,\n                operators\n              });\n          }\n        } else {\n          if (global.rtcPull[type][q.abonent][em].resolve)\n            global.rtcPull[type][q.abonent][em].resolve({\n              func: q.func,\n              type,\n              abonent: q.abonent,\n              em,\n              uid: q.uid,\n              operators\n            });\n        }\n      }\n    }\n    operators = \"\";\n  } catch (ex) {\n    console.log(ex);\n  }\n}\nfunction SendOperatorStatus(q) {\n  if (global.rtcPull[\"operator\"] && global.rtcPull[\"operator\"][q.abonent] && global.rtcPull[\"operator\"][q.abonent][q.em]) {\n    for (let uid in global.rtcPull[\"operator\"][q.abonent][q.em]) {\n      if (global.rtcPull[\"operator\"][q.abonent][q.em][uid].status === \"offer\") {\n        let operator = {\n          abonent: q.abonent,\n          em: q.em,\n          uid,\n          status: global.rtcPull[\"operator\"][q.abonent][q.em][uid].status,\n          desc: global.rtcPull[\"operator\"][q.abonent][q.em][uid].desc,\n          cand: global.rtcPull[\"operator\"][q.abonent][q.em][uid].cand\n        };\n        if (q.type === \"user\") {\n          global.rtcPull[\"user\"][q.abonent][q.em][q.uid];\n          global.rtcPull[\"user\"][q.abonent][q.em].resolve({ operator });\n        }\n      }\n    }\n  }\n}\nlet remAr = [];\nasync function HandleCall(q) {\n  if (q.type === \"user\") {\n    if (q.desc || q.cand) {\n      remAr.push({\n        func: q.func,\n        desc: q.desc,\n        cand: q.cand,\n        abonent: q.abonent,\n        user: q.em\n        // \"abonent\": q.em\n      });\n      let item = global.rtcPull[\"operator\"][q.abonent][q.em][q.oper_uid];\n      if (item) {\n        await global.rtcPull[\"operator\"][q.abonent][q.em].promise;\n        global.rtcPull[\"operator\"][q.abonent][q.em].resolve(remAr);\n        remAr = [];\n      }\n    } else {\n      let item = global.rtcPull[\"user\"][q.abonent][q.em][q.uid];\n      if (item) {\n        let oper_check = findKey(global.rtcPull[\"operator\"][q.abonent][q.em], {\n          status: \"check\"\n        });\n        let oper_offer_key = findKey(global.rtcPull[\"operator\"][q.abonent][q.em], {\n          status: \"offer\"\n        });\n        let oper_offer = global.rtcPull[\"operator\"][q.abonent][q.em][oper_offer_key];\n        if (oper_offer) {\n          remAr.push({\n            func: q.func,\n            abonent: q.abonent,\n            uid: q.uid,\n            oper_uid: oper_offer.uid,\n            desc: oper_offer.desc,\n            cand: oper_offer.cand\n          });\n          await global.rtcPull[\"operator\"][q.abonent][q.em].promise;\n          global.rtcPull[\"user\"][q.abonent][q.operator].resolve(remAr);\n          remAr = [];\n        } else {\n          item.status = \"wait\";\n          remAr.push({\n            func: q.func,\n            abonent: q.abonent,\n            status: \"wait\"\n          });\n          await global.rtcPull[\"operator\"][q.abonent][q.em].promise;\n          global.rtcPull[\"user\"][q.abonent][q.em].resolve(remAr);\n          if (oper_check && oper_check.resolve) {\n            let remAr2 = {\n              func: q.func,\n              abonent: q.abonent,\n              user_uid: item.uid,\n              status: \"wait\"\n            };\n            oper_check.resolve(remAr2);\n            remAr2 = [];\n          }\n        }\n      }\n    }\n  }\n}\nexport {\n  POST,\n  config\n};\n"],"names":[],"mappings":"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"}