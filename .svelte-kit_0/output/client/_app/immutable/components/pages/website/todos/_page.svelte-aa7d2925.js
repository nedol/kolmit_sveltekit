import{_ as Z,S as re,i as ue,s as de,k as m,a as U,q as ce,a7 as he,l as g,h as T,c as N,m as I,r as _e,n as a,F as d,b as x,a8 as z,J as fe,d as pe,f as ve,t as me,P as ne,a9 as ge,aa as be,ab as ye,$ as Te,a0 as le,T as Ee,g as ke,ac as we,A as Me}from"../../../../chunks/index-49fb8ea3.js";import{d as B}from"../../../../chunks/singletons-1d97e6dd.js";import{c as Pe,s as se}from"../../../../chunks/index-a30c4d16.js";B.disable_scroll_handling;B.goto;const Ue=B.invalidate;B.prefetch;B.prefetch_routes;B.before_navigate;B.after_navigate;function G(c,{pending:e,error:t,result:n}={}){let h;async function y(v){const i=h={};v.preventDefault();const u=new FormData(c);e&&e({data:u,form:c});try{const _=await fetch(c.action,{method:c.method,headers:{accept:"application/json"},body:u});if(i!==h)return;if(_.ok){n&&n({data:u,form:c,response:_});const s=new URL(c.action);s.search=s.hash="",Ue(s.href)}else t?t({data:u,form:c,error:null,response:_}):console.error(await _.text())}catch(_){if(t&&_ instanceof Error)t({data:u,form:c,error:_,response:null});else throw _}}return c.addEventListener("submit",y),{destroy(){c.removeEventListener("submit",y)}}}function Ne(c,{from:e,to:t},n={}){const h=getComputedStyle(c),y=h.transform==="none"?"":h.transform,[v,i]=h.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*v/t.width-(t.left+v),_=e.top+e.height*i/t.height-(t.top+i),{delay:s=0,duration:w=k=>Math.sqrt(k)*120,easing:M=Pe}=n;return{delay:s,duration:Z(w)?w(Math.sqrt(u*u+_*_)):w,easing:M,css:(k,f)=>{const b=f*u,F=f*_,o=k+f*e.width/t.width,l=k+f*e.height/t.height;return`transform: ${y} translate(${b}px, ${F}px) scale(${o}, ${l});`}}}function oe(c,e,t){const n=c.slice();return n[3]=e[t],n[4]=e,n[5]=t,n}function ie(c,e){let t,n,h,y,v,i,u,_,s,w,M,k,f,b,F,o,l,r,L,A,C,O,D,H,K,R,V,j,Q,q,W,X=Me,P,Y,ee;function te(...E){return e[1](e[3],e[4],e[5],...E)}function ae(){return e[2](e[3],e[4],e[5])}return{key:c,first:null,c(){t=m("div"),n=m("form"),h=m("input"),v=U(),i=m("input"),_=U(),s=m("button"),k=U(),f=m("form"),b=m("input"),o=U(),l=m("input"),L=U(),A=m("button"),C=U(),O=m("form"),D=m("input"),K=U(),R=m("button"),Q=U(),this.h()},l(E){t=g(E,"DIV",{class:!0});var p=I(t);n=g(p,"FORM",{action:!0,method:!0});var S=I(n);h=g(S,"INPUT",{type:!0,name:!0,class:!0}),v=N(S),i=g(S,"INPUT",{type:!0,name:!0,class:!0}),_=N(S),s=g(S,"BUTTON",{class:!0,"aria-label":!0}),I(s).forEach(T),S.forEach(T),k=N(p),f=g(p,"FORM",{class:!0,action:!0,method:!0});var $=I(f);b=g($,"INPUT",{type:!0,name:!0,class:!0}),o=N($),l=g($,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),L=N($),A=g($,"BUTTON",{class:!0,"aria-label":!0}),I(A).forEach(T),$.forEach(T),C=N(p),O=g(p,"FORM",{action:!0,method:!0});var J=I(O);D=g(J,"INPUT",{type:!0,name:!0,class:!0}),K=N(J),R=g(J,"BUTTON",{class:!0,"aria-label":!0}),I(R).forEach(T),J.forEach(T),Q=N(p),p.forEach(T),this.h()},h(){a(h,"type","hidden"),a(h,"name","uid"),h.value=y=e[3].uid,a(h,"class","svelte-16nsat"),a(i,"type","hidden"),a(i,"name","done"),i.value=u=e[3].done?"":"true",a(i,"class","svelte-16nsat"),a(s,"class","toggle svelte-16nsat"),a(s,"aria-label",w="Mark todo as "+(e[3].done?"not done":"done")),a(n,"action","/todos?_method=PATCH"),a(n,"method","post"),a(b,"type","hidden"),a(b,"name","uid"),b.value=F=e[3].uid,a(b,"class","svelte-16nsat"),a(l,"aria-label","Edit todo"),a(l,"type","text"),a(l,"name","text"),l.value=r=e[3].text,a(l,"class","svelte-16nsat"),a(A,"class","save svelte-16nsat"),a(A,"aria-label","Save todo"),a(f,"class","text svelte-16nsat"),a(f,"action","/todos?_method=PATCH"),a(f,"method","post"),a(D,"type","hidden"),a(D,"name","uid"),D.value=H=e[3].uid,a(D,"class","svelte-16nsat"),a(R,"class","delete svelte-16nsat"),a(R,"aria-label","Delete todo"),R.disabled=V=e[3].pending_delete,a(O,"action","/todos?_method=DELETE"),a(O,"method","post"),a(t,"class","todo svelte-16nsat"),ne(t,"done",e[3].done),this.first=t},m(E,p){x(E,t,p),d(t,n),d(n,h),d(n,v),d(n,i),d(n,_),d(n,s),d(t,k),d(t,f),d(f,b),d(f,o),d(f,l),d(f,L),d(f,A),d(t,C),d(t,O),d(O,D),d(O,K),d(O,R),d(t,Q),P=!0,Y||(ee=[z(M=G.call(null,n,{pending:te})),z(G.call(null,f)),z(j=G.call(null,O,{pending:ae}))],Y=!0)},p(E,p){e=E,(!P||p&1&&y!==(y=e[3].uid))&&(h.value=y),(!P||p&1&&u!==(u=e[3].done?"":"true"))&&(i.value=u),(!P||p&1&&w!==(w="Mark todo as "+(e[3].done?"not done":"done")))&&a(s,"aria-label",w),M&&Z(M.update)&&p&1&&M.update.call(null,{pending:te}),(!P||p&1&&F!==(F=e[3].uid))&&(b.value=F),(!P||p&1&&r!==(r=e[3].text)&&l.value!==r)&&(l.value=r),(!P||p&1&&H!==(H=e[3].uid))&&(D.value=H),(!P||p&1&&V!==(V=e[3].pending_delete))&&(R.disabled=V),j&&Z(j.update)&&p&1&&j.update.call(null,{pending:ae}),p&1&&ne(t,"done",e[3].done)},r(){W=t.getBoundingClientRect()},f(){ge(t),X(),be(t,W)},a(){X(),X=ye(t,W,Ne,{duration:200})},i(E){P||(E&&Te(()=>{q||(q=le(t,se,{start:.7},!0)),q.run(1)}),P=!0)},o(E){E&&(q||(q=le(t,se,{start:.7},!1)),q.run(0)),P=!1},d(E){E&&T(t),E&&q&&q.end(),Y=!1,Ee(ee)}}}function Oe(c){let e,t,n,h,y,v,i,u,_,s=[],w=new Map,M,k,f,b=c[0].todos;const F=o=>o[3].uid;for(let o=0;o<b.length;o+=1){let l=oe(c,b,o),r=F(l);w.set(r,s[o]=ie(r,l))}return{c(){e=m("meta"),t=U(),n=m("div"),h=m("h1"),y=ce("Todos"),v=U(),i=m("form"),u=m("input"),_=U();for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){const l=he('[data-svelte="svelte-aw2gey"]',document.head);e=g(l,"META",{name:!0,content:!0}),l.forEach(T),t=N(o),n=g(o,"DIV",{class:!0});var r=I(n);h=g(r,"H1",{});var L=I(h);y=_e(L,"Todos"),L.forEach(T),v=N(r),i=g(r,"FORM",{class:!0,action:!0,method:!0});var A=I(i);u=g(A,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),A.forEach(T),_=N(r);for(let C=0;C<s.length;C+=1)s[C].l(r);r.forEach(T),this.h()},h(){document.title="Todos",a(e,"name","description"),a(e,"content","A todo list app"),a(u,"name","text"),a(u,"aria-label","Add todo"),a(u,"placeholder","+ tap to add a todo"),a(u,"class","svelte-16nsat"),a(i,"class","new svelte-16nsat"),a(i,"action","/todos"),a(i,"method","post"),a(n,"class","todos svelte-16nsat")},m(o,l){d(document.head,e),x(o,t,l),x(o,n,l),d(n,h),d(h,y),d(n,v),d(n,i),d(i,u),d(n,_);for(let r=0;r<s.length;r+=1)s[r].m(n,null);M=!0,k||(f=z(G.call(null,i,{result:Ie})),k=!0)},p(o,[l]){if(l&1){b=o[0].todos,ke();for(let r=0;r<s.length;r+=1)s[r].r();s=fe(s,l,F,1,o,b,w,n,we,ie,null,oe);for(let r=0;r<s.length;r+=1)s[r].a();pe()}},i(o){if(!M){for(let l=0;l<b.length;l+=1)ve(s[l]);M=!0}},o(o){for(let l=0;l<s.length;l+=1)me(s[l]);M=!1},d(o){T(e),o&&T(t),o&&T(n);for(let l=0;l<s.length;l+=1)s[l].d();k=!1,f()}}}const Ie=async({form:c})=>{c.reset()};function Fe(c,e,t){let{data:n}=e;const h=(v,i,u,{data:_})=>{i[u].done=!!_.get("done")},y=(v,i,u)=>t(0,i[u].pending_delete=!0,n);return c.$$set=v=>{"data"in v&&t(0,n=v.data)},[n,h,y]}class qe extends re{constructor(e){super(),ue(this,e,Fe,Oe,de,{data:0})}}export{qe as default};
