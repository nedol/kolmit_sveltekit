import{s as et,y as Dt,n as We,o as $t,e as Ie,a as xn,u as Jn,g as Kn,b as Yn,c as Le,z as Xp,r as ln,j as Pr,A as Z0,B as Qe,f as rn,C as fr,D as lu}from"../chunks/scheduler.a6de4c6a.js";import{S as tt,i as nt,e as J,t as St,s as re,c as K,a as j,b as Ct,d as k,f as ie,k as S,p as O,g as Q,h as P,C as ue,j as on,n as _t,l as se,m as de,z as wn,G as Je,A as Te,B as Re,H as $e,u as Ye,v as je,w as Ze,q as Sn,o as Cn,x as Xe,F as su,I as Rs,J as Qp}from"../chunks/index.ef490459.js";import{e as dr,u as $p,d as e1,c as ar,g as uu,m as Q0}from"../chunks/md5.326e8267.js";import{w as $0}from"../chunks/paths.5ebe83a5.js";import{p as X0,m as Dr,s as qn,u as Ci,l as Qt,e as Tr,d as Oi,a as Ei,b as Rr,o as Ps,v as t1,i as Ls}from"../chunks/stores.3557e9cb.js";function cr(s,r){const n={},o={},l={$$scope:1};let c=s.length;for(;c--;){const a=s[c],h=r[c];if(h){for(const f in a)f in h||(o[f]=1);for(const f in h)l[f]||(n[f]=h[f],l[f]=1);s[c]=h}else for(const f in a)l[f]=1}for(const a in o)a in n||(n[a]=void 0);return n}function hr(s){return typeof s=="object"&&s!==null?s:{}}const n1=!0,Kg=Object.freeze(Object.defineProperty({__proto__:null,prerender:n1},Symbol.toStringTag,{value:"Module"}));function Ms(s,r,n){const o=s.slice();return o[8]=r[n],o}function Bs(s){let r=[],n=new Map,o,l=dr(s[0]);const c=a=>a[8].id;for(let a=0;a<l.length;a+=1){let h=Ms(s,l,a),f=c(h);n.set(f,r[a]=Us(f,h))}return{c(){for(let a=0;a<r.length;a+=1)r[a].c();o=_t()},l(a){for(let h=0;h<r.length;h+=1)r[h].l(a);o=_t()},m(a,h){for(let f=0;f<r.length;f+=1)r[f]&&r[f].m(a,h);Q(a,o,h)},p(a,h){h&17&&(l=dr(a[0]),r=$p(r,h,c,1,a,l,n,o.parentNode,e1,Us,o,Ms))},d(a){a&&k(o);for(let h=0;h<r.length;h+=1)r[h].d(a)}}}function Us(s,r){let n,o,l,c,a=r[8].alt+"",h,f,m,v;return{key:s,first:null,c(){n=J("div"),o=J("img"),h=St(a),f=re(),this.h()},l(p){n=K(p,"DIV",{style:!0});var b=j(n);o=K(b,"IMG",{src:!0,alt:!0,value:!0}),h=Ct(b,a),f=ie(b),b.forEach(k),this.h()},h(){Dt(o.src,l=r[8].src)||S(o,"src",l),S(o,"alt",""),S(o,"value",c=r[8].id),O(n,"padding","10px"),this.first=n},m(p,b){Q(p,n,b),P(n,o),P(n,h),P(n,f),m||(v=ue(o,"click",r[4]),m=!0)},p(p,b){r=p,b&1&&!Dt(o.src,l=r[8].src)&&S(o,"src",l),b&1&&c!==(c=r[8].id)&&S(o,"value",c),b&1&&a!==(a=r[8].alt+"")&&on(h,a)},d(p){p&&k(n),m=!1,v()}}}function r1(s){let r,n,o,l,c=s[2].alt+"",a,h,f,m,v,p=s[0]&&Bs(s);return{c(){r=J("button"),n=J("div"),o=J("img"),a=St(c),h=re(),f=J("div"),p&&p.c(),this.h()},l(b){r=K(b,"BUTTON",{class:!0});var w=j(r);n=K(w,"DIV",{style:!0});var A=j(n);o=K(A,"IMG",{src:!0,alt:!0}),a=Ct(A,c),A.forEach(k),w.forEach(k),h=ie(b),f=K(b,"DIV",{class:!0});var T=j(f);p&&p.l(T),T.forEach(k),this.h()},h(){Dt(o.src,l=s[2].src)||S(o,"src",l),S(o,"alt",""),O(n,"padding","10px"),S(r,"class","button collapsible svelte-1d5ftok"),S(f,"class","content svelte-1d5ftok")},m(b,w){Q(b,r,w),P(r,n),P(n,o),P(n,a),Q(b,h,w),Q(b,f,w),p&&p.m(f,null),s[6](f),m||(v=ue(r,"click",s[3]),m=!0)},p(b,[w]){w&4&&!Dt(o.src,l=b[2].src)&&S(o,"src",l),w&4&&c!==(c=b[2].alt+"")&&on(a,c),b[0]?p?p.p(b,w):(p=Bs(b),p.c(),p.m(f,null)):p&&(p.d(1),p=null)},i:We,o:We,d(b){b&&(k(r),k(h),k(f)),p&&p.d(),s[6](null),m=!1,v()}}}function i1(s,r,n){let o,l,c="",{lang:a="en"}=r;o=[{id:0,lang:"en",src:"https://www.sic-info.org/wp-content/uploads/2014/01/gb.png",alt:"English"},{id:1,lang:"fr",src:"https://www.sic-info.org/wp-content/uploads/2014/01/fr.png",alt:"French"},{id:2,lang:"de",src:"https://www.sic-info.org/wp-content/uploads/2014/01/de.png",alt:"Deutch"},{id:3,lang:"ru",src:"https://www.sic-info.org/wp-content/uploads/2014/01/ru.png",alt:"Русский"}];let h={id:0,src:"https://www.sic-info.org/wp-content/uploads/2014/01/gb.png",alt:"English"};$t(()=>{c=JSON.parse(localStorage.getItem("kolmi")),c&&n(5,a=kolmi.lang)});function f(p){l.style.maxHeight?n(1,l.style.maxHeight=null,l):n(1,l.style.maxHeight=l.scrollHeight+"px",l)}function m(p){n(2,h=o[p.currentTarget.attributes.value.value]),n(5,a=h.lang),f()}function v(p){Ie[p?"unshift":"push"](()=>{l=p,n(1,l)})}return s.$$set=p=>{"lang"in p&&n(5,a=p.lang)},[o,l,h,f,m,a,v]}class o1 extends tt{constructor(r){super(),nt(this,r,i1,r1,et,{lang:5})}}var au={exports:{}};(function(s){(function(r){var n=r.URL||r.webkitURL;function o(m){return n?n.createObjectURL(m):!1}function l(m){return n?n.revokeObjectURL(m):!1}function c(m,v){m&&m.slice(0,5)==="blob:"&&!(v&&v.noRevoke)&&l(m)}function a(m,v,p,b){if(!r.FileReader)return!1;var w=new FileReader;w.onload=function(){v.call(w,this.result)},p&&(w.onabort=w.onerror=function(){p.call(w,this.error)});var A=w[b||"readAsDataURL"];if(A)return A.call(w,m),w}function h(m,v){return Object.prototype.toString.call(v)==="[object "+m+"]"}function f(m,v,p){function b(w,A){var T=document.createElement("img"),B;function L(z,N){if(w===A){w&&w(z,N);return}else if(z instanceof Error){A(z);return}N=N||{},N.image=z,w(N)}function Z(z,N){N&&r.console&&console.log(N),z&&h("Blob",z)?(m=z,B=o(m)):(B=m,p&&p.crossOrigin&&(T.crossOrigin=p.crossOrigin)),T.src=B}if(T.onerror=function(z){c(B,p),A&&A.call(T,z)},T.onload=function(){c(B,p);var z={originalWidth:T.naturalWidth||T.width,originalHeight:T.naturalHeight||T.height};try{f.transform(T,p,L,m,z)}catch(N){A&&A(N)}},typeof m=="string")return f.requiresMetaData(p)?f.fetchBlob(m,Z,p):Z(),T;if(h("Blob",m)||h("File",m))return B=o(m),B?(T.src=B,T):a(m,function(z){T.src=z},A)}return r.Promise&&typeof v!="function"?(p=v,new Promise(b)):b(v,v)}f.requiresMetaData=function(m){return m&&m.meta},f.fetchBlob=function(m,v){v()},f.transform=function(m,v,p,b,w){p(m,w)},f.global=r,f.readFile=a,f.isInstanceOf=h,f.createObjectURL=o,f.revokeObjectURL=l,s.exports?s.exports=f:r.loadImage=f})(typeof window<"u"&&window||ar)})(au);var fu=au.exports;const eo=uu(fu);var l1={exports:{}};(function(s){(function(r){s.exports?r(fu):r(window.loadImage)})(function(r){var n=r.transform;r.createCanvas=function(o,l,c){if(c&&r.global.OffscreenCanvas)return new OffscreenCanvas(o,l);var a=document.createElement("canvas");return a.width=o,a.height=l,a},r.transform=function(o,l,c,a,h){n.call(r,r.scale(o,l,h),l,c,a,h)},r.transformCoordinates=function(){},r.getTransformedOptions=function(o,l){var c=l.aspectRatio,a,h,f,m;if(!c)return l;a={};for(h in l)Object.prototype.hasOwnProperty.call(l,h)&&(a[h]=l[h]);return a.crop=!0,f=o.naturalWidth||o.width,m=o.naturalHeight||o.height,f/m>c?(a.maxWidth=m*c,a.maxHeight=m):(a.maxWidth=f,a.maxHeight=f/c),a},r.drawImage=function(o,l,c,a,h,f,m,v,p){var b=l.getContext("2d");return p.imageSmoothingEnabled===!1?(b.msImageSmoothingEnabled=!1,b.imageSmoothingEnabled=!1):p.imageSmoothingQuality&&(b.imageSmoothingQuality=p.imageSmoothingQuality),b.drawImage(o,c,a,h,f,0,0,m,v),b},r.requiresCanvas=function(o){return o.canvas||o.crop||!!o.aspectRatio},r.scale=function(o,l,c){l=l||{},c=c||{};var a=o.getContext||r.requiresCanvas(l)&&!!r.global.HTMLCanvasElement,h=o.naturalWidth||o.width,f=o.naturalHeight||o.height,m=h,v=f,p,b,w,A,T,B,L,Z,z,N,H,U;function G(){var x=Math.max((w||m)/m,(A||v)/v);x>1&&(m*=x,v*=x)}function fe(){var x=Math.min((p||m)/m,(b||v)/v);x<1&&(m*=x,v*=x)}if(a&&(l=r.getTransformedOptions(o,l,c),L=l.left||0,Z=l.top||0,l.sourceWidth?(T=l.sourceWidth,l.right!==void 0&&l.left===void 0&&(L=h-T-l.right)):T=h-L-(l.right||0),l.sourceHeight?(B=l.sourceHeight,l.bottom!==void 0&&l.top===void 0&&(Z=f-B-l.bottom)):B=f-Z-(l.bottom||0),m=T,v=B),p=l.maxWidth,b=l.maxHeight,w=l.minWidth,A=l.minHeight,a&&p&&b&&l.crop?(m=p,v=b,H=T/B-p/b,H<0?(B=b*T/p,l.top===void 0&&l.bottom===void 0&&(Z=(f-B)/2)):H>0&&(T=p*B/b,l.left===void 0&&l.right===void 0&&(L=(h-T)/2))):((l.contain||l.cover)&&(w=p=p||w,A=b=b||A),l.cover?(fe(),G()):(G(),fe())),a){if(z=l.pixelRatio,z>1&&!(o.style.width&&Math.floor(parseFloat(o.style.width,10))===Math.floor(h/z))&&(m*=z,v*=z),r.orientationCropBug&&!o.getContext&&(L||Z||T!==h||B!==f)&&(H=o,o=r.createCanvas(h,f,!0),r.drawImage(H,o,0,0,h,f,h,f,l)),N=l.downsamplingRatio,N>0&&N<1&&m<T&&v<B)for(;T*N>m;)U=r.createCanvas(T*N,B*N,!0),r.drawImage(o,U,L,Z,T,B,U.width,U.height,l),L=0,Z=0,T=U.width,B=U.height,o=U;return U=r.createCanvas(m,v),r.transformCoordinates(U,l,c),z>1&&(U.style.width=U.width/z+"px"),r.drawImage(o,U,L,Z,T,B,m,v,l).setTransform(1,0,0,1,0,0),U}return o.width=m,o.height=v,o}})})(l1);const s1=s=>({}),Ws=s=>({});function u1(s){let r,n,o;const l=s[4].footer,c=xn(l,s,s[3],Ws);return{c(){r=J("video"),n=re(),c&&c.c(),this.h()},l(a){r=K(a,"VIDEO",{poster:!0,style:!0}),j(r).forEach(k),n=ie(a),c&&c.l(a),this.h()},h(){S(r,"poster",s[1]),r.autoplay=!0,r.playsInline=!0,r.muted=!0,O(r,"display",a1),O(r,"position","absolute"),O(r,"top","-15px"),O(r,"width","100px"),O(r,"height","100px"),O(r,"z-index","20")},m(a,h){Q(a,r,h),s[5](r),Q(a,n,h),c&&c.m(a,h),o=!0},p(a,[h]){(!o||h&2)&&S(r,"poster",a[1]),c&&c.p&&(!o||h&8)&&Jn(c,l,a,a[3],o?Yn(l,a[3],h,s1):Kn(a[3]),Ws)},i(a){o||(se(c,a),o=!0)},o(a){de(c,a),o=!1},d(a){a&&(k(r),k(n)),s[5](null),c&&c.d(a)}}}let a1="block";function f1(s,r,n){let o;Le(s,X0,m=>n(1,o=m));let{$$slots:l={},$$scope:c}=r,{srcObject:a=""}=r,h;$t(async()=>{});function f(m){Ie[m?"unshift":"push"](()=>{h=m,n(0,h),n(2,a)})}return s.$$set=m=>{"srcObject"in m&&n(2,a=m.srcObject),"$$scope"in m&&n(3,c=m.$$scope)},s.$$.update=()=>{s.$$.dirty&2,s.$$.dirty&5&&(h&&a?n(0,h.srcObject=a,h):h&&h.srcObject&&(h.srcObject.getVideoTracks().forEach(m=>{m.stop(),h.srcObject.removeTrack(m)}),n(0,h.src="",h)))},[h,o,a,c,l,f]}class c1 extends tt{constructor(r){super(),nt(this,r,f1,u1,et,{srcObject:2})}}let h1=class{constructor(r,n,o){this.con=new RTCPeerConnection(n),this.rtc=r,this.pc_key=o,this.params={}}SendDesc(r,n){let o=this,l={};l.proj="kolmit",l.func="call",l.abonent=o.rtc.abonent,l.type=this.rtc.type,l.em=this.rtc.em,l.uid=this.rtc.uid,l.desc=r,l.status="call",l.abonent=this.rtc.abonent,l.oper_uid=this.rtc.oper_uid,this.rtc.status="call",this.rtc.signal.SendMessage(l,function(){n()})}SendCand(r,n){let o={};o.proj="kolmit",o.func="call",o.type=this.rtc.type,o.uid=this.rtc.uid,o.em=this.rtc.em,o.cand=r,o.status="call",o.abonent=this.rtc.abonent,o.oper_uid=this.rtc.oper_uid,this.rtc.status="call",this.rtc.signal.SendMessage(o,function(){n()})}StartEvents(){let r=this;this.con.ontrack=function(n){r.pc_key!=="reserve"&&(r.rtc.GetRemoteAudio()!==n.streams[0]&&(r.rtc.remoteStream=n.streams[0],r.rtc.remoteStream.onaddtrack=function(o){console.log("addtrack in remote stream",r)}),r.rtc.remoteStream&&(n.track.kind==="audio"&&(r.rtc.SetRemoteAudio(null),r.rtc.SetRemoteAudio(r.rtc.remoteStream)),n.track.kind==="video"&&(r.rtc.SetRemoteVideo(null),r.rtc.SetRemoteVideo(r.rtc.remoteStream),r.rtc.DC.SendDCVideoOK(()=>{}))))},r.rtc.type==="user"&&(this.con.onicecandidate=n=>{let o=this;if(n.candidate)if(this.params.loc_cand||(this.params.loc_cand=[]),this.params.loc_cand.push(n.candidate),this.rtc.DC&&this.rtc.DC.dc.readyState==="open"){let l="";this.rtc.type&&this.rtc.type.offerToReceiveVideo===1&&(l={confirm:"Do you mind to turn on the cameras?"}),this.rtc.DC.SendDCCand(n.candidate,o.pc_key,l)}else this.SendCand(n.candidate,function(){})}),this.con.oniceconnectionstatechange=function(n){r.rtc.onIceStateChange(r,n)},this.con.onremovestream=function(n){},this.con.onsignalingstatechange=function(n){},this.con.onconnectionstatechange=function(n){console.log()}}onCreateAnswerSuccess(r){let n=this;console.log("Answer from pcPull 2:",this),console.log("setLocalDescription start",n),n.con.setLocalDescription(r).then(function(){n.params.loc_desc=n.con.localDescription,console.log("onSetLocalDescriptionSuccess",n),n.SendDesc(r,function(){})},n.onSetAnswerError)}setRemoteDesc(r){let n=this;console.log("setRemoteDescription start",n),console.log("Peer connectionState:"+this.con.connectionState,n),this.con.setRemoteDescription(r).then(function(){n.params.rem_desc=n.con.remoteDescription,n.con.remoteDescription.type==="offer"&&n.con.createAnswer().then(o=>n.onCreateAnswerSuccess(o),n.onCreateAnswerError)},function(o){console.log("Failed to set remote description: "+o.toString(),this)})}onCreateAnswerError(r){console.log("Failed to create answer: "+r.toString(),this)}onCreateOfferSuccess(r){let n=this;console.log("Offer created",n),console.log("setLocalDescription start",n),n.con.setLocalDescription(r).then(function(){n.params.loc_desc=n.con.localDescription,console.log(" setLocalDescription complete",n)},n.onSetOfferError)}onCreateVideoOfferSuccess(r,n){let o=this;console.log("Offer created",o),console.log("setLocalDescription start",o),o.con.setLocalDescription(r).then(function(){o.params.loc_desc=o.con.localDescription,log(" setLocalDescription complete",o),o.rtc.DC.SendDCDesc(r,o.pc_key)},o.onSetOfferError)}onSetOfferError(r){console.log("Failed to set offer: "+r.toString(),this)}onSetAnswerError(r){console.log("Failed to set session description: "+r.toString(),this)}onAddIceCandidateSuccess(r){console.log(" addIceCandidate success",this)}onAddIceCandidateError(r,n){console.log(" failed to add ICE Candidate: "+n.toString(),this)}onCreateOfferError(r){console.log("Failed to create session description: "+r.toString(),this)}onAddVideo(r){let n=this,o="Do you mind to turn on the cameras?";n.rtc.DC&&n.rtc.DC.dc.readyState==="open"&&n.rtc.DC.SendData({confirm:o})}onCreateSessionDescriptionError(r){}Cancel(){this.close()}};class d1{constructor(r,n){this.rtc=r,this.pc=n,this.call_num=3,this.dc=n.con.createDataChannel(n.pc_key+" data channel"),this.forward;let o=this;o.cnt_call=0,this.dc.onclose=()=>{},n.StartEvents(),n.con.ondatachannel=h=>{console.log("Receive Channel Callback"),this.dc=h.channel,this.dc.onopen=()=>(o.dc.readyState==="open"&&console.log(o.pc.pc_key+" datachannel open"),o.SendDCCall(),!0)};let l="",c=[],a=0;this.dc.removeEventListener("message",this.dc.onmessage),this.dc.onmessage=function(h){try{let f=JSON.parse(h.data);if(f.type==="eom"){o.rtc.OnMessage(JSON.parse(l),o),o.rtc.SendToComponent(JSON.parse(l)),l="";return}if(l+=f.slice,f.file&&(document.getElementById("dataProgress").attributes.max=f.length),f.type==="eof"){const m=new Blob(c);if(c=[],a=0,confirm("Получен файл: "+f.file+". Размер: "+f.length+" Сохранить?")){let v=document.getElementById("download_href");v.text("Получен файл: "+f.file+". Размер: "+f.length+" Сохранить?"),v.attributes.href="URL.createObjectURL(received)",v.attributes.download=f.file,v.click()}setTimeout(function(){document.getElementById("dataProgress").style.display="none"},2e3);return}}catch{if(l="",!h.data.byteLength)return}}}SendFile(r,n,o){try{if(this.dc.readyState==="open"){let l=16384;const c=Math.ceil(r.byteLength/l);this.dc.send(JSON.stringify({file:n,length:r.byteLength}),function(a){console.log(a)});for(let a=0,h=0;a<c;++a,h+=l){const f=r.slice(h,h+l);let m=document.getElementById("dataProgress");this.dc.send(f,function(v){console.log(v)})}setTimeout(function(){document.getElementById("dataProgress").style.display="none"},2e3),this.dc.send(JSON.stringify({type:"eof",file:n,length:r.byteLength}),function(a){console.log(a),o()})}}catch(l){console.log(l)}}SendData(r,n){try{if(this.dc.readyState==="open"){r=JSON.stringify(r);let o=16384;const l=Math.ceil(r.length/o);for(let c=0,a=0;c<l;++c,a+=o)this.dc.send(JSON.stringify({slice:r.substr(a,o)}));this.dc.send(JSON.stringify({type:"eom"}))}n&&n()}catch(o){console.log(o)}}SendDCCall(){let r=this,n={};n.proj="kolmit",n.uid=r.rtc.uid,n.func="call",n.call=r.rtc.call_num,n.type=r.rtc.type,n.email=r.rtc.email.from,n.profile={email:r.rtc.em,name:r.rtc.em},r.dc.readyState==="open"&&r.SendData(n),r.rtc.OnOpenDataChannel()}SendDCHangup(r){let n={};n.proj="kolmit",n.func="mute",n.type=this.rtc.type,this.SendData(n,r)}SendDCClose(r){let n={};n.proj="kolmit",n.func="close",n.type=this.rtc.type,this.SendData(n,r)}SendDCTalk(r){let n={};n.proj="kolmit",n.func="talk",n.type=this.rtc.type,this.SendData(n,r)}SendDCCand(r,n,o){let l={};l.proj="kolmit",l.func="offer",l.cand=r,l.trans=n,l.abonent=this.rtc.abonent,l.msg=o,this.SendData(l)}SendDCDesc(r,n,o){let l={};l.proj="kolmit",l.func="offer",l.desc=r,l.trans=n,l.abonent=this.rtc.abonent,l.msg=o,this.SendData(l)}SendDCOffer(r,n){let o={};o.proj="kolmit",o.func="offer",o.desc=this.pc.params.loc_desc,o.cand=this.pc.params.loc_cand,o.trans=r,o.abonent=this.rtc.abonent,o.msg=n,this.SendData(o)}SendDCVideoOK(r){let n={};n.proj="kolmit",n.func="video",n.type=this.rtc.type,this.SendData(n,r)}}const cu={stun:{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302"]},turn:{urls:["turn:delivery-angels.com:3478?transport=udp","turn:delivery-angels.com:3478?transport=tcp","turn:delivery-angels.com:5349?transport=udp","turn:delivery-angels.com:5349?transport=tcp"],username:"guest",credential:"password"},lifetimeDuration:"86400s"};let p1=class{constructor(r,n,o){this.type=r.type,this.abonent=r.abonent,this.em=r.em,this.uid=n,this.signal=o,this.email={from:"",to:""},this.pcPull={},this.main_pc,this.origin=location.origin,this.url,this.localStream,this.remoteStream,this.startTime,this.phone=""}async SendCheck(){let r={};r.proj="kolmit",r.func="check",r.status="check",r.type=this.type,r.abonent=this.abonent,r.em=this.em,r.uid=this.uid,this.signal.SendMessage(r,()=>{this.status="check"})}SendVideoOffer(r){let n=this;n.pcPull[r].params.loc_desc="",n.pcPull[r].params.loc_cand="",n.pcPull[r].con.createOffer(n.mode={offerToReceiveAudio:1,offerToReceiveVideo:1,iceRestart:1}).then(o=>n.pcPull[r].onCreateVideoOfferSuccess(o),n.pcPull[r].onCreateOfferError)}onIceStateChange(r,n){let o=this;r&&(r.con.iceConnectionState==="new"&&console.log(r.pc_key+" ICE state change event: new",o),r.con.iceConnectionState==="checking"&&(console.log(r.pc_key+" ICE state change event: checking",o),o.checking_tmr=setTimeout(function(){r.con.restartIce()},5e3)),r.con.iceConnectionState==="disconnected"&&(console.log(r.pc_key+" ICE state change event: disconnected",o),r.con.restartIce()),r.con.iceConnectionState==="connected"&&(clearTimeout(o.checking_tmr),console.log(r.pc_key+" ICE state change event: connected",o),o.main_pc=r.pc_key),r.con.iceConnectionState==="failed"&&(console.log(r.pc_key+" ICE state change event: failed",o),r.con.restartIce()),r.con.iceConnectionState==="completed"&&console.log(r.pc_key+" ICE state change event: completed",o),console.log(r.pc_key+" ICE state change event: "+n.type,o))}TransFile(r){let n=this;async function o(){const c=r.files[0];if(c||console.log("No file chosen"),c.size===0)return;dataProgress.style.display="block",dataProgress.attributes.max=c.size;let a=new FileReader;a.onload=h=>{console.log("FileRead.onload ",h),n.DC.SendFile(h.target.result,c.name)},a.readAsArrayBuffer(c)}r.removeEventListener("change",r.onchange),r.onchange=o;let l=new PointerEvent("click",{bubbles:!1,cancelable:!0,view:window});r.dispatchEvent(l)}get RemoteStream(){return this.remoteStream}async InitRTC(r,n){let o=this;this.conf=cu;let l={iceTransportPolicy:"all",lifetimeDuration:this.conf.lifetimeDuration,rtcpMuxPolicy:"require",bundlePolicy:"balanced",iceServers:[this.conf.stun,this.conf.turn]};o.pcPull[r]&&(o.DC&&(o.DC.dc.close(),o.DC=null),o.pcPull[r].con&&(o.pcPull[r].con.close(),o.pcPull[r].con=null));let c=o.pcPull[r]?o.pcPull[r].params:{};o.pcPull[r]=null,o.pcPull[r]=new h1(o,l,r),o.pcPull[r].signal=null,o.pcPull[r].signal=o.signal,c&&(o.pcPull[r].params=c),o.DC=new d1(o,o.pcPull[r]),this.startTime=Date.now(),n()}GetUserMedia(r,n){navigator.mediaDevices.getUserMedia(r).then(o=>this.gotStream(o,n)).catch(function(o){(o.name==="NotFoundError"||o.name==="NotReadableError")&&(r.audio&&alert("Something wrong with mic?"),r.video&&alert("Something wrong with camera?"),n(!1))})}gotStream(r,n){this.localStream||(this.localStream=r),this.getTracks(r,n)}getTracks(r,n){let o=this;r.getTracks().forEach(a=>{for(let h in o.pcPull)h!=="reserve"&&(o.pcPull[h].con.iceConnectionState==="disconnected"||o.pcPull[h].con.iceConnectionState==="closed"||(o.localStream.addTrack(a),o.pcPull[h].sender=o.pcPull[h].con.addTrack(a,o.localStream),a.kind==="video"?window.user.SetLocalVideo(o.localStream):a.kind))});var l=this.localStream.getVideoTracks(),c=this.localStream.getAudioTracks();l.length>0&&console.log("Using video device: "+l[0].label,o),c.length>0&&console.log("Using audio device: "+c[0].label,o),n(!0)}SendStatus(r){let n={};n.proj="kolmit",n.func="status",n.type=this.type,n.abonent=this.abonent.toLowerCase(),n.uid=this.uid,n.em=this.em.toLowerCase(),n.status=r,this.signal.SendMessage(n,()=>{this.status=r})}RemoveTracks(){let r=this;r.localStream&&(r.localStream.getVideoTracks().forEach(l=>{l.readyState=="live"&&l.kind==="video"&&l.stop(),r.localStream.removeTrack(l)}),r.localStream.getAudioTracks().forEach(l=>{l.readyState=="live"&&l.kind==="audio"&&l.stop(),r.localStream.removeTrack(l)}))}};class g1 extends p1{constructor(r,n,o){super(r,n,o),this.redirected=!1,this.component="",this.checking_tmr,this.fileInput=document.getElementsByClassName("fileInput")[0]?document.getElementsByClassName("fileInput")[0]:"",this.dataProgress=document.getElementById("dataProgress")?document.getElementById("dataProgress"):"",Dr.subscribe(l=>{try{l&&this.OnMessage(l)}catch(c){console.log(c)}})}Init(r){let n=this;this.mode="";let o=[this.abonent];n.main_pc="";for(let l in o)n.InitRTC(o[l],function(){r()})}Call(){this.Init(()=>{this.GetUserMedia({audio:1,video:0},()=>{let r={};r.proj="kolmit",r.func="call",r.status="call",r.type=this.type,r.abonent=this.abonent.toLowerCase(),r.em=this.em.toLowerCase(),r.uid=this.uid,this.signal.SendMessage(r,()=>{this.status="call"})})})}Hangup(){this.DC&&(this.DC.SendDCHangup(()=>{}),this.Init(()=>{this.SendCheck()}))}OnMessage(r){let n=this;if(r.operators&&r.em===n.em&&r.operators[n.abonent]&&r.operators[n.abonent].abonent===n.abonent&&(r.operators[n.abonent].status==="offer"||r.operators[n.abonent].status==="close"&&r.operators[n.abonent].uid===n.oper_uid&&(n.RemoveTracks(),n.Hangup())),r.operator&&(r.operator.em,n.abonent),r.func==="mute"&&(n.RemoveTracks(),n.Init(()=>{n.SendCheck()})),(r.call||r.func==="call")&&console.log("received call: "+r.call+" from "+n.type,n),r.func==="redirect"&&(n.em=r.abonent.operator,n.InitRTC(r.abonent.operator,async()=>{await new Promise((l,c)=>{n.Call(l)})})),r.oper_uid&&(n.oper_uid=r.oper_uid),r.desc&&n.pcPull[r.abonent]&&(n.pcPull[r.abonent].con.connectionState==="failed"&&n.pcPull[r.abonent].con.restartIce(),n.pcPull[r.abonent]&&(n.pcPull[r.abonent].params.rem_desc=r.desc,n.pcPull[r.abonent].setRemoteDesc(r.desc))),r.cand&&n.pcPull[r.abonent]&&n.pcPull[r.abonent]){if(n.pcPull[r.abonent].con.signalingState==="closed")return;try{if(n.pcPull[r.abonent].params.rem_cand=r.cand,Array.isArray(r.cand))for(let o in r.cand)n.pcPull[r.abonent].con.addIceCandidate(r.cand[o]);else n.pcPull[r.abonent].con.addIceCandidate(r.cand)}catch(o){console.log(o)}}}}let _1=$0(),m1=$0();function v1(s){let r,n,o=`input {\r
      border-width: 0;\r
    }\r
\r
    .form-signin {\r
      background-color: white;\r
      max-width: 90%;\r
      /* max-height: 90%;            */\r
      border: 3px solid grey;\r
      padding: 10px;\r
      margin: 0 auto;\r
    }\r
    .form-signin .form-signin-heading,\r
    .form-signin .form-control {\r
      position: relative;\r
      height: auto;\r
      -webkit-box-sizing: border-box;\r
      -moz-box-sizing: border-box;\r
      box-sizing: border-box;\r
      padding: 10px;\r
      font-size: 16px;\r
    }\r
    .form-signin .form-control:focus {\r
      z-index: 2;\r
    }\r
    .form-signin input[type='email'] {\r
      margin-bottom: -1px;\r
      border-bottom-right-radius: 0;\r
      border-bottom-left-radius: 0;\r
    }`,l,c,a,h=s[8]["How to introduce you?"][s[7]]+"",f,m,v,p,b,w,A,T,B,L,Z,z,N,H,U,G,fe='<span style="display: block; position: absolute; display: block; left: 46px; bottom: 113px; font-weight: 200; font-size: x-small;">Upload photo...</span>',x,D,ee,pe,ve=" ",q,te,Ge=s[8]["Save and Close"][s[7]]+"",Ce,Ne,rt;return{c(){r=J("div"),n=J("style"),n.textContent=o,l=re(),c=J("div"),a=J("h2"),f=St(h),m=re(),v=J("div"),p=J("div"),b=J("input"),A=re(),T=J("div"),B=J("input"),Z=re(),z=J("div"),N=J("img"),U=re(),G=J("div"),G.innerHTML=fe,x=re(),D=J("input"),ee=re(),pe=J("div"),pe.textContent=ve,q=re(),te=J("button"),Ce=St(Ge),this.h()},l(Ae){r=K(Ae,"DIV",{class:!0,style:!0});var be=j(r);n=K(be,"STYLE",{"data-svelte-h":!0}),wn(n)!=="svelte-nchiym"&&(n.textContent=o),l=ie(be),c=K(be,"DIV",{class:!0,style:!0});var le=j(c);a=K(le,"H2",{class:!0});var De=j(a);f=Ct(De,h),De.forEach(k),m=ie(le),v=K(le,"DIV",{style:!0});var Ue=j(v);p=K(Ue,"DIV",{style:!0});var ht=j(p);b=K(ht,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),ht.forEach(k),A=ie(Ue),T=K(Ue,"DIV",{style:!0});var mt=j(T);B=K(mt,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0,style:!0}),mt.forEach(k),Ue.forEach(k),Z=ie(le),z=K(le,"DIV",{});var Ft=j(z);N=K(Ft,"IMG",{src:!0,id:!0,alt:!0,style:!0}),U=ie(Ft),G=K(Ft,"DIV",{"data-svelte-h":!0}),wn(G)!=="svelte-1y18wj7"&&(G.innerHTML=fe),x=ie(Ft),D=K(Ft,"INPUT",{accept:!0,id:!0,name:!0,type:!0,style:!0}),Ft.forEach(k),ee=ie(le),pe=K(le,"DIV",{for:!0,"data-svelte-h":!0}),wn(pe)!=="svelte-o0b98r"&&(pe.textContent=ve),q=ie(le),te=K(le,"BUTTON",{id:!0,class:!0});var Tt=j(te);Ce=Ct(Tt,Ge),Tt.forEach(k),le.forEach(k),be.forEach(k),this.h()},h(){S(a,"class","form-signin-heading"),S(b,"type","text"),S(b,"id","name"),S(b,"class","form-control"),S(b,"placeholder",w=s[8]["input user name *"][s[7]]),b.required=!0,O(p,"width","250px"),S(B,"type","email"),S(B,"id","email"),S(B,"class","form-control"),S(B,"placeholder",L=s[8]["input email address"][s[7]]),B.required=!0,O(B,"width","100%"),O(T,"flex","1"),O(v,"display","flex"),O(v,"flex-direction","column"),Dt(N.src,H=s[2])||S(N,"src",H),S(N,"id","avatar_img"),S(N,"alt","avatar"),O(N,"display","block"),O(N,"margin-left","auto"),O(N,"margin-right","auto"),O(N,"width","40%"),S(D,"accept","image/png, image/jpeg"),S(D,"id","avatar"),S(D,"name","avatar"),S(D,"type","file"),O(D,"display","none"),S(pe,"for","send_form"),S(te,"id","send_form"),S(te,"class","btn btn-primary"),S(c,"class","row"),O(c,"border-style","groove"),O(c,"border-radius","2px"),O(c,"border-color","#cbced2"),O(c,"padding","10px"),S(r,"class","form-signin"),O(r,"display","block"),O(r,"position","fixed"),O(r,"top","0")},m(Ae,be){Q(Ae,r,be),P(r,n),P(r,l),P(r,c),P(c,a),P(a,f),P(c,m),P(c,v),P(v,p),P(p,b),Je(b,s[3]),P(v,A),P(v,T),P(T,B),Je(B,s[4]),P(c,Z),P(c,z),P(z,N),s[17](N),P(z,U),P(z,G),P(z,x),P(z,D),s[18](D),P(c,ee),P(c,pe),P(c,q),P(c,te),P(te,Ce),s[20](r),Ne||(rt=[ue(b,"input",s[15]),ue(B,"input",s[16]),ue(N,"click",s[12]),ue(D,"change",s[10]),ue(D,"change",s[19]),ue(te,"click",s[11]),Xp(s[9].call(null,r))],Ne=!0)},p(Ae,[be]){be&128&&h!==(h=Ae[8]["How to introduce you?"][Ae[7]]+"")&&on(f,h),be&128&&w!==(w=Ae[8]["input user name *"][Ae[7]])&&S(b,"placeholder",w),be&8&&b.value!==Ae[3]&&Je(b,Ae[3]),be&128&&L!==(L=Ae[8]["input email address"][Ae[7]])&&S(B,"placeholder",L),be&16&&B.value!==Ae[4]&&Je(B,Ae[4]),be&4&&!Dt(N.src,H=Ae[2])&&S(N,"src",H),be&128&&Ge!==(Ge=Ae[8]["Save and Close"][Ae[7]]+"")&&on(Ce,Ge)},i:We,o:We,d(Ae){Ae&&k(r),s[17](null),s[18](null),s[20](null),Ne=!1,ln(rt)}}}function b1(s,r,n){let o,l;Le(s,m1,D=>n(21,o=D)),Le(s,_1,D=>n(22,l=D));let{profile:c}=r,{selected:a}=r,h,f="./assets/user.svg",m,v,p,b,w,A="en";A=l;const T=o;async function B(D){if(window.parent.document.body.append(D),localStorage.getItem("kolmit_abonent")){let ee=JSON.parse(localStorage.getItem("kolmit_abonent"));n(3,m=ee.name),n(4,v=ee.email),n(2,f=ee.src)}}async function L(D){try{let ee=await eo(D.target.files[0],function(pe,ve){pe.type==="error"?console.error("Error loading image "):(n(2,f=pe.toDataURL()),window.parent.document.getElementById("avatar_img").src=f,window.parent.document.getElementById("avatar_input").value=f)},{orientation:!0,maxWidth:300,maxHeight:300,minWidth:100,minHeight:50,canvas:!0})}catch{}}function Z(){localStorage.setItem("kolmit_abonent",JSON.stringify({id:window.id,src:f,name:m,email:v})),n(14,a=""),n(13,c=!1)}function z(){let D=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});w.dispatchEvent(D)}function N(){m=this.value,n(3,m)}function H(){v=this.value,n(4,v)}function U(D){Ie[D?"unshift":"push"](()=>{b=D,n(5,b)})}function G(D){Ie[D?"unshift":"push"](()=>{w=D,n(6,w)})}function fe(){p=this.files,n(0,p)}function x(D){Ie[D?"unshift":"push"](()=>{h=D,n(1,h)})}return s.$$set=D=>{"profile"in D&&n(13,c=D.profile),"selected"in D&&n(14,a=D.selected)},s.$$.update=()=>{s.$$.dirty&1&&p&&console.log(p)},[p,h,f,m,v,b,w,A,T,B,L,Z,z,c,a,N,H,U,G,fe,x]}class y1 extends tt{constructor(r){super(),nt(this,r,b1,v1,et,{profile:13,selected:14})}}function w1(s){let r,n,o,l,c,a,h,f,m,v="0",p,b,w;const A=s[4].default,T=xn(A,s,s[3],null);return{c(){r=J("div"),n=Te("svg"),o=Te("g"),l=Te("title"),c=St("Layer 1"),a=Te("path"),h=re(),T&&T.c(),f=re(),m=J("span"),m.textContent=v,this.h()},l(B){r=K(B,"DIV",{class:!0});var L=j(r);n=Re(L,"svg",{class:!0,status:!0,width:!0,height:!0});var Z=j(n);o=Re(Z,"g",{class:!0,style:!0});var z=j(o);l=Re(z,"title",{});var N=j(l);c=Ct(N,"Layer 1"),N.forEach(k),a=Re(z,"path",{d:!0,id:!0,class:!0,transform:!0}),j(a).forEach(k),z.forEach(k),Z.forEach(k),h=ie(L),T&&T.l(L),f=ie(L),m=K(L,"SPAN",{class:!0,style:!0,"data-svelte-h":!0}),wn(m)!=="svelte-zcrh5f"&&(m.textContent=v),L.forEach(k),this.h()},h(){S(a,"d","M390.7 353.3c-120.30000000000001 69.5 63.19999999999999 413.59999999999997 194.90000000000003 337.59999999999997l122.10000000000002 211.39999999999998c-55.60000000000002 32.10000000000002-102.5 52.30000000000007-166.9000000000001 15.5-178.79999999999995-102.19999999999993-375.59999999999997-442.9-369.99999999999994-646.0999999999999 1.8999999999999773-70.60000000000005 43.599999999999994-98.30000000000004 97.89999999999998-129.70000000000005 23.30000000000001 40.400000000000006 98.60000000000002 170.8 122 211.3z m50.400000000000034-5.699999999999989c-13 7.5-29.700000000000045 3.099999999999966-37.30000000000001-10l-115-199.3c-7.5-13.000000000000014-3.1000000000000227-29.700000000000017 10-37.30000000000001l60.5-34.900000000000006c13-7.499999999999993 29.69999999999999-3.0999999999999943 37.30000000000001 10l115.09999999999997 199.29999999999998c7.500000000000057 13 3.099999999999966 29.700000000000045-10 37.200000000000045l-60.599999999999966 35z m314.4 544.5c-13 7.5-29.700000000000045 3.1000000000000227-37.299999999999955-10l-115-199.30000000000007c-7.5-13-3.1000000000000227-29.699999999999932 10-37.299999999999955l60.5-34.89999999999998c13-7.5 29.699999999999932-3.1000000000000227 37.299999999999955 10l115.10000000000002 199.29999999999995c7.5 13 3.1000000000000227 29.700000000000045-10 37.30000000000007l-60.60000000000002 34.89999999999998z"),S(a,"id","svg_1"),S(a,"class","selected"),S(a,"transform","scale(.03)"),S(o,"class","currentLayer svelte-1rc8o8m"),O(o,"stroke","black"),O(o,"stroke-width","10px"),S(n,"class","callButton svelte-1rc8o8m"),S(n,"status",s[0]),S(n,"width","35"),S(n,"height","35"),S(m,"class","badge badge-primary badge-pill call-queue"),O(m,"display","none"),O(m,"position","absolute"),O(m,"right","0px"),O(m,"bottom","0px"),O(m,"color","#0e0cff"),O(m,"font-size","12px"),O(m,"opacity","1"),S(r,"class","callObject svelte-1rc8o8m")},m(B,L){Q(B,r,L),P(r,n),P(n,o),P(o,l),P(l,c),P(o,a),P(r,h),T&&T.m(r,null),P(r,f),P(r,m),p=!0,b||(w=[ue(n,"mute",s[6]),ue(r,"long-press",function(){Pr(s[1])&&s[1].apply(this,arguments)}),ue(r,"click",s[5])],b=!0)},p(B,[L]){s=B,(!p||L&1)&&S(n,"status",s[0]),T&&T.p&&(!p||L&8)&&Jn(T,A,s,s[3],p?Yn(A,s[3],L,null):Kn(s[3]),null)},i(B){p||(se(T,B),p=!0)},o(B){de(T,B),p=!1},d(B){B&&k(r),T&&T.d(B),b=!1,ln(w)}}}function S1(s,r,n){let{$$slots:o={},$$scope:l}=r,{status:c="inactive"}=r,{em:a}=r,{OnLongPress:h}=r;function f(v){Z0.call(this,s,v)}function m(v){Z0.call(this,s,v)}return s.$$set=v=>{"status"in v&&n(0,c=v.status),"em"in v&&n(2,a=v.em),"OnLongPress"in v&&n(1,h=v.OnLongPress),"$$scope"in v&&n(3,l=v.$$scope)},[c,h,a,l,o,f,m]}class C1 extends tt{constructor(r){super(),nt(this,r,S1,w1,et,{status:0,em:2,OnLongPress:1})}}var Ii={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ii.exports;(function(s,r){(function(){var n,o="4.17.21",l=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",h="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",m=500,v="__lodash_placeholder__",p=1,b=2,w=4,A=1,T=2,B=1,L=2,Z=4,z=8,N=16,H=32,U=64,G=128,fe=256,x=512,D=30,ee="...",pe=800,ve=16,q=1,te=2,Ge=3,Ce=1/0,Ne=9007199254740991,rt=17976931348623157e292,Ae=0/0,be=4294967295,le=be-1,De=be>>>1,Ue=[["ary",G],["bind",B],["bindKey",L],["curry",z],["curryRight",N],["flip",x],["partial",H],["partialRight",U],["rearg",fe]],ht="[object Arguments]",mt="[object Array]",Ft="[object AsyncFunction]",Tt="[object Boolean]",X="[object Date]",On="[object DOMException]",He="[object Error]",Kt="[object Function]",Lr="[object GeneratorFunction]",dt="[object Map]",sn="[object Number]",ki="[object Null]",Ot="[object Object]",Mr="[object Promise]",Ai="[object Proxy]",un="[object RegExp]",Y="[object Set]",ge="[object String]",Rt="[object Symbol]",En="[object Undefined]",vt="[object WeakMap]",an="[object WeakSet]",at="[object ArrayBuffer]",fn="[object DataView]",cn="[object Float32Array]",Di="[object Float64Array]",Ti="[object Int8Array]",Ri="[object Int16Array]",Pi="[object Int32Array]",Li="[object Uint8Array]",Mi="[object Uint8ClampedArray]",Bi="[object Uint16Array]",Ui="[object Uint32Array]",_u=/\b__p \+= '';/g,mu=/\b(__p \+=) '' \+/g,vu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,to=/&(?:amp|lt|gt|quot|#39);/g,no=/[&<>"']/g,bu=RegExp(to.source),yu=RegExp(no.source),wu=/<%-([\s\S]+?)%>/g,Su=/<%([\s\S]+?)%>/g,ro=/<%=([\s\S]+?)%>/g,Cu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ou=/^\w*$/,Eu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wi=/[\\^$.*+?()[\]{}|]/g,Iu=RegExp(Wi.source),Fi=/^\s+/,ku=/\s/,Au=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Du=/\{\n\/\* \[wrapped with (.+)\] \*/,Tu=/,? & /,Ru=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pu=/[()=,{}\[\]\/\s]/,Lu=/\\(\\)?/g,Mu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,io=/\w*$/,Bu=/^[-+]0x[0-9a-f]+$/i,Uu=/^0b[01]+$/i,Wu=/^\[object .+?Constructor\]$/,Fu=/^0o[0-7]+$/i,Nu=/^(?:0|[1-9]\d*)$/,zu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Br=/($^)/,Hu=/['\n\r\u2028\u2029\\]/g,Ur="\\ud800-\\udfff",Vu="\\u0300-\\u036f",Gu="\\ufe20-\\ufe2f",qu="\\u20d0-\\u20ff",oo=Vu+Gu+qu,lo="\\u2700-\\u27bf",so="a-z\\xdf-\\xf6\\xf8-\\xff",xu="\\xac\\xb1\\xd7\\xf7",Ju="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ku="\\u2000-\\u206f",Yu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",uo="A-Z\\xc0-\\xd6\\xd8-\\xde",ao="\\ufe0e\\ufe0f",fo=xu+Ju+Ku+Yu,Ni="['’]",ju="["+Ur+"]",co="["+fo+"]",Wr="["+oo+"]",ho="\\d+",Zu="["+lo+"]",po="["+so+"]",go="[^"+Ur+fo+ho+lo+so+uo+"]",zi="\\ud83c[\\udffb-\\udfff]",Xu="(?:"+Wr+"|"+zi+")",_o="[^"+Ur+"]",Hi="(?:\\ud83c[\\udde6-\\uddff]){2}",Vi="[\\ud800-\\udbff][\\udc00-\\udfff]",jn="["+uo+"]",mo="\\u200d",vo="(?:"+po+"|"+go+")",Qu="(?:"+jn+"|"+go+")",bo="(?:"+Ni+"(?:d|ll|m|re|s|t|ve))?",yo="(?:"+Ni+"(?:D|LL|M|RE|S|T|VE))?",wo=Xu+"?",So="["+ao+"]?",$u="(?:"+mo+"(?:"+[_o,Hi,Vi].join("|")+")"+So+wo+")*",e9="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",t9="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Co=So+wo+$u,n9="(?:"+[Zu,Hi,Vi].join("|")+")"+Co,r9="(?:"+[_o+Wr+"?",Wr,Hi,Vi,ju].join("|")+")",i9=RegExp(Ni,"g"),o9=RegExp(Wr,"g"),Gi=RegExp(zi+"(?="+zi+")|"+r9+Co,"g"),l9=RegExp([jn+"?"+po+"+"+bo+"(?="+[co,jn,"$"].join("|")+")",Qu+"+"+yo+"(?="+[co,jn+vo,"$"].join("|")+")",jn+"?"+vo+"+"+bo,jn+"+"+yo,t9,e9,ho,n9].join("|"),"g"),s9=RegExp("["+mo+Ur+oo+ao+"]"),u9=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,a9=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],f9=-1,Ve={};Ve[cn]=Ve[Di]=Ve[Ti]=Ve[Ri]=Ve[Pi]=Ve[Li]=Ve[Mi]=Ve[Bi]=Ve[Ui]=!0,Ve[ht]=Ve[mt]=Ve[at]=Ve[Tt]=Ve[fn]=Ve[X]=Ve[He]=Ve[Kt]=Ve[dt]=Ve[sn]=Ve[Ot]=Ve[un]=Ve[Y]=Ve[ge]=Ve[vt]=!1;var ze={};ze[ht]=ze[mt]=ze[at]=ze[fn]=ze[Tt]=ze[X]=ze[cn]=ze[Di]=ze[Ti]=ze[Ri]=ze[Pi]=ze[dt]=ze[sn]=ze[Ot]=ze[un]=ze[Y]=ze[ge]=ze[Rt]=ze[Li]=ze[Mi]=ze[Bi]=ze[Ui]=!0,ze[He]=ze[Kt]=ze[vt]=!1;var c9={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},h9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d9={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},p9={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},g9=parseFloat,_9=parseInt,Oo=typeof ar=="object"&&ar&&ar.Object===Object&&ar,m9=typeof self=="object"&&self&&self.Object===Object&&self,ft=Oo||m9||Function("return this")(),qi=r&&!r.nodeType&&r,Bn=qi&&!0&&s&&!s.nodeType&&s,Eo=Bn&&Bn.exports===qi,xi=Eo&&Oo.process,Nt=function(){try{var E=Bn&&Bn.require&&Bn.require("util").types;return E||xi&&xi.binding&&xi.binding("util")}catch{}}(),Io=Nt&&Nt.isArrayBuffer,ko=Nt&&Nt.isDate,Ao=Nt&&Nt.isMap,Do=Nt&&Nt.isRegExp,To=Nt&&Nt.isSet,Ro=Nt&&Nt.isTypedArray;function Pt(E,M,R){switch(R.length){case 0:return E.call(M);case 1:return E.call(M,R[0]);case 2:return E.call(M,R[0],R[1]);case 3:return E.call(M,R[0],R[1],R[2])}return E.apply(M,R)}function v9(E,M,R,ne){for(var _e=-1,Pe=E==null?0:E.length;++_e<Pe;){var lt=E[_e];M(ne,lt,R(lt),E)}return ne}function zt(E,M){for(var R=-1,ne=E==null?0:E.length;++R<ne&&M(E[R],R,E)!==!1;);return E}function b9(E,M){for(var R=E==null?0:E.length;R--&&M(E[R],R,E)!==!1;);return E}function Po(E,M){for(var R=-1,ne=E==null?0:E.length;++R<ne;)if(!M(E[R],R,E))return!1;return!0}function In(E,M){for(var R=-1,ne=E==null?0:E.length,_e=0,Pe=[];++R<ne;){var lt=E[R];M(lt,R,E)&&(Pe[_e++]=lt)}return Pe}function Fr(E,M){var R=E==null?0:E.length;return!!R&&Zn(E,M,0)>-1}function Ji(E,M,R){for(var ne=-1,_e=E==null?0:E.length;++ne<_e;)if(R(M,E[ne]))return!0;return!1}function qe(E,M){for(var R=-1,ne=E==null?0:E.length,_e=Array(ne);++R<ne;)_e[R]=M(E[R],R,E);return _e}function kn(E,M){for(var R=-1,ne=M.length,_e=E.length;++R<ne;)E[_e+R]=M[R];return E}function Ki(E,M,R,ne){var _e=-1,Pe=E==null?0:E.length;for(ne&&Pe&&(R=E[++_e]);++_e<Pe;)R=M(R,E[_e],_e,E);return R}function y9(E,M,R,ne){var _e=E==null?0:E.length;for(ne&&_e&&(R=E[--_e]);_e--;)R=M(R,E[_e],_e,E);return R}function Yi(E,M){for(var R=-1,ne=E==null?0:E.length;++R<ne;)if(M(E[R],R,E))return!0;return!1}var w9=ji("length");function S9(E){return E.split("")}function C9(E){return E.match(Ru)||[]}function Lo(E,M,R){var ne;return R(E,function(_e,Pe,lt){if(M(_e,Pe,lt))return ne=Pe,!1}),ne}function Nr(E,M,R,ne){for(var _e=E.length,Pe=R+(ne?1:-1);ne?Pe--:++Pe<_e;)if(M(E[Pe],Pe,E))return Pe;return-1}function Zn(E,M,R){return M===M?B9(E,M,R):Nr(E,Mo,R)}function O9(E,M,R,ne){for(var _e=R-1,Pe=E.length;++_e<Pe;)if(ne(E[_e],M))return _e;return-1}function Mo(E){return E!==E}function Bo(E,M){var R=E==null?0:E.length;return R?Xi(E,M)/R:Ae}function ji(E){return function(M){return M==null?n:M[E]}}function Zi(E){return function(M){return E==null?n:E[M]}}function Uo(E,M,R,ne,_e){return _e(E,function(Pe,lt,Fe){R=ne?(ne=!1,Pe):M(R,Pe,lt,Fe)}),R}function E9(E,M){var R=E.length;for(E.sort(M);R--;)E[R]=E[R].value;return E}function Xi(E,M){for(var R,ne=-1,_e=E.length;++ne<_e;){var Pe=M(E[ne]);Pe!==n&&(R=R===n?Pe:R+Pe)}return R}function Qi(E,M){for(var R=-1,ne=Array(E);++R<E;)ne[R]=M(R);return ne}function I9(E,M){return qe(M,function(R){return[R,E[R]]})}function Wo(E){return E&&E.slice(0,Ho(E)+1).replace(Fi,"")}function Lt(E){return function(M){return E(M)}}function $i(E,M){return qe(M,function(R){return E[R]})}function pr(E,M){return E.has(M)}function Fo(E,M){for(var R=-1,ne=E.length;++R<ne&&Zn(M,E[R],0)>-1;);return R}function No(E,M){for(var R=E.length;R--&&Zn(M,E[R],0)>-1;);return R}function k9(E,M){for(var R=E.length,ne=0;R--;)E[R]===M&&++ne;return ne}var A9=Zi(c9),D9=Zi(h9);function T9(E){return"\\"+p9[E]}function R9(E,M){return E==null?n:E[M]}function Xn(E){return s9.test(E)}function P9(E){return u9.test(E)}function L9(E){for(var M,R=[];!(M=E.next()).done;)R.push(M.value);return R}function e0(E){var M=-1,R=Array(E.size);return E.forEach(function(ne,_e){R[++M]=[_e,ne]}),R}function zo(E,M){return function(R){return E(M(R))}}function An(E,M){for(var R=-1,ne=E.length,_e=0,Pe=[];++R<ne;){var lt=E[R];(lt===M||lt===v)&&(E[R]=v,Pe[_e++]=R)}return Pe}function zr(E){var M=-1,R=Array(E.size);return E.forEach(function(ne){R[++M]=ne}),R}function M9(E){var M=-1,R=Array(E.size);return E.forEach(function(ne){R[++M]=[ne,ne]}),R}function B9(E,M,R){for(var ne=R-1,_e=E.length;++ne<_e;)if(E[ne]===M)return ne;return-1}function U9(E,M,R){for(var ne=R+1;ne--;)if(E[ne]===M)return ne;return ne}function Qn(E){return Xn(E)?F9(E):w9(E)}function Yt(E){return Xn(E)?N9(E):S9(E)}function Ho(E){for(var M=E.length;M--&&ku.test(E.charAt(M)););return M}var W9=Zi(d9);function F9(E){for(var M=Gi.lastIndex=0;Gi.test(E);)++M;return M}function N9(E){return E.match(Gi)||[]}function z9(E){return E.match(l9)||[]}var H9=function E(M){M=M==null?ft:$n.defaults(ft.Object(),M,$n.pick(ft,a9));var R=M.Array,ne=M.Date,_e=M.Error,Pe=M.Function,lt=M.Math,Fe=M.Object,t0=M.RegExp,V9=M.String,Ht=M.TypeError,Hr=R.prototype,G9=Pe.prototype,er=Fe.prototype,Vr=M["__core-js_shared__"],Gr=G9.toString,Be=er.hasOwnProperty,q9=0,Vo=function(){var e=/[^.]+$/.exec(Vr&&Vr.keys&&Vr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),qr=er.toString,x9=Gr.call(Fe),J9=ft._,K9=t0("^"+Gr.call(Be).replace(Wi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xr=Eo?M.Buffer:n,Dn=M.Symbol,Jr=M.Uint8Array,Go=xr?xr.allocUnsafe:n,Kr=zo(Fe.getPrototypeOf,Fe),qo=Fe.create,xo=er.propertyIsEnumerable,Yr=Hr.splice,Jo=Dn?Dn.isConcatSpreadable:n,gr=Dn?Dn.iterator:n,Un=Dn?Dn.toStringTag:n,jr=function(){try{var e=Hn(Fe,"defineProperty");return e({},"",{}),e}catch{}}(),Y9=M.clearTimeout!==ft.clearTimeout&&M.clearTimeout,j9=ne&&ne.now!==ft.Date.now&&ne.now,Z9=M.setTimeout!==ft.setTimeout&&M.setTimeout,Zr=lt.ceil,Xr=lt.floor,n0=Fe.getOwnPropertySymbols,X9=xr?xr.isBuffer:n,Ko=M.isFinite,Q9=Hr.join,$9=zo(Fe.keys,Fe),st=lt.max,pt=lt.min,ea=ne.now,ta=M.parseInt,Yo=lt.random,na=Hr.reverse,r0=Hn(M,"DataView"),_r=Hn(M,"Map"),i0=Hn(M,"Promise"),tr=Hn(M,"Set"),mr=Hn(M,"WeakMap"),vr=Hn(Fe,"create"),Qr=mr&&new mr,nr={},ra=Vn(r0),ia=Vn(_r),oa=Vn(i0),la=Vn(tr),sa=Vn(mr),$r=Dn?Dn.prototype:n,br=$r?$r.valueOf:n,jo=$r?$r.toString:n;function g(e){if(Ke(e)&&!me(e)&&!(e instanceof Ee)){if(e instanceof Vt)return e;if(Be.call(e,"__wrapped__"))return Zl(e)}return new Vt(e)}var rr=function(){function e(){}return function(t){if(!xe(t))return{};if(qo)return qo(t);e.prototype=t;var i=new e;return e.prototype=n,i}}();function ei(){}function Vt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}g.templateSettings={escape:wu,evaluate:Su,interpolate:ro,variable:"",imports:{_:g}},g.prototype=ei.prototype,g.prototype.constructor=g,Vt.prototype=rr(ei.prototype),Vt.prototype.constructor=Vt;function Ee(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=be,this.__views__=[]}function ua(){var e=new Ee(this.__wrapped__);return e.__actions__=Et(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Et(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Et(this.__views__),e}function aa(){if(this.__filtered__){var e=new Ee(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function fa(){var e=this.__wrapped__.value(),t=this.__dir__,i=me(e),u=t<0,d=i?e.length:0,_=Cf(0,d,this.__views__),y=_.start,C=_.end,I=C-y,W=u?C:y-1,F=this.__iteratees__,V=F.length,$=0,oe=pt(I,this.__takeCount__);if(!i||!u&&d==I&&oe==I)return bl(e,this.__actions__);var ce=[];e:for(;I--&&$<oe;){W+=t;for(var we=-1,he=e[W];++we<V;){var Oe=F[we],ke=Oe.iteratee,Ut=Oe.type,wt=ke(he);if(Ut==te)he=wt;else if(!wt){if(Ut==q)continue e;break e}}ce[$++]=he}return ce}Ee.prototype=rr(ei.prototype),Ee.prototype.constructor=Ee;function Wn(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var u=e[t];this.set(u[0],u[1])}}function ca(){this.__data__=vr?vr(null):{},this.size=0}function ha(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function da(e){var t=this.__data__;if(vr){var i=t[e];return i===f?n:i}return Be.call(t,e)?t[e]:n}function pa(e){var t=this.__data__;return vr?t[e]!==n:Be.call(t,e)}function ga(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=vr&&t===n?f:t,this}Wn.prototype.clear=ca,Wn.prototype.delete=ha,Wn.prototype.get=da,Wn.prototype.has=pa,Wn.prototype.set=ga;function hn(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var u=e[t];this.set(u[0],u[1])}}function _a(){this.__data__=[],this.size=0}function ma(e){var t=this.__data__,i=ti(t,e);if(i<0)return!1;var u=t.length-1;return i==u?t.pop():Yr.call(t,i,1),--this.size,!0}function va(e){var t=this.__data__,i=ti(t,e);return i<0?n:t[i][1]}function ba(e){return ti(this.__data__,e)>-1}function ya(e,t){var i=this.__data__,u=ti(i,e);return u<0?(++this.size,i.push([e,t])):i[u][1]=t,this}hn.prototype.clear=_a,hn.prototype.delete=ma,hn.prototype.get=va,hn.prototype.has=ba,hn.prototype.set=ya;function dn(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var u=e[t];this.set(u[0],u[1])}}function wa(){this.size=0,this.__data__={hash:new Wn,map:new(_r||hn),string:new Wn}}function Sa(e){var t=di(this,e).delete(e);return this.size-=t?1:0,t}function Ca(e){return di(this,e).get(e)}function Oa(e){return di(this,e).has(e)}function Ea(e,t){var i=di(this,e),u=i.size;return i.set(e,t),this.size+=i.size==u?0:1,this}dn.prototype.clear=wa,dn.prototype.delete=Sa,dn.prototype.get=Ca,dn.prototype.has=Oa,dn.prototype.set=Ea;function Fn(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new dn;++t<i;)this.add(e[t])}function Ia(e){return this.__data__.set(e,f),this}function ka(e){return this.__data__.has(e)}Fn.prototype.add=Fn.prototype.push=Ia,Fn.prototype.has=ka;function jt(e){var t=this.__data__=new hn(e);this.size=t.size}function Aa(){this.__data__=new hn,this.size=0}function Da(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function Ta(e){return this.__data__.get(e)}function Ra(e){return this.__data__.has(e)}function Pa(e,t){var i=this.__data__;if(i instanceof hn){var u=i.__data__;if(!_r||u.length<l-1)return u.push([e,t]),this.size=++i.size,this;i=this.__data__=new dn(u)}return i.set(e,t),this.size=i.size,this}jt.prototype.clear=Aa,jt.prototype.delete=Da,jt.prototype.get=Ta,jt.prototype.has=Ra,jt.prototype.set=Pa;function Zo(e,t){var i=me(e),u=!i&&Gn(e),d=!i&&!u&&Mn(e),_=!i&&!u&&!d&&sr(e),y=i||u||d||_,C=y?Qi(e.length,V9):[],I=C.length;for(var W in e)(t||Be.call(e,W))&&!(y&&(W=="length"||d&&(W=="offset"||W=="parent")||_&&(W=="buffer"||W=="byteLength"||W=="byteOffset")||mn(W,I)))&&C.push(W);return C}function Xo(e){var t=e.length;return t?e[g0(0,t-1)]:n}function La(e,t){return pi(Et(e),Nn(t,0,e.length))}function Ma(e){return pi(Et(e))}function o0(e,t,i){(i!==n&&!Zt(e[t],i)||i===n&&!(t in e))&&pn(e,t,i)}function yr(e,t,i){var u=e[t];(!(Be.call(e,t)&&Zt(u,i))||i===n&&!(t in e))&&pn(e,t,i)}function ti(e,t){for(var i=e.length;i--;)if(Zt(e[i][0],t))return i;return-1}function Ba(e,t,i,u){return Tn(e,function(d,_,y){t(u,d,i(d),y)}),u}function Qo(e,t){return e&&tn(t,ut(t),e)}function Ua(e,t){return e&&tn(t,kt(t),e)}function pn(e,t,i){t=="__proto__"&&jr?jr(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function l0(e,t){for(var i=-1,u=t.length,d=R(u),_=e==null;++i<u;)d[i]=_?n:z0(e,t[i]);return d}function Nn(e,t,i){return e===e&&(i!==n&&(e=e<=i?e:i),t!==n&&(e=e>=t?e:t)),e}function Gt(e,t,i,u,d,_){var y,C=t&p,I=t&b,W=t&w;if(i&&(y=d?i(e,u,d,_):i(e)),y!==n)return y;if(!xe(e))return e;var F=me(e);if(F){if(y=Ef(e),!C)return Et(e,y)}else{var V=gt(e),$=V==Kt||V==Lr;if(Mn(e))return Sl(e,C);if(V==Ot||V==ht||$&&!d){if(y=I||$?{}:Hl(e),!C)return I?pf(e,Ua(y,e)):df(e,Qo(y,e))}else{if(!ze[V])return d?e:{};y=If(e,V,C)}}_||(_=new jt);var oe=_.get(e);if(oe)return oe;_.set(e,y),_s(e)?e.forEach(function(he){y.add(Gt(he,t,i,he,e,_))}):ps(e)&&e.forEach(function(he,Oe){y.set(Oe,Gt(he,t,i,Oe,e,_))});var ce=W?I?I0:E0:I?kt:ut,we=F?n:ce(e);return zt(we||e,function(he,Oe){we&&(Oe=he,he=e[Oe]),yr(y,Oe,Gt(he,t,i,Oe,e,_))}),y}function Wa(e){var t=ut(e);return function(i){return $o(i,e,t)}}function $o(e,t,i){var u=i.length;if(e==null)return!u;for(e=Fe(e);u--;){var d=i[u],_=t[d],y=e[d];if(y===n&&!(d in e)||!_(y))return!1}return!0}function el(e,t,i){if(typeof e!="function")throw new Ht(a);return kr(function(){e.apply(n,i)},t)}function wr(e,t,i,u){var d=-1,_=Fr,y=!0,C=e.length,I=[],W=t.length;if(!C)return I;i&&(t=qe(t,Lt(i))),u?(_=Ji,y=!1):t.length>=l&&(_=pr,y=!1,t=new Fn(t));e:for(;++d<C;){var F=e[d],V=i==null?F:i(F);if(F=u||F!==0?F:0,y&&V===V){for(var $=W;$--;)if(t[$]===V)continue e;I.push(F)}else _(t,V,u)||I.push(F)}return I}var Tn=kl(en),tl=kl(u0,!0);function Fa(e,t){var i=!0;return Tn(e,function(u,d,_){return i=!!t(u,d,_),i}),i}function ni(e,t,i){for(var u=-1,d=e.length;++u<d;){var _=e[u],y=t(_);if(y!=null&&(C===n?y===y&&!Bt(y):i(y,C)))var C=y,I=_}return I}function Na(e,t,i,u){var d=e.length;for(i=ye(i),i<0&&(i=-i>d?0:d+i),u=u===n||u>d?d:ye(u),u<0&&(u+=d),u=i>u?0:vs(u);i<u;)e[i++]=t;return e}function nl(e,t){var i=[];return Tn(e,function(u,d,_){t(u,d,_)&&i.push(u)}),i}function ct(e,t,i,u,d){var _=-1,y=e.length;for(i||(i=Af),d||(d=[]);++_<y;){var C=e[_];t>0&&i(C)?t>1?ct(C,t-1,i,u,d):kn(d,C):u||(d[d.length]=C)}return d}var s0=Al(),rl=Al(!0);function en(e,t){return e&&s0(e,t,ut)}function u0(e,t){return e&&rl(e,t,ut)}function ri(e,t){return In(t,function(i){return vn(e[i])})}function zn(e,t){t=Pn(t,e);for(var i=0,u=t.length;e!=null&&i<u;)e=e[nn(t[i++])];return i&&i==u?e:n}function il(e,t,i){var u=t(e);return me(e)?u:kn(u,i(e))}function bt(e){return e==null?e===n?En:ki:Un&&Un in Fe(e)?Sf(e):Bf(e)}function a0(e,t){return e>t}function za(e,t){return e!=null&&Be.call(e,t)}function Ha(e,t){return e!=null&&t in Fe(e)}function Va(e,t,i){return e>=pt(t,i)&&e<st(t,i)}function f0(e,t,i){for(var u=i?Ji:Fr,d=e[0].length,_=e.length,y=_,C=R(_),I=1/0,W=[];y--;){var F=e[y];y&&t&&(F=qe(F,Lt(t))),I=pt(F.length,I),C[y]=!i&&(t||d>=120&&F.length>=120)?new Fn(y&&F):n}F=e[0];var V=-1,$=C[0];e:for(;++V<d&&W.length<I;){var oe=F[V],ce=t?t(oe):oe;if(oe=i||oe!==0?oe:0,!($?pr($,ce):u(W,ce,i))){for(y=_;--y;){var we=C[y];if(!(we?pr(we,ce):u(e[y],ce,i)))continue e}$&&$.push(ce),W.push(oe)}}return W}function Ga(e,t,i,u){return en(e,function(d,_,y){t(u,i(d),_,y)}),u}function Sr(e,t,i){t=Pn(t,e),e=xl(e,t);var u=e==null?e:e[nn(xt(t))];return u==null?n:Pt(u,e,i)}function ol(e){return Ke(e)&&bt(e)==ht}function qa(e){return Ke(e)&&bt(e)==at}function xa(e){return Ke(e)&&bt(e)==X}function Cr(e,t,i,u,d){return e===t?!0:e==null||t==null||!Ke(e)&&!Ke(t)?e!==e&&t!==t:Ja(e,t,i,u,Cr,d)}function Ja(e,t,i,u,d,_){var y=me(e),C=me(t),I=y?mt:gt(e),W=C?mt:gt(t);I=I==ht?Ot:I,W=W==ht?Ot:W;var F=I==Ot,V=W==Ot,$=I==W;if($&&Mn(e)){if(!Mn(t))return!1;y=!0,F=!1}if($&&!F)return _||(_=new jt),y||sr(e)?Fl(e,t,i,u,d,_):yf(e,t,I,i,u,d,_);if(!(i&A)){var oe=F&&Be.call(e,"__wrapped__"),ce=V&&Be.call(t,"__wrapped__");if(oe||ce){var we=oe?e.value():e,he=ce?t.value():t;return _||(_=new jt),d(we,he,i,u,_)}}return $?(_||(_=new jt),wf(e,t,i,u,d,_)):!1}function Ka(e){return Ke(e)&&gt(e)==dt}function c0(e,t,i,u){var d=i.length,_=d,y=!u;if(e==null)return!_;for(e=Fe(e);d--;){var C=i[d];if(y&&C[2]?C[1]!==e[C[0]]:!(C[0]in e))return!1}for(;++d<_;){C=i[d];var I=C[0],W=e[I],F=C[1];if(y&&C[2]){if(W===n&&!(I in e))return!1}else{var V=new jt;if(u)var $=u(W,F,I,e,t,V);if(!($===n?Cr(F,W,A|T,u,V):$))return!1}}return!0}function ll(e){if(!xe(e)||Tf(e))return!1;var t=vn(e)?K9:Wu;return t.test(Vn(e))}function Ya(e){return Ke(e)&&bt(e)==un}function ja(e){return Ke(e)&&gt(e)==Y}function Za(e){return Ke(e)&&yi(e.length)&&!!Ve[bt(e)]}function sl(e){return typeof e=="function"?e:e==null?At:typeof e=="object"?me(e)?fl(e[0],e[1]):al(e):Ds(e)}function h0(e){if(!Ir(e))return $9(e);var t=[];for(var i in Fe(e))Be.call(e,i)&&i!="constructor"&&t.push(i);return t}function Xa(e){if(!xe(e))return Mf(e);var t=Ir(e),i=[];for(var u in e)u=="constructor"&&(t||!Be.call(e,u))||i.push(u);return i}function d0(e,t){return e<t}function ul(e,t){var i=-1,u=It(e)?R(e.length):[];return Tn(e,function(d,_,y){u[++i]=t(d,_,y)}),u}function al(e){var t=A0(e);return t.length==1&&t[0][2]?Gl(t[0][0],t[0][1]):function(i){return i===e||c0(i,e,t)}}function fl(e,t){return T0(e)&&Vl(t)?Gl(nn(e),t):function(i){var u=z0(i,e);return u===n&&u===t?H0(i,e):Cr(t,u,A|T)}}function ii(e,t,i,u,d){e!==t&&s0(t,function(_,y){if(d||(d=new jt),xe(_))Qa(e,t,y,i,ii,u,d);else{var C=u?u(P0(e,y),_,y+"",e,t,d):n;C===n&&(C=_),o0(e,y,C)}},kt)}function Qa(e,t,i,u,d,_,y){var C=P0(e,i),I=P0(t,i),W=y.get(I);if(W){o0(e,i,W);return}var F=_?_(C,I,i+"",e,t,y):n,V=F===n;if(V){var $=me(I),oe=!$&&Mn(I),ce=!$&&!oe&&sr(I);F=I,$||oe||ce?me(C)?F=C:it(C)?F=Et(C):oe?(V=!1,F=Sl(I,!0)):ce?(V=!1,F=Cl(I,!0)):F=[]:Ar(I)||Gn(I)?(F=C,Gn(C)?F=bs(C):(!xe(C)||vn(C))&&(F=Hl(I))):V=!1}V&&(y.set(I,F),d(F,I,u,_,y),y.delete(I)),o0(e,i,F)}function cl(e,t){var i=e.length;if(i)return t+=t<0?i:0,mn(t,i)?e[t]:n}function hl(e,t,i){t.length?t=qe(t,function(_){return me(_)?function(y){return zn(y,_.length===1?_[0]:_)}:_}):t=[At];var u=-1;t=qe(t,Lt(ae()));var d=ul(e,function(_,y,C){var I=qe(t,function(W){return W(_)});return{criteria:I,index:++u,value:_}});return E9(d,function(_,y){return hf(_,y,i)})}function $a(e,t){return dl(e,t,function(i,u){return H0(e,u)})}function dl(e,t,i){for(var u=-1,d=t.length,_={};++u<d;){var y=t[u],C=zn(e,y);i(C,y)&&Or(_,Pn(y,e),C)}return _}function ef(e){return function(t){return zn(t,e)}}function p0(e,t,i,u){var d=u?O9:Zn,_=-1,y=t.length,C=e;for(e===t&&(t=Et(t)),i&&(C=qe(e,Lt(i)));++_<y;)for(var I=0,W=t[_],F=i?i(W):W;(I=d(C,F,I,u))>-1;)C!==e&&Yr.call(C,I,1),Yr.call(e,I,1);return e}function pl(e,t){for(var i=e?t.length:0,u=i-1;i--;){var d=t[i];if(i==u||d!==_){var _=d;mn(d)?Yr.call(e,d,1):v0(e,d)}}return e}function g0(e,t){return e+Xr(Yo()*(t-e+1))}function tf(e,t,i,u){for(var d=-1,_=st(Zr((t-e)/(i||1)),0),y=R(_);_--;)y[u?_:++d]=e,e+=i;return y}function _0(e,t){var i="";if(!e||t<1||t>Ne)return i;do t%2&&(i+=e),t=Xr(t/2),t&&(e+=e);while(t);return i}function Se(e,t){return L0(ql(e,t,At),e+"")}function nf(e){return Xo(ur(e))}function rf(e,t){var i=ur(e);return pi(i,Nn(t,0,i.length))}function Or(e,t,i,u){if(!xe(e))return e;t=Pn(t,e);for(var d=-1,_=t.length,y=_-1,C=e;C!=null&&++d<_;){var I=nn(t[d]),W=i;if(I==="__proto__"||I==="constructor"||I==="prototype")return e;if(d!=y){var F=C[I];W=u?u(F,I,C):n,W===n&&(W=xe(F)?F:mn(t[d+1])?[]:{})}yr(C,I,W),C=C[I]}return e}var gl=Qr?function(e,t){return Qr.set(e,t),e}:At,of=jr?function(e,t){return jr(e,"toString",{configurable:!0,enumerable:!1,value:G0(t),writable:!0})}:At;function lf(e){return pi(ur(e))}function qt(e,t,i){var u=-1,d=e.length;t<0&&(t=-t>d?0:d+t),i=i>d?d:i,i<0&&(i+=d),d=t>i?0:i-t>>>0,t>>>=0;for(var _=R(d);++u<d;)_[u]=e[u+t];return _}function sf(e,t){var i;return Tn(e,function(u,d,_){return i=t(u,d,_),!i}),!!i}function oi(e,t,i){var u=0,d=e==null?u:e.length;if(typeof t=="number"&&t===t&&d<=De){for(;u<d;){var _=u+d>>>1,y=e[_];y!==null&&!Bt(y)&&(i?y<=t:y<t)?u=_+1:d=_}return d}return m0(e,t,At,i)}function m0(e,t,i,u){var d=0,_=e==null?0:e.length;if(_===0)return 0;t=i(t);for(var y=t!==t,C=t===null,I=Bt(t),W=t===n;d<_;){var F=Xr((d+_)/2),V=i(e[F]),$=V!==n,oe=V===null,ce=V===V,we=Bt(V);if(y)var he=u||ce;else W?he=ce&&(u||$):C?he=ce&&$&&(u||!oe):I?he=ce&&$&&!oe&&(u||!we):oe||we?he=!1:he=u?V<=t:V<t;he?d=F+1:_=F}return pt(_,le)}function _l(e,t){for(var i=-1,u=e.length,d=0,_=[];++i<u;){var y=e[i],C=t?t(y):y;if(!i||!Zt(C,I)){var I=C;_[d++]=y===0?0:y}}return _}function ml(e){return typeof e=="number"?e:Bt(e)?Ae:+e}function Mt(e){if(typeof e=="string")return e;if(me(e))return qe(e,Mt)+"";if(Bt(e))return jo?jo.call(e):"";var t=e+"";return t=="0"&&1/e==-Ce?"-0":t}function Rn(e,t,i){var u=-1,d=Fr,_=e.length,y=!0,C=[],I=C;if(i)y=!1,d=Ji;else if(_>=l){var W=t?null:vf(e);if(W)return zr(W);y=!1,d=pr,I=new Fn}else I=t?[]:C;e:for(;++u<_;){var F=e[u],V=t?t(F):F;if(F=i||F!==0?F:0,y&&V===V){for(var $=I.length;$--;)if(I[$]===V)continue e;t&&I.push(V),C.push(F)}else d(I,V,i)||(I!==C&&I.push(V),C.push(F))}return C}function v0(e,t){return t=Pn(t,e),e=xl(e,t),e==null||delete e[nn(xt(t))]}function vl(e,t,i,u){return Or(e,t,i(zn(e,t)),u)}function li(e,t,i,u){for(var d=e.length,_=u?d:-1;(u?_--:++_<d)&&t(e[_],_,e););return i?qt(e,u?0:_,u?_+1:d):qt(e,u?_+1:0,u?d:_)}function bl(e,t){var i=e;return i instanceof Ee&&(i=i.value()),Ki(t,function(u,d){return d.func.apply(d.thisArg,kn([u],d.args))},i)}function b0(e,t,i){var u=e.length;if(u<2)return u?Rn(e[0]):[];for(var d=-1,_=R(u);++d<u;)for(var y=e[d],C=-1;++C<u;)C!=d&&(_[d]=wr(_[d]||y,e[C],t,i));return Rn(ct(_,1),t,i)}function yl(e,t,i){for(var u=-1,d=e.length,_=t.length,y={};++u<d;){var C=u<_?t[u]:n;i(y,e[u],C)}return y}function y0(e){return it(e)?e:[]}function w0(e){return typeof e=="function"?e:At}function Pn(e,t){return me(e)?e:T0(e,t)?[e]:jl(Me(e))}var uf=Se;function Ln(e,t,i){var u=e.length;return i=i===n?u:i,!t&&i>=u?e:qt(e,t,i)}var wl=Y9||function(e){return ft.clearTimeout(e)};function Sl(e,t){if(t)return e.slice();var i=e.length,u=Go?Go(i):new e.constructor(i);return e.copy(u),u}function S0(e){var t=new e.constructor(e.byteLength);return new Jr(t).set(new Jr(e)),t}function af(e,t){var i=t?S0(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}function ff(e){var t=new e.constructor(e.source,io.exec(e));return t.lastIndex=e.lastIndex,t}function cf(e){return br?Fe(br.call(e)):{}}function Cl(e,t){var i=t?S0(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}function Ol(e,t){if(e!==t){var i=e!==n,u=e===null,d=e===e,_=Bt(e),y=t!==n,C=t===null,I=t===t,W=Bt(t);if(!C&&!W&&!_&&e>t||_&&y&&I&&!C&&!W||u&&y&&I||!i&&I||!d)return 1;if(!u&&!_&&!W&&e<t||W&&i&&d&&!u&&!_||C&&i&&d||!y&&d||!I)return-1}return 0}function hf(e,t,i){for(var u=-1,d=e.criteria,_=t.criteria,y=d.length,C=i.length;++u<y;){var I=Ol(d[u],_[u]);if(I){if(u>=C)return I;var W=i[u];return I*(W=="desc"?-1:1)}}return e.index-t.index}function El(e,t,i,u){for(var d=-1,_=e.length,y=i.length,C=-1,I=t.length,W=st(_-y,0),F=R(I+W),V=!u;++C<I;)F[C]=t[C];for(;++d<y;)(V||d<_)&&(F[i[d]]=e[d]);for(;W--;)F[C++]=e[d++];return F}function Il(e,t,i,u){for(var d=-1,_=e.length,y=-1,C=i.length,I=-1,W=t.length,F=st(_-C,0),V=R(F+W),$=!u;++d<F;)V[d]=e[d];for(var oe=d;++I<W;)V[oe+I]=t[I];for(;++y<C;)($||d<_)&&(V[oe+i[y]]=e[d++]);return V}function Et(e,t){var i=-1,u=e.length;for(t||(t=R(u));++i<u;)t[i]=e[i];return t}function tn(e,t,i,u){var d=!i;i||(i={});for(var _=-1,y=t.length;++_<y;){var C=t[_],I=u?u(i[C],e[C],C,i,e):n;I===n&&(I=e[C]),d?pn(i,C,I):yr(i,C,I)}return i}function df(e,t){return tn(e,D0(e),t)}function pf(e,t){return tn(e,Nl(e),t)}function si(e,t){return function(i,u){var d=me(i)?v9:Ba,_=t?t():{};return d(i,e,ae(u,2),_)}}function ir(e){return Se(function(t,i){var u=-1,d=i.length,_=d>1?i[d-1]:n,y=d>2?i[2]:n;for(_=e.length>3&&typeof _=="function"?(d--,_):n,y&&yt(i[0],i[1],y)&&(_=d<3?n:_,d=1),t=Fe(t);++u<d;){var C=i[u];C&&e(t,C,u,_)}return t})}function kl(e,t){return function(i,u){if(i==null)return i;if(!It(i))return e(i,u);for(var d=i.length,_=t?d:-1,y=Fe(i);(t?_--:++_<d)&&u(y[_],_,y)!==!1;);return i}}function Al(e){return function(t,i,u){for(var d=-1,_=Fe(t),y=u(t),C=y.length;C--;){var I=y[e?C:++d];if(i(_[I],I,_)===!1)break}return t}}function gf(e,t,i){var u=t&B,d=Er(e);function _(){var y=this&&this!==ft&&this instanceof _?d:e;return y.apply(u?i:this,arguments)}return _}function Dl(e){return function(t){t=Me(t);var i=Xn(t)?Yt(t):n,u=i?i[0]:t.charAt(0),d=i?Ln(i,1).join(""):t.slice(1);return u[e]()+d}}function or(e){return function(t){return Ki(ks(Is(t).replace(i9,"")),e,"")}}function Er(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var i=rr(e.prototype),u=e.apply(i,t);return xe(u)?u:i}}function _f(e,t,i){var u=Er(e);function d(){for(var _=arguments.length,y=R(_),C=_,I=lr(d);C--;)y[C]=arguments[C];var W=_<3&&y[0]!==I&&y[_-1]!==I?[]:An(y,I);if(_-=W.length,_<i)return Ml(e,t,ui,d.placeholder,n,y,W,n,n,i-_);var F=this&&this!==ft&&this instanceof d?u:e;return Pt(F,this,y)}return d}function Tl(e){return function(t,i,u){var d=Fe(t);if(!It(t)){var _=ae(i,3);t=ut(t),i=function(C){return _(d[C],C,d)}}var y=e(t,i,u);return y>-1?d[_?t[y]:y]:n}}function Rl(e){return _n(function(t){var i=t.length,u=i,d=Vt.prototype.thru;for(e&&t.reverse();u--;){var _=t[u];if(typeof _!="function")throw new Ht(a);if(d&&!y&&hi(_)=="wrapper")var y=new Vt([],!0)}for(u=y?u:i;++u<i;){_=t[u];var C=hi(_),I=C=="wrapper"?k0(_):n;I&&R0(I[0])&&I[1]==(G|z|H|fe)&&!I[4].length&&I[9]==1?y=y[hi(I[0])].apply(y,I[3]):y=_.length==1&&R0(_)?y[C]():y.thru(_)}return function(){var W=arguments,F=W[0];if(y&&W.length==1&&me(F))return y.plant(F).value();for(var V=0,$=i?t[V].apply(this,W):F;++V<i;)$=t[V].call(this,$);return $}})}function ui(e,t,i,u,d,_,y,C,I,W){var F=t&G,V=t&B,$=t&L,oe=t&(z|N),ce=t&x,we=$?n:Er(e);function he(){for(var Oe=arguments.length,ke=R(Oe),Ut=Oe;Ut--;)ke[Ut]=arguments[Ut];if(oe)var wt=lr(he),Wt=k9(ke,wt);if(u&&(ke=El(ke,u,d,oe)),_&&(ke=Il(ke,_,y,oe)),Oe-=Wt,oe&&Oe<W){var ot=An(ke,wt);return Ml(e,t,ui,he.placeholder,i,ke,ot,C,I,W-Oe)}var Xt=V?i:this,yn=$?Xt[e]:e;return Oe=ke.length,C?ke=Uf(ke,C):ce&&Oe>1&&ke.reverse(),F&&I<Oe&&(ke.length=I),this&&this!==ft&&this instanceof he&&(yn=we||Er(yn)),yn.apply(Xt,ke)}return he}function Pl(e,t){return function(i,u){return Ga(i,e,t(u),{})}}function ai(e,t){return function(i,u){var d;if(i===n&&u===n)return t;if(i!==n&&(d=i),u!==n){if(d===n)return u;typeof i=="string"||typeof u=="string"?(i=Mt(i),u=Mt(u)):(i=ml(i),u=ml(u)),d=e(i,u)}return d}}function C0(e){return _n(function(t){return t=qe(t,Lt(ae())),Se(function(i){var u=this;return e(t,function(d){return Pt(d,u,i)})})})}function fi(e,t){t=t===n?" ":Mt(t);var i=t.length;if(i<2)return i?_0(t,e):t;var u=_0(t,Zr(e/Qn(t)));return Xn(t)?Ln(Yt(u),0,e).join(""):u.slice(0,e)}function mf(e,t,i,u){var d=t&B,_=Er(e);function y(){for(var C=-1,I=arguments.length,W=-1,F=u.length,V=R(F+I),$=this&&this!==ft&&this instanceof y?_:e;++W<F;)V[W]=u[W];for(;I--;)V[W++]=arguments[++C];return Pt($,d?i:this,V)}return y}function Ll(e){return function(t,i,u){return u&&typeof u!="number"&&yt(t,i,u)&&(i=u=n),t=bn(t),i===n?(i=t,t=0):i=bn(i),u=u===n?t<i?1:-1:bn(u),tf(t,i,u,e)}}function ci(e){return function(t,i){return typeof t=="string"&&typeof i=="string"||(t=Jt(t),i=Jt(i)),e(t,i)}}function Ml(e,t,i,u,d,_,y,C,I,W){var F=t&z,V=F?y:n,$=F?n:y,oe=F?_:n,ce=F?n:_;t|=F?H:U,t&=~(F?U:H),t&Z||(t&=~(B|L));var we=[e,t,d,oe,V,ce,$,C,I,W],he=i.apply(n,we);return R0(e)&&Jl(he,we),he.placeholder=u,Kl(he,e,t)}function O0(e){var t=lt[e];return function(i,u){if(i=Jt(i),u=u==null?0:pt(ye(u),292),u&&Ko(i)){var d=(Me(i)+"e").split("e"),_=t(d[0]+"e"+(+d[1]+u));return d=(Me(_)+"e").split("e"),+(d[0]+"e"+(+d[1]-u))}return t(i)}}var vf=tr&&1/zr(new tr([,-0]))[1]==Ce?function(e){return new tr(e)}:J0;function Bl(e){return function(t){var i=gt(t);return i==dt?e0(t):i==Y?M9(t):I9(t,e(t))}}function gn(e,t,i,u,d,_,y,C){var I=t&L;if(!I&&typeof e!="function")throw new Ht(a);var W=u?u.length:0;if(W||(t&=~(H|U),u=d=n),y=y===n?y:st(ye(y),0),C=C===n?C:ye(C),W-=d?d.length:0,t&U){var F=u,V=d;u=d=n}var $=I?n:k0(e),oe=[e,t,i,u,d,F,V,_,y,C];if($&&Lf(oe,$),e=oe[0],t=oe[1],i=oe[2],u=oe[3],d=oe[4],C=oe[9]=oe[9]===n?I?0:e.length:st(oe[9]-W,0),!C&&t&(z|N)&&(t&=~(z|N)),!t||t==B)var ce=gf(e,t,i);else t==z||t==N?ce=_f(e,t,C):(t==H||t==(B|H))&&!d.length?ce=mf(e,t,i,u):ce=ui.apply(n,oe);var we=$?gl:Jl;return Kl(we(ce,oe),e,t)}function Ul(e,t,i,u){return e===n||Zt(e,er[i])&&!Be.call(u,i)?t:e}function Wl(e,t,i,u,d,_){return xe(e)&&xe(t)&&(_.set(t,e),ii(e,t,n,Wl,_),_.delete(t)),e}function bf(e){return Ar(e)?n:e}function Fl(e,t,i,u,d,_){var y=i&A,C=e.length,I=t.length;if(C!=I&&!(y&&I>C))return!1;var W=_.get(e),F=_.get(t);if(W&&F)return W==t&&F==e;var V=-1,$=!0,oe=i&T?new Fn:n;for(_.set(e,t),_.set(t,e);++V<C;){var ce=e[V],we=t[V];if(u)var he=y?u(we,ce,V,t,e,_):u(ce,we,V,e,t,_);if(he!==n){if(he)continue;$=!1;break}if(oe){if(!Yi(t,function(Oe,ke){if(!pr(oe,ke)&&(ce===Oe||d(ce,Oe,i,u,_)))return oe.push(ke)})){$=!1;break}}else if(!(ce===we||d(ce,we,i,u,_))){$=!1;break}}return _.delete(e),_.delete(t),$}function yf(e,t,i,u,d,_,y){switch(i){case fn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case at:return!(e.byteLength!=t.byteLength||!_(new Jr(e),new Jr(t)));case Tt:case X:case sn:return Zt(+e,+t);case He:return e.name==t.name&&e.message==t.message;case un:case ge:return e==t+"";case dt:var C=e0;case Y:var I=u&A;if(C||(C=zr),e.size!=t.size&&!I)return!1;var W=y.get(e);if(W)return W==t;u|=T,y.set(e,t);var F=Fl(C(e),C(t),u,d,_,y);return y.delete(e),F;case Rt:if(br)return br.call(e)==br.call(t)}return!1}function wf(e,t,i,u,d,_){var y=i&A,C=E0(e),I=C.length,W=E0(t),F=W.length;if(I!=F&&!y)return!1;for(var V=I;V--;){var $=C[V];if(!(y?$ in t:Be.call(t,$)))return!1}var oe=_.get(e),ce=_.get(t);if(oe&&ce)return oe==t&&ce==e;var we=!0;_.set(e,t),_.set(t,e);for(var he=y;++V<I;){$=C[V];var Oe=e[$],ke=t[$];if(u)var Ut=y?u(ke,Oe,$,t,e,_):u(Oe,ke,$,e,t,_);if(!(Ut===n?Oe===ke||d(Oe,ke,i,u,_):Ut)){we=!1;break}he||(he=$=="constructor")}if(we&&!he){var wt=e.constructor,Wt=t.constructor;wt!=Wt&&"constructor"in e&&"constructor"in t&&!(typeof wt=="function"&&wt instanceof wt&&typeof Wt=="function"&&Wt instanceof Wt)&&(we=!1)}return _.delete(e),_.delete(t),we}function _n(e){return L0(ql(e,n,$l),e+"")}function E0(e){return il(e,ut,D0)}function I0(e){return il(e,kt,Nl)}var k0=Qr?function(e){return Qr.get(e)}:J0;function hi(e){for(var t=e.name+"",i=nr[t],u=Be.call(nr,t)?i.length:0;u--;){var d=i[u],_=d.func;if(_==null||_==e)return d.name}return t}function lr(e){var t=Be.call(g,"placeholder")?g:e;return t.placeholder}function ae(){var e=g.iteratee||q0;return e=e===q0?sl:e,arguments.length?e(arguments[0],arguments[1]):e}function di(e,t){var i=e.__data__;return Df(t)?i[typeof t=="string"?"string":"hash"]:i.map}function A0(e){for(var t=ut(e),i=t.length;i--;){var u=t[i],d=e[u];t[i]=[u,d,Vl(d)]}return t}function Hn(e,t){var i=R9(e,t);return ll(i)?i:n}function Sf(e){var t=Be.call(e,Un),i=e[Un];try{e[Un]=n;var u=!0}catch{}var d=qr.call(e);return u&&(t?e[Un]=i:delete e[Un]),d}var D0=n0?function(e){return e==null?[]:(e=Fe(e),In(n0(e),function(t){return xo.call(e,t)}))}:K0,Nl=n0?function(e){for(var t=[];e;)kn(t,D0(e)),e=Kr(e);return t}:K0,gt=bt;(r0&&gt(new r0(new ArrayBuffer(1)))!=fn||_r&&gt(new _r)!=dt||i0&&gt(i0.resolve())!=Mr||tr&&gt(new tr)!=Y||mr&&gt(new mr)!=vt)&&(gt=function(e){var t=bt(e),i=t==Ot?e.constructor:n,u=i?Vn(i):"";if(u)switch(u){case ra:return fn;case ia:return dt;case oa:return Mr;case la:return Y;case sa:return vt}return t});function Cf(e,t,i){for(var u=-1,d=i.length;++u<d;){var _=i[u],y=_.size;switch(_.type){case"drop":e+=y;break;case"dropRight":t-=y;break;case"take":t=pt(t,e+y);break;case"takeRight":e=st(e,t-y);break}}return{start:e,end:t}}function Of(e){var t=e.match(Du);return t?t[1].split(Tu):[]}function zl(e,t,i){t=Pn(t,e);for(var u=-1,d=t.length,_=!1;++u<d;){var y=nn(t[u]);if(!(_=e!=null&&i(e,y)))break;e=e[y]}return _||++u!=d?_:(d=e==null?0:e.length,!!d&&yi(d)&&mn(y,d)&&(me(e)||Gn(e)))}function Ef(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&Be.call(e,"index")&&(i.index=e.index,i.input=e.input),i}function Hl(e){return typeof e.constructor=="function"&&!Ir(e)?rr(Kr(e)):{}}function If(e,t,i){var u=e.constructor;switch(t){case at:return S0(e);case Tt:case X:return new u(+e);case fn:return af(e,i);case cn:case Di:case Ti:case Ri:case Pi:case Li:case Mi:case Bi:case Ui:return Cl(e,i);case dt:return new u;case sn:case ge:return new u(e);case un:return ff(e);case Y:return new u;case Rt:return cf(e)}}function kf(e,t){var i=t.length;if(!i)return e;var u=i-1;return t[u]=(i>1?"& ":"")+t[u],t=t.join(i>2?", ":" "),e.replace(Au,`{
/* [wrapped with `+t+`] */
`)}function Af(e){return me(e)||Gn(e)||!!(Jo&&e&&e[Jo])}function mn(e,t){var i=typeof e;return t=t??Ne,!!t&&(i=="number"||i!="symbol"&&Nu.test(e))&&e>-1&&e%1==0&&e<t}function yt(e,t,i){if(!xe(i))return!1;var u=typeof t;return(u=="number"?It(i)&&mn(t,i.length):u=="string"&&t in i)?Zt(i[t],e):!1}function T0(e,t){if(me(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||Bt(e)?!0:Ou.test(e)||!Cu.test(e)||t!=null&&e in Fe(t)}function Df(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function R0(e){var t=hi(e),i=g[t];if(typeof i!="function"||!(t in Ee.prototype))return!1;if(e===i)return!0;var u=k0(i);return!!u&&e===u[0]}function Tf(e){return!!Vo&&Vo in e}var Rf=Vr?vn:Y0;function Ir(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||er;return e===i}function Vl(e){return e===e&&!xe(e)}function Gl(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==n||e in Fe(i))}}function Pf(e){var t=vi(e,function(u){return i.size===m&&i.clear(),u}),i=t.cache;return t}function Lf(e,t){var i=e[1],u=t[1],d=i|u,_=d<(B|L|G),y=u==G&&i==z||u==G&&i==fe&&e[7].length<=t[8]||u==(G|fe)&&t[7].length<=t[8]&&i==z;if(!(_||y))return e;u&B&&(e[2]=t[2],d|=i&B?0:Z);var C=t[3];if(C){var I=e[3];e[3]=I?El(I,C,t[4]):C,e[4]=I?An(e[3],v):t[4]}return C=t[5],C&&(I=e[5],e[5]=I?Il(I,C,t[6]):C,e[6]=I?An(e[5],v):t[6]),C=t[7],C&&(e[7]=C),u&G&&(e[8]=e[8]==null?t[8]:pt(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=d,e}function Mf(e){var t=[];if(e!=null)for(var i in Fe(e))t.push(i);return t}function Bf(e){return qr.call(e)}function ql(e,t,i){return t=st(t===n?e.length-1:t,0),function(){for(var u=arguments,d=-1,_=st(u.length-t,0),y=R(_);++d<_;)y[d]=u[t+d];d=-1;for(var C=R(t+1);++d<t;)C[d]=u[d];return C[t]=i(y),Pt(e,this,C)}}function xl(e,t){return t.length<2?e:zn(e,qt(t,0,-1))}function Uf(e,t){for(var i=e.length,u=pt(t.length,i),d=Et(e);u--;){var _=t[u];e[u]=mn(_,i)?d[_]:n}return e}function P0(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Jl=Yl(gl),kr=Z9||function(e,t){return ft.setTimeout(e,t)},L0=Yl(of);function Kl(e,t,i){var u=t+"";return L0(e,kf(u,Wf(Of(u),i)))}function Yl(e){var t=0,i=0;return function(){var u=ea(),d=ve-(u-i);if(i=u,d>0){if(++t>=pe)return arguments[0]}else t=0;return e.apply(n,arguments)}}function pi(e,t){var i=-1,u=e.length,d=u-1;for(t=t===n?u:t;++i<t;){var _=g0(i,d),y=e[_];e[_]=e[i],e[i]=y}return e.length=t,e}var jl=Pf(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Eu,function(i,u,d,_){t.push(d?_.replace(Lu,"$1"):u||i)}),t});function nn(e){if(typeof e=="string"||Bt(e))return e;var t=e+"";return t=="0"&&1/e==-Ce?"-0":t}function Vn(e){if(e!=null){try{return Gr.call(e)}catch{}try{return e+""}catch{}}return""}function Wf(e,t){return zt(Ue,function(i){var u="_."+i[0];t&i[1]&&!Fr(e,u)&&e.push(u)}),e.sort()}function Zl(e){if(e instanceof Ee)return e.clone();var t=new Vt(e.__wrapped__,e.__chain__);return t.__actions__=Et(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ff(e,t,i){(i?yt(e,t,i):t===n)?t=1:t=st(ye(t),0);var u=e==null?0:e.length;if(!u||t<1)return[];for(var d=0,_=0,y=R(Zr(u/t));d<u;)y[_++]=qt(e,d,d+=t);return y}function Nf(e){for(var t=-1,i=e==null?0:e.length,u=0,d=[];++t<i;){var _=e[t];_&&(d[u++]=_)}return d}function zf(){var e=arguments.length;if(!e)return[];for(var t=R(e-1),i=arguments[0],u=e;u--;)t[u-1]=arguments[u];return kn(me(i)?Et(i):[i],ct(t,1))}var Hf=Se(function(e,t){return it(e)?wr(e,ct(t,1,it,!0)):[]}),Vf=Se(function(e,t){var i=xt(t);return it(i)&&(i=n),it(e)?wr(e,ct(t,1,it,!0),ae(i,2)):[]}),Gf=Se(function(e,t){var i=xt(t);return it(i)&&(i=n),it(e)?wr(e,ct(t,1,it,!0),n,i):[]});function qf(e,t,i){var u=e==null?0:e.length;return u?(t=i||t===n?1:ye(t),qt(e,t<0?0:t,u)):[]}function xf(e,t,i){var u=e==null?0:e.length;return u?(t=i||t===n?1:ye(t),t=u-t,qt(e,0,t<0?0:t)):[]}function Jf(e,t){return e&&e.length?li(e,ae(t,3),!0,!0):[]}function Kf(e,t){return e&&e.length?li(e,ae(t,3),!0):[]}function Yf(e,t,i,u){var d=e==null?0:e.length;return d?(i&&typeof i!="number"&&yt(e,t,i)&&(i=0,u=d),Na(e,t,i,u)):[]}function Xl(e,t,i){var u=e==null?0:e.length;if(!u)return-1;var d=i==null?0:ye(i);return d<0&&(d=st(u+d,0)),Nr(e,ae(t,3),d)}function Ql(e,t,i){var u=e==null?0:e.length;if(!u)return-1;var d=u-1;return i!==n&&(d=ye(i),d=i<0?st(u+d,0):pt(d,u-1)),Nr(e,ae(t,3),d,!0)}function $l(e){var t=e==null?0:e.length;return t?ct(e,1):[]}function jf(e){var t=e==null?0:e.length;return t?ct(e,Ce):[]}function Zf(e,t){var i=e==null?0:e.length;return i?(t=t===n?1:ye(t),ct(e,t)):[]}function Xf(e){for(var t=-1,i=e==null?0:e.length,u={};++t<i;){var d=e[t];u[d[0]]=d[1]}return u}function es(e){return e&&e.length?e[0]:n}function Qf(e,t,i){var u=e==null?0:e.length;if(!u)return-1;var d=i==null?0:ye(i);return d<0&&(d=st(u+d,0)),Zn(e,t,d)}function $f(e){var t=e==null?0:e.length;return t?qt(e,0,-1):[]}var ec=Se(function(e){var t=qe(e,y0);return t.length&&t[0]===e[0]?f0(t):[]}),tc=Se(function(e){var t=xt(e),i=qe(e,y0);return t===xt(i)?t=n:i.pop(),i.length&&i[0]===e[0]?f0(i,ae(t,2)):[]}),nc=Se(function(e){var t=xt(e),i=qe(e,y0);return t=typeof t=="function"?t:n,t&&i.pop(),i.length&&i[0]===e[0]?f0(i,n,t):[]});function rc(e,t){return e==null?"":Q9.call(e,t)}function xt(e){var t=e==null?0:e.length;return t?e[t-1]:n}function ic(e,t,i){var u=e==null?0:e.length;if(!u)return-1;var d=u;return i!==n&&(d=ye(i),d=d<0?st(u+d,0):pt(d,u-1)),t===t?U9(e,t,d):Nr(e,Mo,d,!0)}function oc(e,t){return e&&e.length?cl(e,ye(t)):n}var lc=Se(ts);function ts(e,t){return e&&e.length&&t&&t.length?p0(e,t):e}function sc(e,t,i){return e&&e.length&&t&&t.length?p0(e,t,ae(i,2)):e}function uc(e,t,i){return e&&e.length&&t&&t.length?p0(e,t,n,i):e}var ac=_n(function(e,t){var i=e==null?0:e.length,u=l0(e,t);return pl(e,qe(t,function(d){return mn(d,i)?+d:d}).sort(Ol)),u});function fc(e,t){var i=[];if(!(e&&e.length))return i;var u=-1,d=[],_=e.length;for(t=ae(t,3);++u<_;){var y=e[u];t(y,u,e)&&(i.push(y),d.push(u))}return pl(e,d),i}function M0(e){return e==null?e:na.call(e)}function cc(e,t,i){var u=e==null?0:e.length;return u?(i&&typeof i!="number"&&yt(e,t,i)?(t=0,i=u):(t=t==null?0:ye(t),i=i===n?u:ye(i)),qt(e,t,i)):[]}function hc(e,t){return oi(e,t)}function dc(e,t,i){return m0(e,t,ae(i,2))}function gc(e,t){var i=e==null?0:e.length;if(i){var u=oi(e,t);if(u<i&&Zt(e[u],t))return u}return-1}function _c(e,t){return oi(e,t,!0)}function mc(e,t,i){return m0(e,t,ae(i,2),!0)}function vc(e,t){var i=e==null?0:e.length;if(i){var u=oi(e,t,!0)-1;if(Zt(e[u],t))return u}return-1}function bc(e){return e&&e.length?_l(e):[]}function yc(e,t){return e&&e.length?_l(e,ae(t,2)):[]}function wc(e){var t=e==null?0:e.length;return t?qt(e,1,t):[]}function Sc(e,t,i){return e&&e.length?(t=i||t===n?1:ye(t),qt(e,0,t<0?0:t)):[]}function Cc(e,t,i){var u=e==null?0:e.length;return u?(t=i||t===n?1:ye(t),t=u-t,qt(e,t<0?0:t,u)):[]}function Oc(e,t){return e&&e.length?li(e,ae(t,3),!1,!0):[]}function Ec(e,t){return e&&e.length?li(e,ae(t,3)):[]}var Ic=Se(function(e){return Rn(ct(e,1,it,!0))}),kc=Se(function(e){var t=xt(e);return it(t)&&(t=n),Rn(ct(e,1,it,!0),ae(t,2))}),Ac=Se(function(e){var t=xt(e);return t=typeof t=="function"?t:n,Rn(ct(e,1,it,!0),n,t)});function Dc(e){return e&&e.length?Rn(e):[]}function Tc(e,t){return e&&e.length?Rn(e,ae(t,2)):[]}function Rc(e,t){return t=typeof t=="function"?t:n,e&&e.length?Rn(e,n,t):[]}function B0(e){if(!(e&&e.length))return[];var t=0;return e=In(e,function(i){if(it(i))return t=st(i.length,t),!0}),Qi(t,function(i){return qe(e,ji(i))})}function ns(e,t){if(!(e&&e.length))return[];var i=B0(e);return t==null?i:qe(i,function(u){return Pt(t,n,u)})}var Pc=Se(function(e,t){return it(e)?wr(e,t):[]}),Lc=Se(function(e){return b0(In(e,it))}),Mc=Se(function(e){var t=xt(e);return it(t)&&(t=n),b0(In(e,it),ae(t,2))}),Bc=Se(function(e){var t=xt(e);return t=typeof t=="function"?t:n,b0(In(e,it),n,t)}),Uc=Se(B0);function Wc(e,t){return yl(e||[],t||[],yr)}function Fc(e,t){return yl(e||[],t||[],Or)}var Nc=Se(function(e){var t=e.length,i=t>1?e[t-1]:n;return i=typeof i=="function"?(e.pop(),i):n,ns(e,i)});function rs(e){var t=g(e);return t.__chain__=!0,t}function zc(e,t){return t(e),e}function gi(e,t){return t(e)}var Hc=_n(function(e){var t=e.length,i=t?e[0]:0,u=this.__wrapped__,d=function(_){return l0(_,e)};return t>1||this.__actions__.length||!(u instanceof Ee)||!mn(i)?this.thru(d):(u=u.slice(i,+i+(t?1:0)),u.__actions__.push({func:gi,args:[d],thisArg:n}),new Vt(u,this.__chain__).thru(function(_){return t&&!_.length&&_.push(n),_}))});function Vc(){return rs(this)}function Gc(){return new Vt(this.value(),this.__chain__)}function qc(){this.__values__===n&&(this.__values__=ms(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function xc(){return this}function Jc(e){for(var t,i=this;i instanceof ei;){var u=Zl(i);u.__index__=0,u.__values__=n,t?d.__wrapped__=u:t=u;var d=u;i=i.__wrapped__}return d.__wrapped__=e,t}function Kc(){var e=this.__wrapped__;if(e instanceof Ee){var t=e;return this.__actions__.length&&(t=new Ee(this)),t=t.reverse(),t.__actions__.push({func:gi,args:[M0],thisArg:n}),new Vt(t,this.__chain__)}return this.thru(M0)}function Yc(){return bl(this.__wrapped__,this.__actions__)}var jc=si(function(e,t,i){Be.call(e,i)?++e[i]:pn(e,i,1)});function Zc(e,t,i){var u=me(e)?Po:Fa;return i&&yt(e,t,i)&&(t=n),u(e,ae(t,3))}function Xc(e,t){var i=me(e)?In:nl;return i(e,ae(t,3))}var Qc=Tl(Xl),$c=Tl(Ql);function eh(e,t){return ct(_i(e,t),1)}function th(e,t){return ct(_i(e,t),Ce)}function nh(e,t,i){return i=i===n?1:ye(i),ct(_i(e,t),i)}function is(e,t){var i=me(e)?zt:Tn;return i(e,ae(t,3))}function os(e,t){var i=me(e)?b9:tl;return i(e,ae(t,3))}var rh=si(function(e,t,i){Be.call(e,i)?e[i].push(t):pn(e,i,[t])});function ih(e,t,i,u){e=It(e)?e:ur(e),i=i&&!u?ye(i):0;var d=e.length;return i<0&&(i=st(d+i,0)),wi(e)?i<=d&&e.indexOf(t,i)>-1:!!d&&Zn(e,t,i)>-1}var oh=Se(function(e,t,i){var u=-1,d=typeof t=="function",_=It(e)?R(e.length):[];return Tn(e,function(y){_[++u]=d?Pt(t,y,i):Sr(y,t,i)}),_}),lh=si(function(e,t,i){pn(e,i,t)});function _i(e,t){var i=me(e)?qe:ul;return i(e,ae(t,3))}function sh(e,t,i,u){return e==null?[]:(me(t)||(t=t==null?[]:[t]),i=u?n:i,me(i)||(i=i==null?[]:[i]),hl(e,t,i))}var uh=si(function(e,t,i){e[i?0:1].push(t)},function(){return[[],[]]});function ah(e,t,i){var u=me(e)?Ki:Uo,d=arguments.length<3;return u(e,ae(t,4),i,d,Tn)}function fh(e,t,i){var u=me(e)?y9:Uo,d=arguments.length<3;return u(e,ae(t,4),i,d,tl)}function ch(e,t){var i=me(e)?In:nl;return i(e,bi(ae(t,3)))}function hh(e){var t=me(e)?Xo:nf;return t(e)}function dh(e,t,i){(i?yt(e,t,i):t===n)?t=1:t=ye(t);var u=me(e)?La:rf;return u(e,t)}function ph(e){var t=me(e)?Ma:lf;return t(e)}function gh(e){if(e==null)return 0;if(It(e))return wi(e)?Qn(e):e.length;var t=gt(e);return t==dt||t==Y?e.size:h0(e).length}function _h(e,t,i){var u=me(e)?Yi:sf;return i&&yt(e,t,i)&&(t=n),u(e,ae(t,3))}var mh=Se(function(e,t){if(e==null)return[];var i=t.length;return i>1&&yt(e,t[0],t[1])?t=[]:i>2&&yt(t[0],t[1],t[2])&&(t=[t[0]]),hl(e,ct(t,1),[])}),mi=j9||function(){return ft.Date.now()};function vh(e,t){if(typeof t!="function")throw new Ht(a);return e=ye(e),function(){if(--e<1)return t.apply(this,arguments)}}function ls(e,t,i){return t=i?n:t,t=e&&t==null?e.length:t,gn(e,G,n,n,n,n,t)}function ss(e,t){var i;if(typeof t!="function")throw new Ht(a);return e=ye(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var U0=Se(function(e,t,i){var u=B;if(i.length){var d=An(i,lr(U0));u|=H}return gn(e,u,t,i,d)}),us=Se(function(e,t,i){var u=B|L;if(i.length){var d=An(i,lr(us));u|=H}return gn(t,u,e,i,d)});function as(e,t,i){t=i?n:t;var u=gn(e,z,n,n,n,n,n,t);return u.placeholder=as.placeholder,u}function fs(e,t,i){t=i?n:t;var u=gn(e,N,n,n,n,n,n,t);return u.placeholder=fs.placeholder,u}function cs(e,t,i){var u,d,_,y,C,I,W=0,F=!1,V=!1,$=!0;if(typeof e!="function")throw new Ht(a);t=Jt(t)||0,xe(i)&&(F=!!i.leading,V="maxWait"in i,_=V?st(Jt(i.maxWait)||0,t):_,$="trailing"in i?!!i.trailing:$);function oe(ot){var Xt=u,yn=d;return u=d=n,W=ot,y=e.apply(yn,Xt),y}function ce(ot){return W=ot,C=kr(Oe,t),F?oe(ot):y}function we(ot){var Xt=ot-I,yn=ot-W,Ts=t-Xt;return V?pt(Ts,_-yn):Ts}function he(ot){var Xt=ot-I,yn=ot-W;return I===n||Xt>=t||Xt<0||V&&yn>=_}function Oe(){var ot=mi();if(he(ot))return ke(ot);C=kr(Oe,we(ot))}function ke(ot){return C=n,$&&u?oe(ot):(u=d=n,y)}function Ut(){C!==n&&wl(C),W=0,u=I=d=C=n}function wt(){return C===n?y:ke(mi())}function Wt(){var ot=mi(),Xt=he(ot);if(u=arguments,d=this,I=ot,Xt){if(C===n)return ce(I);if(V)return wl(C),C=kr(Oe,t),oe(I)}return C===n&&(C=kr(Oe,t)),y}return Wt.cancel=Ut,Wt.flush=wt,Wt}var bh=Se(function(e,t){return el(e,1,t)}),yh=Se(function(e,t,i){return el(e,Jt(t)||0,i)});function wh(e){return gn(e,x)}function vi(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Ht(a);var i=function(){var u=arguments,d=t?t.apply(this,u):u[0],_=i.cache;if(_.has(d))return _.get(d);var y=e.apply(this,u);return i.cache=_.set(d,y)||_,y};return i.cache=new(vi.Cache||dn),i}vi.Cache=dn;function bi(e){if(typeof e!="function")throw new Ht(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Sh(e){return ss(2,e)}var Ch=uf(function(e,t){t=t.length==1&&me(t[0])?qe(t[0],Lt(ae())):qe(ct(t,1),Lt(ae()));var i=t.length;return Se(function(u){for(var d=-1,_=pt(u.length,i);++d<_;)u[d]=t[d].call(this,u[d]);return Pt(e,this,u)})}),W0=Se(function(e,t){var i=An(t,lr(W0));return gn(e,H,n,t,i)}),hs=Se(function(e,t){var i=An(t,lr(hs));return gn(e,U,n,t,i)}),Oh=_n(function(e,t){return gn(e,fe,n,n,n,t)});function Eh(e,t){if(typeof e!="function")throw new Ht(a);return t=t===n?t:ye(t),Se(e,t)}function Ih(e,t){if(typeof e!="function")throw new Ht(a);return t=t==null?0:st(ye(t),0),Se(function(i){var u=i[t],d=Ln(i,0,t);return u&&kn(d,u),Pt(e,this,d)})}function kh(e,t,i){var u=!0,d=!0;if(typeof e!="function")throw new Ht(a);return xe(i)&&(u="leading"in i?!!i.leading:u,d="trailing"in i?!!i.trailing:d),cs(e,t,{leading:u,maxWait:t,trailing:d})}function Ah(e){return ls(e,1)}function Dh(e,t){return W0(w0(t),e)}function Th(){if(!arguments.length)return[];var e=arguments[0];return me(e)?e:[e]}function Rh(e){return Gt(e,w)}function Ph(e,t){return t=typeof t=="function"?t:n,Gt(e,w,t)}function Lh(e){return Gt(e,p|w)}function Mh(e,t){return t=typeof t=="function"?t:n,Gt(e,p|w,t)}function Bh(e,t){return t==null||$o(e,t,ut(t))}function Zt(e,t){return e===t||e!==e&&t!==t}var Uh=ci(a0),Wh=ci(function(e,t){return e>=t}),Gn=ol(function(){return arguments}())?ol:function(e){return Ke(e)&&Be.call(e,"callee")&&!xo.call(e,"callee")},me=R.isArray,Fh=Io?Lt(Io):qa;function It(e){return e!=null&&yi(e.length)&&!vn(e)}function it(e){return Ke(e)&&It(e)}function Nh(e){return e===!0||e===!1||Ke(e)&&bt(e)==Tt}var Mn=X9||Y0,zh=ko?Lt(ko):xa;function Hh(e){return Ke(e)&&e.nodeType===1&&!Ar(e)}function Vh(e){if(e==null)return!0;if(It(e)&&(me(e)||typeof e=="string"||typeof e.splice=="function"||Mn(e)||sr(e)||Gn(e)))return!e.length;var t=gt(e);if(t==dt||t==Y)return!e.size;if(Ir(e))return!h0(e).length;for(var i in e)if(Be.call(e,i))return!1;return!0}function Gh(e,t){return Cr(e,t)}function qh(e,t,i){i=typeof i=="function"?i:n;var u=i?i(e,t):n;return u===n?Cr(e,t,n,i):!!u}function F0(e){if(!Ke(e))return!1;var t=bt(e);return t==He||t==On||typeof e.message=="string"&&typeof e.name=="string"&&!Ar(e)}function xh(e){return typeof e=="number"&&Ko(e)}function vn(e){if(!xe(e))return!1;var t=bt(e);return t==Kt||t==Lr||t==Ft||t==Ai}function ds(e){return typeof e=="number"&&e==ye(e)}function yi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ne}function xe(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Ke(e){return e!=null&&typeof e=="object"}var ps=Ao?Lt(Ao):Ka;function Jh(e,t){return e===t||c0(e,t,A0(t))}function Kh(e,t,i){return i=typeof i=="function"?i:n,c0(e,t,A0(t),i)}function Yh(e){return gs(e)&&e!=+e}function jh(e){if(Rf(e))throw new _e(c);return ll(e)}function Zh(e){return e===null}function Xh(e){return e==null}function gs(e){return typeof e=="number"||Ke(e)&&bt(e)==sn}function Ar(e){if(!Ke(e)||bt(e)!=Ot)return!1;var t=Kr(e);if(t===null)return!0;var i=Be.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&Gr.call(i)==x9}var N0=Do?Lt(Do):Ya;function Qh(e){return ds(e)&&e>=-Ne&&e<=Ne}var _s=To?Lt(To):ja;function wi(e){return typeof e=="string"||!me(e)&&Ke(e)&&bt(e)==ge}function Bt(e){return typeof e=="symbol"||Ke(e)&&bt(e)==Rt}var sr=Ro?Lt(Ro):Za;function $h(e){return e===n}function ed(e){return Ke(e)&&gt(e)==vt}function td(e){return Ke(e)&&bt(e)==an}var nd=ci(d0),rd=ci(function(e,t){return e<=t});function ms(e){if(!e)return[];if(It(e))return wi(e)?Yt(e):Et(e);if(gr&&e[gr])return L9(e[gr]());var t=gt(e),i=t==dt?e0:t==Y?zr:ur;return i(e)}function bn(e){if(!e)return e===0?e:0;if(e=Jt(e),e===Ce||e===-Ce){var t=e<0?-1:1;return t*rt}return e===e?e:0}function ye(e){var t=bn(e),i=t%1;return t===t?i?t-i:t:0}function vs(e){return e?Nn(ye(e),0,be):0}function Jt(e){if(typeof e=="number")return e;if(Bt(e))return Ae;if(xe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=xe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Wo(e);var i=Uu.test(e);return i||Fu.test(e)?_9(e.slice(2),i?2:8):Bu.test(e)?Ae:+e}function bs(e){return tn(e,kt(e))}function id(e){return e?Nn(ye(e),-Ne,Ne):e===0?e:0}function Me(e){return e==null?"":Mt(e)}var od=ir(function(e,t){if(Ir(t)||It(t)){tn(t,ut(t),e);return}for(var i in t)Be.call(t,i)&&yr(e,i,t[i])}),ys=ir(function(e,t){tn(t,kt(t),e)}),Si=ir(function(e,t,i,u){tn(t,kt(t),e,u)}),ld=ir(function(e,t,i,u){tn(t,ut(t),e,u)}),sd=_n(l0);function ud(e,t){var i=rr(e);return t==null?i:Qo(i,t)}var ad=Se(function(e,t){e=Fe(e);var i=-1,u=t.length,d=u>2?t[2]:n;for(d&&yt(t[0],t[1],d)&&(u=1);++i<u;)for(var _=t[i],y=kt(_),C=-1,I=y.length;++C<I;){var W=y[C],F=e[W];(F===n||Zt(F,er[W])&&!Be.call(e,W))&&(e[W]=_[W])}return e}),fd=Se(function(e){return e.push(n,Wl),Pt(ws,n,e)});function cd(e,t){return Lo(e,ae(t,3),en)}function hd(e,t){return Lo(e,ae(t,3),u0)}function dd(e,t){return e==null?e:s0(e,ae(t,3),kt)}function pd(e,t){return e==null?e:rl(e,ae(t,3),kt)}function gd(e,t){return e&&en(e,ae(t,3))}function _d(e,t){return e&&u0(e,ae(t,3))}function md(e){return e==null?[]:ri(e,ut(e))}function vd(e){return e==null?[]:ri(e,kt(e))}function z0(e,t,i){var u=e==null?n:zn(e,t);return u===n?i:u}function bd(e,t){return e!=null&&zl(e,t,za)}function H0(e,t){return e!=null&&zl(e,t,Ha)}var yd=Pl(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=qr.call(t)),e[t]=i},G0(At)),wd=Pl(function(e,t,i){t!=null&&typeof t.toString!="function"&&(t=qr.call(t)),Be.call(e,t)?e[t].push(i):e[t]=[i]},ae),Sd=Se(Sr);function ut(e){return It(e)?Zo(e):h0(e)}function kt(e){return It(e)?Zo(e,!0):Xa(e)}function Cd(e,t){var i={};return t=ae(t,3),en(e,function(u,d,_){pn(i,t(u,d,_),u)}),i}function Od(e,t){var i={};return t=ae(t,3),en(e,function(u,d,_){pn(i,d,t(u,d,_))}),i}var Ed=ir(function(e,t,i){ii(e,t,i)}),ws=ir(function(e,t,i,u){ii(e,t,i,u)}),Id=_n(function(e,t){var i={};if(e==null)return i;var u=!1;t=qe(t,function(_){return _=Pn(_,e),u||(u=_.length>1),_}),tn(e,I0(e),i),u&&(i=Gt(i,p|b|w,bf));for(var d=t.length;d--;)v0(i,t[d]);return i});function kd(e,t){return Ss(e,bi(ae(t)))}var Ad=_n(function(e,t){return e==null?{}:$a(e,t)});function Ss(e,t){if(e==null)return{};var i=qe(I0(e),function(u){return[u]});return t=ae(t),dl(e,i,function(u,d){return t(u,d[0])})}function Dd(e,t,i){t=Pn(t,e);var u=-1,d=t.length;for(d||(d=1,e=n);++u<d;){var _=e==null?n:e[nn(t[u])];_===n&&(u=d,_=i),e=vn(_)?_.call(e):_}return e}function Td(e,t,i){return e==null?e:Or(e,t,i)}function Rd(e,t,i,u){return u=typeof u=="function"?u:n,e==null?e:Or(e,t,i,u)}var Cs=Bl(ut),Os=Bl(kt);function Pd(e,t,i){var u=me(e),d=u||Mn(e)||sr(e);if(t=ae(t,4),i==null){var _=e&&e.constructor;d?i=u?new _:[]:xe(e)?i=vn(_)?rr(Kr(e)):{}:i={}}return(d?zt:en)(e,function(y,C,I){return t(i,y,C,I)}),i}function Ld(e,t){return e==null?!0:v0(e,t)}function Md(e,t,i){return e==null?e:vl(e,t,w0(i))}function Bd(e,t,i,u){return u=typeof u=="function"?u:n,e==null?e:vl(e,t,w0(i),u)}function ur(e){return e==null?[]:$i(e,ut(e))}function Ud(e){return e==null?[]:$i(e,kt(e))}function Wd(e,t,i){return i===n&&(i=t,t=n),i!==n&&(i=Jt(i),i=i===i?i:0),t!==n&&(t=Jt(t),t=t===t?t:0),Nn(Jt(e),t,i)}function Fd(e,t,i){return t=bn(t),i===n?(i=t,t=0):i=bn(i),e=Jt(e),Va(e,t,i)}function Nd(e,t,i){if(i&&typeof i!="boolean"&&yt(e,t,i)&&(t=i=n),i===n&&(typeof t=="boolean"?(i=t,t=n):typeof e=="boolean"&&(i=e,e=n)),e===n&&t===n?(e=0,t=1):(e=bn(e),t===n?(t=e,e=0):t=bn(t)),e>t){var u=e;e=t,t=u}if(i||e%1||t%1){var d=Yo();return pt(e+d*(t-e+g9("1e-"+((d+"").length-1))),t)}return g0(e,t)}var zd=or(function(e,t,i){return t=t.toLowerCase(),e+(i?Es(t):t)});function Es(e){return V0(Me(e).toLowerCase())}function Is(e){return e=Me(e),e&&e.replace(zu,A9).replace(o9,"")}function Hd(e,t,i){e=Me(e),t=Mt(t);var u=e.length;i=i===n?u:Nn(ye(i),0,u);var d=i;return i-=t.length,i>=0&&e.slice(i,d)==t}function Vd(e){return e=Me(e),e&&yu.test(e)?e.replace(no,D9):e}function Gd(e){return e=Me(e),e&&Iu.test(e)?e.replace(Wi,"\\$&"):e}var qd=or(function(e,t,i){return e+(i?"-":"")+t.toLowerCase()}),xd=or(function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}),Jd=Dl("toLowerCase");function Kd(e,t,i){e=Me(e),t=ye(t);var u=t?Qn(e):0;if(!t||u>=t)return e;var d=(t-u)/2;return fi(Xr(d),i)+e+fi(Zr(d),i)}function Yd(e,t,i){e=Me(e),t=ye(t);var u=t?Qn(e):0;return t&&u<t?e+fi(t-u,i):e}function jd(e,t,i){e=Me(e),t=ye(t);var u=t?Qn(e):0;return t&&u<t?fi(t-u,i)+e:e}function Zd(e,t,i){return i||t==null?t=0:t&&(t=+t),ta(Me(e).replace(Fi,""),t||0)}function Xd(e,t,i){return(i?yt(e,t,i):t===n)?t=1:t=ye(t),_0(Me(e),t)}function Qd(){var e=arguments,t=Me(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var $d=or(function(e,t,i){return e+(i?"_":"")+t.toLowerCase()});function ep(e,t,i){return i&&typeof i!="number"&&yt(e,t,i)&&(t=i=n),i=i===n?be:i>>>0,i?(e=Me(e),e&&(typeof t=="string"||t!=null&&!N0(t))&&(t=Mt(t),!t&&Xn(e))?Ln(Yt(e),0,i):e.split(t,i)):[]}var tp=or(function(e,t,i){return e+(i?" ":"")+V0(t)});function np(e,t,i){return e=Me(e),i=i==null?0:Nn(ye(i),0,e.length),t=Mt(t),e.slice(i,i+t.length)==t}function rp(e,t,i){var u=g.templateSettings;i&&yt(e,t,i)&&(t=n),e=Me(e),t=Si({},t,u,Ul);var d=Si({},t.imports,u.imports,Ul),_=ut(d),y=$i(d,_),C,I,W=0,F=t.interpolate||Br,V="__p += '",$=t0((t.escape||Br).source+"|"+F.source+"|"+(F===ro?Mu:Br).source+"|"+(t.evaluate||Br).source+"|$","g"),oe="//# sourceURL="+(Be.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++f9+"]")+`
`;e.replace($,function(he,Oe,ke,Ut,wt,Wt){return ke||(ke=Ut),V+=e.slice(W,Wt).replace(Hu,T9),Oe&&(C=!0,V+=`' +
__e(`+Oe+`) +
'`),wt&&(I=!0,V+=`';
`+wt+`;
__p += '`),ke&&(V+=`' +
((__t = (`+ke+`)) == null ? '' : __t) +
'`),W=Wt+he.length,he}),V+=`';
`;var ce=Be.call(t,"variable")&&t.variable;if(!ce)V=`with (obj) {
`+V+`
}
`;else if(Pu.test(ce))throw new _e(h);V=(I?V.replace(_u,""):V).replace(mu,"$1").replace(vu,"$1;"),V="function("+(ce||"obj")+`) {
`+(ce?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(C?", __e = _.escape":"")+(I?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+V+`return __p
}`;var we=As(function(){return Pe(_,oe+"return "+V).apply(n,y)});if(we.source=V,F0(we))throw we;return we}function ip(e){return Me(e).toLowerCase()}function op(e){return Me(e).toUpperCase()}function lp(e,t,i){if(e=Me(e),e&&(i||t===n))return Wo(e);if(!e||!(t=Mt(t)))return e;var u=Yt(e),d=Yt(t),_=Fo(u,d),y=No(u,d)+1;return Ln(u,_,y).join("")}function sp(e,t,i){if(e=Me(e),e&&(i||t===n))return e.slice(0,Ho(e)+1);if(!e||!(t=Mt(t)))return e;var u=Yt(e),d=No(u,Yt(t))+1;return Ln(u,0,d).join("")}function up(e,t,i){if(e=Me(e),e&&(i||t===n))return e.replace(Fi,"");if(!e||!(t=Mt(t)))return e;var u=Yt(e),d=Fo(u,Yt(t));return Ln(u,d).join("")}function ap(e,t){var i=D,u=ee;if(xe(t)){var d="separator"in t?t.separator:d;i="length"in t?ye(t.length):i,u="omission"in t?Mt(t.omission):u}e=Me(e);var _=e.length;if(Xn(e)){var y=Yt(e);_=y.length}if(i>=_)return e;var C=i-Qn(u);if(C<1)return u;var I=y?Ln(y,0,C).join(""):e.slice(0,C);if(d===n)return I+u;if(y&&(C+=I.length-C),N0(d)){if(e.slice(C).search(d)){var W,F=I;for(d.global||(d=t0(d.source,Me(io.exec(d))+"g")),d.lastIndex=0;W=d.exec(F);)var V=W.index;I=I.slice(0,V===n?C:V)}}else if(e.indexOf(Mt(d),C)!=C){var $=I.lastIndexOf(d);$>-1&&(I=I.slice(0,$))}return I+u}function fp(e){return e=Me(e),e&&bu.test(e)?e.replace(to,W9):e}var cp=or(function(e,t,i){return e+(i?" ":"")+t.toUpperCase()}),V0=Dl("toUpperCase");function ks(e,t,i){return e=Me(e),t=i?n:t,t===n?P9(e)?z9(e):C9(e):e.match(t)||[]}var As=Se(function(e,t){try{return Pt(e,n,t)}catch(i){return F0(i)?i:new _e(i)}}),hp=_n(function(e,t){return zt(t,function(i){i=nn(i),pn(e,i,U0(e[i],e))}),e});function dp(e){var t=e==null?0:e.length,i=ae();return e=t?qe(e,function(u){if(typeof u[1]!="function")throw new Ht(a);return[i(u[0]),u[1]]}):[],Se(function(u){for(var d=-1;++d<t;){var _=e[d];if(Pt(_[0],this,u))return Pt(_[1],this,u)}})}function pp(e){return Wa(Gt(e,p))}function G0(e){return function(){return e}}function gp(e,t){return e==null||e!==e?t:e}var _p=Rl(),mp=Rl(!0);function At(e){return e}function q0(e){return sl(typeof e=="function"?e:Gt(e,p))}function vp(e){return al(Gt(e,p))}function bp(e,t){return fl(e,Gt(t,p))}var yp=Se(function(e,t){return function(i){return Sr(i,e,t)}}),wp=Se(function(e,t){return function(i){return Sr(e,i,t)}});function x0(e,t,i){var u=ut(t),d=ri(t,u);i==null&&!(xe(t)&&(d.length||!u.length))&&(i=t,t=e,e=this,d=ri(t,ut(t)));var _=!(xe(i)&&"chain"in i)||!!i.chain,y=vn(e);return zt(d,function(C){var I=t[C];e[C]=I,y&&(e.prototype[C]=function(){var W=this.__chain__;if(_||W){var F=e(this.__wrapped__),V=F.__actions__=Et(this.__actions__);return V.push({func:I,args:arguments,thisArg:e}),F.__chain__=W,F}return I.apply(e,kn([this.value()],arguments))})}),e}function Sp(){return ft._===this&&(ft._=J9),this}function J0(){}function Cp(e){return e=ye(e),Se(function(t){return cl(t,e)})}var Op=C0(qe),Ep=C0(Po),Ip=C0(Yi);function Ds(e){return T0(e)?ji(nn(e)):ef(e)}function kp(e){return function(t){return e==null?n:zn(e,t)}}var Ap=Ll(),Dp=Ll(!0);function K0(){return[]}function Y0(){return!1}function Tp(){return{}}function Rp(){return""}function Pp(){return!0}function Lp(e,t){if(e=ye(e),e<1||e>Ne)return[];var i=be,u=pt(e,be);t=ae(t),e-=be;for(var d=Qi(u,t);++i<e;)t(i);return d}function Mp(e){return me(e)?qe(e,nn):Bt(e)?[e]:Et(jl(Me(e)))}function Bp(e){var t=++q9;return Me(e)+t}var Up=ai(function(e,t){return e+t},0),Wp=O0("ceil"),Fp=ai(function(e,t){return e/t},1),Np=O0("floor");function zp(e){return e&&e.length?ni(e,At,a0):n}function Hp(e,t){return e&&e.length?ni(e,ae(t,2),a0):n}function Vp(e){return Bo(e,At)}function Gp(e,t){return Bo(e,ae(t,2))}function qp(e){return e&&e.length?ni(e,At,d0):n}function xp(e,t){return e&&e.length?ni(e,ae(t,2),d0):n}var Jp=ai(function(e,t){return e*t},1),Kp=O0("round"),Yp=ai(function(e,t){return e-t},0);function jp(e){return e&&e.length?Xi(e,At):0}function Zp(e,t){return e&&e.length?Xi(e,ae(t,2)):0}return g.after=vh,g.ary=ls,g.assign=od,g.assignIn=ys,g.assignInWith=Si,g.assignWith=ld,g.at=sd,g.before=ss,g.bind=U0,g.bindAll=hp,g.bindKey=us,g.castArray=Th,g.chain=rs,g.chunk=Ff,g.compact=Nf,g.concat=zf,g.cond=dp,g.conforms=pp,g.constant=G0,g.countBy=jc,g.create=ud,g.curry=as,g.curryRight=fs,g.debounce=cs,g.defaults=ad,g.defaultsDeep=fd,g.defer=bh,g.delay=yh,g.difference=Hf,g.differenceBy=Vf,g.differenceWith=Gf,g.drop=qf,g.dropRight=xf,g.dropRightWhile=Jf,g.dropWhile=Kf,g.fill=Yf,g.filter=Xc,g.flatMap=eh,g.flatMapDeep=th,g.flatMapDepth=nh,g.flatten=$l,g.flattenDeep=jf,g.flattenDepth=Zf,g.flip=wh,g.flow=_p,g.flowRight=mp,g.fromPairs=Xf,g.functions=md,g.functionsIn=vd,g.groupBy=rh,g.initial=$f,g.intersection=ec,g.intersectionBy=tc,g.intersectionWith=nc,g.invert=yd,g.invertBy=wd,g.invokeMap=oh,g.iteratee=q0,g.keyBy=lh,g.keys=ut,g.keysIn=kt,g.map=_i,g.mapKeys=Cd,g.mapValues=Od,g.matches=vp,g.matchesProperty=bp,g.memoize=vi,g.merge=Ed,g.mergeWith=ws,g.method=yp,g.methodOf=wp,g.mixin=x0,g.negate=bi,g.nthArg=Cp,g.omit=Id,g.omitBy=kd,g.once=Sh,g.orderBy=sh,g.over=Op,g.overArgs=Ch,g.overEvery=Ep,g.overSome=Ip,g.partial=W0,g.partialRight=hs,g.partition=uh,g.pick=Ad,g.pickBy=Ss,g.property=Ds,g.propertyOf=kp,g.pull=lc,g.pullAll=ts,g.pullAllBy=sc,g.pullAllWith=uc,g.pullAt=ac,g.range=Ap,g.rangeRight=Dp,g.rearg=Oh,g.reject=ch,g.remove=fc,g.rest=Eh,g.reverse=M0,g.sampleSize=dh,g.set=Td,g.setWith=Rd,g.shuffle=ph,g.slice=cc,g.sortBy=mh,g.sortedUniq=bc,g.sortedUniqBy=yc,g.split=ep,g.spread=Ih,g.tail=wc,g.take=Sc,g.takeRight=Cc,g.takeRightWhile=Oc,g.takeWhile=Ec,g.tap=zc,g.throttle=kh,g.thru=gi,g.toArray=ms,g.toPairs=Cs,g.toPairsIn=Os,g.toPath=Mp,g.toPlainObject=bs,g.transform=Pd,g.unary=Ah,g.union=Ic,g.unionBy=kc,g.unionWith=Ac,g.uniq=Dc,g.uniqBy=Tc,g.uniqWith=Rc,g.unset=Ld,g.unzip=B0,g.unzipWith=ns,g.update=Md,g.updateWith=Bd,g.values=ur,g.valuesIn=Ud,g.without=Pc,g.words=ks,g.wrap=Dh,g.xor=Lc,g.xorBy=Mc,g.xorWith=Bc,g.zip=Uc,g.zipObject=Wc,g.zipObjectDeep=Fc,g.zipWith=Nc,g.entries=Cs,g.entriesIn=Os,g.extend=ys,g.extendWith=Si,x0(g,g),g.add=Up,g.attempt=As,g.camelCase=zd,g.capitalize=Es,g.ceil=Wp,g.clamp=Wd,g.clone=Rh,g.cloneDeep=Lh,g.cloneDeepWith=Mh,g.cloneWith=Ph,g.conformsTo=Bh,g.deburr=Is,g.defaultTo=gp,g.divide=Fp,g.endsWith=Hd,g.eq=Zt,g.escape=Vd,g.escapeRegExp=Gd,g.every=Zc,g.find=Qc,g.findIndex=Xl,g.findKey=cd,g.findLast=$c,g.findLastIndex=Ql,g.findLastKey=hd,g.floor=Np,g.forEach=is,g.forEachRight=os,g.forIn=dd,g.forInRight=pd,g.forOwn=gd,g.forOwnRight=_d,g.get=z0,g.gt=Uh,g.gte=Wh,g.has=bd,g.hasIn=H0,g.head=es,g.identity=At,g.includes=ih,g.indexOf=Qf,g.inRange=Fd,g.invoke=Sd,g.isArguments=Gn,g.isArray=me,g.isArrayBuffer=Fh,g.isArrayLike=It,g.isArrayLikeObject=it,g.isBoolean=Nh,g.isBuffer=Mn,g.isDate=zh,g.isElement=Hh,g.isEmpty=Vh,g.isEqual=Gh,g.isEqualWith=qh,g.isError=F0,g.isFinite=xh,g.isFunction=vn,g.isInteger=ds,g.isLength=yi,g.isMap=ps,g.isMatch=Jh,g.isMatchWith=Kh,g.isNaN=Yh,g.isNative=jh,g.isNil=Xh,g.isNull=Zh,g.isNumber=gs,g.isObject=xe,g.isObjectLike=Ke,g.isPlainObject=Ar,g.isRegExp=N0,g.isSafeInteger=Qh,g.isSet=_s,g.isString=wi,g.isSymbol=Bt,g.isTypedArray=sr,g.isUndefined=$h,g.isWeakMap=ed,g.isWeakSet=td,g.join=rc,g.kebabCase=qd,g.last=xt,g.lastIndexOf=ic,g.lowerCase=xd,g.lowerFirst=Jd,g.lt=nd,g.lte=rd,g.max=zp,g.maxBy=Hp,g.mean=Vp,g.meanBy=Gp,g.min=qp,g.minBy=xp,g.stubArray=K0,g.stubFalse=Y0,g.stubObject=Tp,g.stubString=Rp,g.stubTrue=Pp,g.multiply=Jp,g.nth=oc,g.noConflict=Sp,g.noop=J0,g.now=mi,g.pad=Kd,g.padEnd=Yd,g.padStart=jd,g.parseInt=Zd,g.random=Nd,g.reduce=ah,g.reduceRight=fh,g.repeat=Xd,g.replace=Qd,g.result=Dd,g.round=Kp,g.runInContext=E,g.sample=hh,g.size=gh,g.snakeCase=$d,g.some=_h,g.sortedIndex=hc,g.sortedIndexBy=dc,g.sortedIndexOf=gc,g.sortedLastIndex=_c,g.sortedLastIndexBy=mc,g.sortedLastIndexOf=vc,g.startCase=tp,g.startsWith=np,g.subtract=Yp,g.sum=jp,g.sumBy=Zp,g.template=rp,g.times=Lp,g.toFinite=bn,g.toInteger=ye,g.toLength=vs,g.toLower=ip,g.toNumber=Jt,g.toSafeInteger=id,g.toString=Me,g.toUpper=op,g.trim=lp,g.trimEnd=sp,g.trimStart=up,g.truncate=ap,g.unescape=fp,g.uniqueId=Bp,g.upperCase=cp,g.upperFirst=V0,g.each=is,g.eachRight=os,g.first=es,x0(g,function(){var e={};return en(g,function(t,i){Be.call(g.prototype,i)||(e[i]=t)}),e}(),{chain:!1}),g.VERSION=o,zt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){g[e].placeholder=g}),zt(["drop","take"],function(e,t){Ee.prototype[e]=function(i){i=i===n?1:st(ye(i),0);var u=this.__filtered__&&!t?new Ee(this):this.clone();return u.__filtered__?u.__takeCount__=pt(i,u.__takeCount__):u.__views__.push({size:pt(i,be),type:e+(u.__dir__<0?"Right":"")}),u},Ee.prototype[e+"Right"]=function(i){return this.reverse()[e](i).reverse()}}),zt(["filter","map","takeWhile"],function(e,t){var i=t+1,u=i==q||i==Ge;Ee.prototype[e]=function(d){var _=this.clone();return _.__iteratees__.push({iteratee:ae(d,3),type:i}),_.__filtered__=_.__filtered__||u,_}}),zt(["head","last"],function(e,t){var i="take"+(t?"Right":"");Ee.prototype[e]=function(){return this[i](1).value()[0]}}),zt(["initial","tail"],function(e,t){var i="drop"+(t?"":"Right");Ee.prototype[e]=function(){return this.__filtered__?new Ee(this):this[i](1)}}),Ee.prototype.compact=function(){return this.filter(At)},Ee.prototype.find=function(e){return this.filter(e).head()},Ee.prototype.findLast=function(e){return this.reverse().find(e)},Ee.prototype.invokeMap=Se(function(e,t){return typeof e=="function"?new Ee(this):this.map(function(i){return Sr(i,e,t)})}),Ee.prototype.reject=function(e){return this.filter(bi(ae(e)))},Ee.prototype.slice=function(e,t){e=ye(e);var i=this;return i.__filtered__&&(e>0||t<0)?new Ee(i):(e<0?i=i.takeRight(-e):e&&(i=i.drop(e)),t!==n&&(t=ye(t),i=t<0?i.dropRight(-t):i.take(t-e)),i)},Ee.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ee.prototype.toArray=function(){return this.take(be)},en(Ee.prototype,function(e,t){var i=/^(?:filter|find|map|reject)|While$/.test(t),u=/^(?:head|last)$/.test(t),d=g[u?"take"+(t=="last"?"Right":""):t],_=u||/^find/.test(t);d&&(g.prototype[t]=function(){var y=this.__wrapped__,C=u?[1]:arguments,I=y instanceof Ee,W=C[0],F=I||me(y),V=function(Oe){var ke=d.apply(g,kn([Oe],C));return u&&$?ke[0]:ke};F&&i&&typeof W=="function"&&W.length!=1&&(I=F=!1);var $=this.__chain__,oe=!!this.__actions__.length,ce=_&&!$,we=I&&!oe;if(!_&&F){y=we?y:new Ee(this);var he=e.apply(y,C);return he.__actions__.push({func:gi,args:[V],thisArg:n}),new Vt(he,$)}return ce&&we?e.apply(this,C):(he=this.thru(V),ce?u?he.value()[0]:he.value():he)})}),zt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Hr[e],i=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);g.prototype[e]=function(){var d=arguments;if(u&&!this.__chain__){var _=this.value();return t.apply(me(_)?_:[],d)}return this[i](function(y){return t.apply(me(y)?y:[],d)})}}),en(Ee.prototype,function(e,t){var i=g[t];if(i){var u=i.name+"";Be.call(nr,u)||(nr[u]=[]),nr[u].push({name:t,func:i})}}),nr[ui(n,L).name]=[{name:"wrapper",func:n}],Ee.prototype.clone=ua,Ee.prototype.reverse=aa,Ee.prototype.value=fa,g.prototype.at=Hc,g.prototype.chain=Vc,g.prototype.commit=Gc,g.prototype.next=qc,g.prototype.plant=Jc,g.prototype.reverse=Kc,g.prototype.toJSON=g.prototype.valueOf=g.prototype.value=Yc,g.prototype.first=g.prototype.head,gr&&(g.prototype[gr]=xc),g},$n=H9();Bn?((Bn.exports=$n)._=$n,qi._=$n):ft._=$n}).call(ar)})(Ii,Ii.exports);var O1=Ii.exports;const hu=uu(O1);function Fs(s){let r,n,o,l;function c(f){s[11](f)}function a(f){s[12](f)}let h={};return s[3]!==void 0&&(h.profile=s[3]),s[2]!==void 0&&(h.selected=s[2]),r=new y1({props:h}),Ie.push(()=>$e(r,"profile",c)),Ie.push(()=>$e(r,"selected",a)),{c(){Ye(r.$$.fragment)},l(f){je(r.$$.fragment,f)},m(f,m){Ze(r,f,m),l=!0},p(f,m){const v={};!n&&m&8&&(n=!0,v.profile=f[3],Qe(()=>n=!1)),!o&&m&4&&(o=!0,v.selected=f[2],Qe(()=>o=!1)),r.$set(v)},i(f){l||(se(r.$$.fragment,f),l=!0)},o(f){de(r.$$.fragment,f),l=!1},d(f){Xe(r,f)}}}function E1(s){let r,n,o,l,c=s[3]&&Fs(s);function a(f){s[13](f)}let h={em:s[0],OnLongPress:s[4]};return s[1]!==void 0&&(h.status=s[1]),n=new C1({props:h}),Ie.push(()=>$e(n,"status",a)),n.$on("click",s[6]),n.$on("mute",s[5]),{c(){c&&c.c(),r=re(),Ye(n.$$.fragment)},l(f){c&&c.l(f),r=ie(f),je(n.$$.fragment,f)},m(f,m){c&&c.m(f,m),Q(f,r,m),Ze(n,f,m),l=!0},p(f,[m]){f[3]?c?(c.p(f,m),m&8&&se(c,1)):(c=Fs(f),c.c(),se(c,1),c.m(r.parentNode,r)):c&&(Sn(),de(c,1,1,()=>{c=null}),Cn());const v={};m&1&&(v.em=f[0]),!o&&m&2&&(o=!0,v.status=f[1],Qe(()=>o=!1)),n.$set(v)},i(f){l||(se(c),se(n.$$.fragment,f),l=!0)},o(f){de(c),de(n.$$.fragment,f),l=!1},d(f){f&&k(r),c&&c.d(f),Xe(n,f)}}}function I1(s,r,n){let o,l;Le(s,qn,ee=>n(19,o=ee)),Le(s,Ci,ee=>n(10,l=ee));let{abonent:c,em:a,operator:h}=r;const{groupBy:f,find:m}=hu;Dr.subscribe(ee=>{ee&&U(ee)});const v=Q0(c+a+h);let p,b,w,A="inactive",T=!1,B={video:{display:"none",srcObject:""},audio:{paused:!0,src:""}},L={video:{display:"none",srcObject:""},audio:{muted:!0,srcObject:""}},Z={em:a,abonent:c,type:"user"};$t(async()=>{n(9,p=new g1(Z,v,o)),n(9,p.OnOpenDataChannel=()=>{console.log("OnOpenDataChannel")},p),n(9,p.GetRemoteAudio=()=>L.audio.srcObject,p),n(9,p.SetRemoteAudio=ee=>{L.audio.srcObject=ee},p),n(9,p.SendToComponent=U,p),n(9,p.SetLocalVideo=ee=>{B.video.srcObject=ee},p),n(9,p.SetRemoteVideo=ee=>{L.video.srcObject=ee,L.video.display="block",n(1,A="talk"),B.audio.paused=!0},p)});function z(){}function N(){p.Call()}function H(){n(1,A="talk"),G()}function U(ee){if(ee.operators&&ee.operators[a]){let pe=f(ee.operators[a],"status");try{pe&&pe.offer?A!=="call"&&A!=="wait"&&n(1,A="active"):pe.busy?A!=="call"&&n(1,A="busy"):pe.close&&A!=="wait"&&(B.video.display="none",L.video.display="none",B.audio.paused=!0,L.audio.muted=!0,n(1,A="inactive"))}catch(ve){console.log(ve)}}ee.operator&&ee.operator.em===p.em&&n(1,A="active"),ee.desc&&ee.cand,ee.func==="mute"&&(B.audio.paused=!0,L.audio.muted=!0,B.video.display="none",L.video.display="none",n(1,A="inactive")),ee.func==="talk"&&(n(1,A="talk"),clearInterval(w),B.audio.paused=!0,L.audio.muted=!1),ee.func==="redirect"&&(n(1,A="call"),B.audio.paused=!0,L.audio.muted=!0,L.video.srcObject=null,L.video.display="none"),ee.status==="wait"&&n(1,A="wait")}async function G(){try{if(!window.AudioContext){window.AudioContext=window.AudioContext||window.webkitAudioContext;let ee=new AudioContext;n(9,p.localSoundSrc=ee.createMediaElementSource(p.localSound),p),p.localSoundSrc.connect(ee.destination)}}catch{console.log("Web Audio API is not supported in this browser")}switch(A){case"inactive":break;case"wait":n(1,A="inactive"),p.SendCheck();break;case"active":let ee=function(){N(),n(1,A="call"),L.video.srcObject=null};localStorage.getItem("kolmit_abonent"),ee();break;case"call":n(1,A="inactive"),B.audio.paused=!0,B.video.display="none",clearInterval(w),p.Hangup();break;case"talk":n(1,A="inactive"),L.audio.muted=!0,B.video.display="none",L.video.display="none",p.Hangup();break;case"muted":n(1,A="inactive");break;case"busy":N(),n(1,A="wait");break;default:return}}function fe(ee){T=ee,n(3,T)}function x(ee){b=ee,n(2,b)}function D(ee){A=ee,n(1,A)}return s.$$set=ee=>{"abonent"in ee&&n(7,c=ee.abonent),"em"in ee&&n(0,a=ee.em),"operator"in ee&&n(8,h=ee.operator)},s.$$.update=()=>{if(s.$$.dirty&512&&p&&!p.em&&console.log(),s.$$.dirty&1027&&A){let ee=m(l[0].staff,{email:a});ee&&(ee.status=A)}},[a,A,b,T,z,H,G,c,h,p,l,fe,x,D]}class k1 extends tt{constructor(r){super(),nt(this,r,I1,E1,et,{abonent:7,em:0,operator:8})}}function A1(s){let r,n,o,l;const c=s[4].default,a=xn(c,s,s[3],null);return{c(){r=J("div"),a&&a.c(),this.h()},l(h){r=K(h,"DIV",{style:!0});var f=j(r);a&&a.l(f),f.forEach(k),this.h()},h(){O(r,"position","relative"),O(r,"right","0px"),O(r,"top","70px")},m(h,f){Q(h,r,f),a&&a.m(r,null),n=!0,o||(l=ue(r,"click",s[0]),o=!0)},p(h,[f]){a&&a.p&&(!n||f&8)&&Jn(a,c,h,h[3],n?Yn(c,h[3],f,null):Kn(h[3]),null)},i(h){n||(se(a,h),n=!0)},o(h){de(a,h),n=!1},d(h){h&&k(r),a&&a.d(h),o=!1,l()}}}function D1(s,r,n){let{$$slots:o={},$$scope:l}=r,{status:c}=r,{operator:a}=r;async function h(){document.querySelector("[src*='"+a+"']").contentWindow.document.querySelector(".callButton"),await new Promise(function(v,p){window.rtc.DC&&(window.rtc.DC.SendRedirect({operator:a},v),window.rtc.OnMessage({func:"mute"}))}),n(1,c="mute")}return s.$$set=f=>{"status"in f&&n(1,c=f.status),"operator"in f&&n(2,a=f.operator),"$$scope"in f&&n(3,l=f.$$scope)},[h,c,a,l,o]}class T1 extends tt{constructor(r){super(),nt(this,r,D1,A1,et,{status:1,operator:2})}}function R1(s){let r,n,o,l,c,a;const h=s[6].default,f=xn(h,s,s[5],null);return{c(){r=J("div"),f&&f.c(),n=re(),o=J("input"),this.h()},l(m){r=K(m,"DIV",{style:!0});var v=j(r);f&&f.l(v),n=ie(v),o=K(v,"INPUT",{class:!0,accept:!0,id:!0,name:!0,type:!0,style:!0}),v.forEach(k),this.h()},h(){S(o,"class","file-upload"),S(o,"accept","*,*"),S(o,"id","file"),S(o,"name","file"),S(o,"type","file"),O(o,"display","none"),O(r,"position","relative"),O(r,"right","0px"),O(r,"top","70px")},m(m,v){Q(m,r,v),f&&f.m(r,null),P(r,n),P(r,o),s[7](o),l=!0,c||(a=[ue(o,"change",s[3]),ue(o,"change",s[8]),ue(r,"click",s[2])],c=!0)},p(m,[v]){f&&f.p&&(!l||v&32)&&Jn(f,h,m,m[5],l?Yn(h,m[5],v,null):Kn(m[5]),null)},i(m){l||(se(f,m),l=!0)},o(m){de(f,m),l=!1},d(m){m&&k(r),f&&f.d(m),s[7](null),c=!1,ln(a)}}}function P1(s,r,n){let{$$slots:o={},$$scope:l}=r,c,{operator:a}=r,h,f=globalThis;function m(w){let A=new PointerEvent("click",{bubbles:!1,cancelable:!0,view:f});document.getElementById("file").dispatchEvent(A)}async function v(w){try{let A=document.querySelector("[src*='"+a+"']"),B=await new Promise(function(L,Z){let z=new FileReader;A.contentWindow.user?(z.onload=N=>{A.contentWindow.user.DC.SendFile(N.target.result,file.name)},z.readAsArrayBuffer(w.target.files[0])):(z.onload=N=>{f.rtc.DC.SendFile(N.target.result,file.name)},z.readAsArrayBuffer(w.target.files[0]))})}catch{}}function p(w){Ie[w?"unshift":"push"](()=>{h=w,n(1,h)})}function b(){c=this.files,n(0,c)}return s.$$set=w=>{"operator"in w&&n(4,a=w.operator),"$$scope"in w&&n(5,l=w.$$scope)},[c,h,m,v,a,l,o,p,b]}class L1 extends tt{constructor(r){super(),nt(this,r,P1,R1,et,{operator:4})}}const du=""+new URL("../assets/operator.7238a518.svg",import.meta.url).href;function Ns(s){let r,n,o,l,c,a,h,f,m,v,p,b,w,A,T,B,L=s[1]&&zs(s);c=new k1({props:{em:s[0].email,operator:s[3].em,abonent:s[0].abonent}});let Z=s[1]&&Hs(s),z=s[15]&&M1(s),N=s[13]==="talk"&&s[14]==="active"&&s[0].email!==s[3].email&&Gs(s),H=(s[14]==="talk"||s[13]==="talk"&&s[0].email===s[3].email)&&qs(s);return{c(){r=J("div"),n=J("video"),o=re(),L&&L.c(),l=re(),Ye(c.$$.fragment),a=re(),Z&&Z.c(),h=re(),f=J("div"),z&&z.c(),m=re(),v=J("textarea"),p=re(),b=J("div"),N&&N.c(),w=re(),H&&H.c(),this.h()},l(U){r=K(U,"DIV",{class:!0,style:!0});var G=j(r);n=K(G,"VIDEO",{id:!0,class:!0,poster:!0,style:!0}),j(n).forEach(k),o=ie(G),L&&L.l(G),l=ie(G),je(c.$$.fragment,G),a=ie(G),Z&&Z.l(G),G.forEach(k),h=ie(U),f=K(U,"DIV",{style:!0});var fe=j(f);z&&z.l(fe),m=ie(fe),v=K(fe,"TEXTAREA",{type:!0,rows:!0,class:!0,placeholder:!0,style:!0}),j(v).forEach(k),fe.forEach(k),p=ie(U),b=K(U,"DIV",{style:!0});var x=j(b);N&&N.l(x),w=ie(x),H&&H.l(x),x.forEach(k),this.h()},h(){S(n,"id","localVideo"),S(n,"class","user_pic is-rounded"),S(n,"poster",s[4]),n.autoplay=!0,n.playsInline=!0,n.muted=!0,O(n,"display","block"),O(n,"position","absolute"),O(n,"top","0px"),O(n,"width","100px"),O(n,"height","100px"),S(r,"class","user_pic_div"),O(r,"position","relative"),O(r,"width","100px"),O(r,"height","100px"),S(v,"type","text"),S(v,"rows","3"),S(v,"class","user_desc svelte-1s97yno"),S(v,"placeholder",s[8]),v.readOnly=s[10],O(v,"width","85%"),O(v,"overflow","auto"),O(v,"max-height","100px"),O(v,"resize","none"),O(f,"flex","1"),O(f,"margin-left","10px"),O(b,"display","flex"),O(b,"flex-flow","row nowrap"),O(b,"align-items","flex-start"),O(b,"flex-direction","column")},m(U,G){Q(U,r,G),P(r,n),P(r,o),L&&L.m(r,null),P(r,l),Ze(c,r,null),P(r,a),Z&&Z.m(r,null),Q(U,h,G),Q(U,f,G),z&&z.m(f,null),P(f,m),P(f,v),Je(v,s[0].desc),Q(U,p,G),Q(U,b,G),N&&N.m(b,null),P(b,w),H&&H.m(b,null),A=!0,T||(B=[ue(n,"click",s[16]),ue(v,"change",s[18]),ue(v,"input",s[26])],T=!0)},p(U,G){(!A||G[0]&16)&&S(n,"poster",U[4]),U[1]?L?L.p(U,G):(L=zs(U),L.c(),L.m(r,l)):L&&(L.d(1),L=null);const fe={};G[0]&1&&(fe.em=U[0].email),G[0]&8&&(fe.operator=U[3].em),G[0]&1&&(fe.abonent=U[0].abonent),c.$set(fe),U[1]?Z?Z.p(U,G):(Z=Hs(U),Z.c(),Z.m(r,null)):Z&&(Z.d(1),Z=null),U[15]&&z.p(U,G),(!A||G[0]&256)&&S(v,"placeholder",U[8]),(!A||G[0]&1024)&&(v.readOnly=U[10]),G[0]&1&&Je(v,U[0].desc),U[13]==="talk"&&U[14]==="active"&&U[0].email!==U[3].email?N?(N.p(U,G),G[0]&8201&&se(N,1)):(N=Gs(U),N.c(),se(N,1),N.m(b,w)):N&&(Sn(),de(N,1,1,()=>{N=null}),Cn()),U[14]==="talk"||U[13]==="talk"&&U[0].email===U[3].email?H?(H.p(U,G),G[0]&8201&&se(H,1)):(H=qs(U),H.c(),se(H,1),H.m(b,null)):H&&(Sn(),de(H,1,1,()=>{H=null}),Cn())},i(U){A||(se(c.$$.fragment,U),se(N),se(H),A=!0)},o(U){de(c.$$.fragment,U),de(N),de(H),A=!1},d(U){U&&(k(r),k(h),k(f),k(p),k(b)),L&&L.d(),Xe(c),Z&&Z.d(),z&&z.d(),N&&N.d(),H&&H.d(),T=!1,ln(B)}}}function zs(s){let r,n,o;return{c(){r=J("input"),this.h()},l(l){r=K(l,"INPUT",{class:!0,accept:!0,id:!0,name:!0,type:!0,style:!0}),this.h()},h(){S(r,"class","file-upload svelte-1s97yno"),S(r,"accept","image/png, image/jpeg"),S(r,"id","avatar"),S(r,"name","avatar"),S(r,"type","file"),O(r,"display","none")},m(l,c){Q(l,r,c),s[22](r),n||(o=[ue(r,"change",s[17]),ue(r,"change",s[23])],n=!0)},p:We,d(l){l&&k(r),s[22](null),n=!1,ln(o)}}}function Hs(s){let r,n=s[2].admin.email===s[3].email&&s[3].email!==s[0].email&&s[0].role==="operator"&&Vs(s);return{c(){n&&n.c(),r=_t()},l(o){n&&n.l(o),r=_t()},m(o,l){n&&n.m(o,l),Q(o,r,l)},p(o,l){o[2].admin.email===o[3].email&&o[3].email!==o[0].email&&o[0].role==="operator"?n?n.p(o,l):(n=Vs(o),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},d(o){o&&k(r),n&&n.d(o)}}}function Vs(s){let r,n,o,l,c,a;return{c(){r=Te("svg"),n=Te("glyph"),o=Te("g"),l=Te("path"),this.h()},l(h){r=Re(h,"svg",{height:!0,width:!0,style:!0});var f=j(r);n=Re(f,"glyph",{"glyph-name":!0,unicode:!0,"horiz-adv-x":!0}),j(n).forEach(k),o=Re(f,"g",{class:!0});var m=j(o);l=Re(m,"path",{d:!0,transform:!0,style:!0}),j(l).forEach(k),m.forEach(k),f.forEach(k),this.h()},h(){S(n,"glyph-name","minus-circle"),S(n,"unicode",""),S(n,"horiz-adv-x","50"),S(l,"d","M500.2 62.5c-241.8 0-437.7 195.89999999999998-437.7 437.3 0 241.8 195.89999999999998 437.7 437.7 437.7 241.40000000000003 0 437.3-195.89999999999998 437.3-437.7 0-241.40000000000003-195.89999999999998-437.3-437.3-437.3z m301.59999999999997 466.5c-0.6999999999999318 9-2.199999999999932 19.100000000000023-4.699999999999932 30.299999999999955h-593.9000000000001c-2.499999999999943-11.199999999999932-4.299999999999926-21.699999999999932-5.0999999999999375-31.399999999999977-0.6999999999999886-9.699999999999932-1.0999999999999943-19.799999999999955-1.0999999999999943-30.299999999999955 0-9 0.4000000000000057-18 1.0999999999999943-26.700000000000045 0.700000000000017-9 2.5-19.099999999999966 5.099999999999994-30.299999999999955h593.9000000000001c2.4999999999998863 11.199999999999989 3.9999999999998863 21.599999999999966 4.699999999999818 31.399999999999977 1.1000000000000227 9.699999999999989 1.400000000000091 19.80000000000001 1.400000000000091 30.30000000000001 0.09999999999990905 9.099999999999966-0.3000000000000682 17.69999999999999-1.400000000000091 26.69999999999999z"),S(l,"transform","scale(.03)"),O(l,"fill","lightgrey"),O(l,"stroke","black"),O(l,"stroke-width","20px"),S(o,"class","currentLayer"),S(r,"height","30"),S(r,"width","30"),O(r,"position","absolute"),O(r,"bottom","-15px"),O(r,"left","-9px")},m(h,f){Q(h,r,f),P(r,n),P(r,o),P(o,l),c||(a=ue(r,"click",function(){Pr(s[19](s[0]))&&s[19](s[0]).apply(this,arguments)}),c=!0)},p(h,f){s=h},d(h){h&&k(r),c=!1,a()}}}function M1(s){let r,n,o,l,c;return{c(){r=J("input"),n=re(),o=J("input"),this.h()},l(a){r=K(a,"INPUT",{type:!0,class:!0,placeholder:!0,style:!0}),n=ie(a),o=K(a,"INPUT",{type:!0,class:!0,placeholder:!0,style:!0}),this.h()},h(){S(r,"type","text"),S(r,"class","user_name svelte-1s97yno"),S(r,"placeholder",s[6]),r.readOnly=s[10],O(r,"width","80%"),S(o,"type","text"),S(o,"class","user_email svelte-1s97yno"),S(o,"placeholder",s[7]),o.readOnly=s[11],O(o,"width","100%"),O(o,"max-height","100px")},m(a,h){Q(a,r,h),Je(r,s[0].name),Q(a,n,h),Q(a,o,h),Je(o,s[0].email),l||(c=[ue(r,"change",s[18]),ue(r,"input",s[24]),ue(o,"change",s[18]),ue(o,"input",s[25])],l=!0)},p(a,h){h[0]&64&&S(r,"placeholder",a[6]),h[0]&1024&&(r.readOnly=a[10]),h[0]&1&&r.value!==a[0].name&&Je(r,a[0].name),h[0]&128&&S(o,"placeholder",a[7]),h[0]&2048&&(o.readOnly=a[11]),h[0]&1&&o.value!==a[0].email&&Je(o,a[0].email)},d(a){a&&(k(r),k(n),k(o)),l=!1,ln(c)}}}function Gs(s){let r,n,o;function l(a){s[27](a)}let c={operator:s[0].email,$$slots:{default:[B1]},$$scope:{ctx:s}};return s[13]!==void 0&&(c.$statust=s[13]),r=new T1({props:c}),Ie.push(()=>$e(r,"$statust",l)),{c(){Ye(r.$$.fragment)},l(a){je(r.$$.fragment,a)},m(a,h){Ze(r,a,h),o=!0},p(a,h){const f={};h[0]&1&&(f.operator=a[0].email),h[1]&16&&(f.$$scope={dirty:h,ctx:a}),!n&&h[0]&8192&&(n=!0,f.$statust=a[13],Qe(()=>n=!1)),r.$set(f)},i(a){o||(se(r.$$.fragment,a),o=!0)},o(a){de(r.$$.fragment,a),o=!1},d(a){Xe(r,a)}}}function B1(s){let r,n;return{c(){r=J("img"),this.h()},l(o){r=K(o,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){Dt(r.src,n="./src/routes/assets/call-forward.svg")||S(r,"src",n),S(r,"alt","call-forward"),S(r,"width","30px"),S(r,"height","30px")},m(o,l){Q(o,r,l)},p:We,d(o){o&&k(r)}}}function qs(s){let r,n;return r=new L1({props:{$statust:s[13],operator:s[0].email,$$slots:{default:[U1]},$$scope:{ctx:s}}}),{c(){Ye(r.$$.fragment)},l(o){je(r.$$.fragment,o)},m(o,l){Ze(r,o,l),n=!0},p(o,l){const c={};l[0]&8192&&(c.$statust=o[13]),l[0]&1&&(c.operator=o[0].email),l[1]&16&&(c.$$scope={dirty:l,ctx:o}),r.$set(c)},i(o){n||(se(r.$$.fragment,o),n=!0)},o(o){de(r.$$.fragment,o),n=!1},d(o){Xe(r,o)}}}function U1(s){let r,n;return{c(){r=J("img"),this.h()},l(o){r=K(o,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){Dt(r.src,n="./src/routes/assets/file-transfer.svg")||S(r,"src",n),S(r,"alt","file-transfer"),S(r,"width","30px"),S(r,"height","30px")},m(o,l){Q(o,r,l)},p:We,d(o){o&&k(r)}}}function W1(s){let r,n,o=s[0].email!==s[3].em&&Ns(s);return{c(){r=J("div"),o&&o.c(),this.h()},l(l){r=K(l,"DIV",{style:!0});var c=j(r);o&&o.l(c),c.forEach(k),this.h()},h(){O(r,"display","flex"),O(r,"flex-wrap","nowrap"),O(r,"justify-content","space-between"),O(r,"padding-bottom","20px")},m(l,c){Q(l,r,c),o&&o.m(r,null),s[28](r),n=!0},p(l,c){l[0].email!==l[3].em?o?(o.p(l,c),c[0]&9&&se(o,1)):(o=Ns(l),o.c(),se(o,1),o.m(r,null)):o&&(Sn(),de(o,1,1,()=>{o=null}),Cn())},i(l){n||(se(o),n=!0)},o(l){de(o),n=!1},d(l){l&&k(r),o&&o.d(),s[28](null)}}}function F1(s,r,n){let o,l,c,a,h;Le(s,Qt,le=>n(31,o=le)),Le(s,X0,le=>n(32,l=le)),Le(s,Tr,le=>n(21,c=le)),Le(s,Oi,le=>n(33,a=le)),Le(s,Ei,le=>n(13,h=le));let{operator:f}=r,{id:m}=r,{dep:v}=r,{user:p}=r,b,w,A,T,B,L,Z=a;Z&&(A=Z["input operator name"][o],T=Z["input operator email"][o],B=Z["input description"][o]);let z=du;p.picture.medium&&(z=p.picture.medium);let{edited_display:N}=r,H=!0,U=!0;p.abonent=f.abonent,p.email=p.email?p.email:"";const G=le=>le?le.replace(/^([a-z])/,(De,Ue)=>Ue.toUpperCase()):"";p.name=G(p.name);let fe;$t(()=>{});function x(le){let De=new MouseEvent("click",{bubbles:!1,cancelable:!0,view:window});L&&L.dispatchEvent(De)}let D,ee;function pe(le){try{eo(le.target.files[0],function(De,Ue){De.type==="error"?console.error("Error loading image "):(D=De.width,ee=De.height,n(0,p.picture={medium:De.toDataURL()},p),ve())},{orientation:!0,maxWidth:100,maxHeight:100,minWidth:50,minHeight:50,canvas:!0})}catch(De){console.log(De)}}async function ve(le){let De={};De.proj="kolmit",De.func="changeoper",De.abonent=f.abonent,De.em=f.email,De.dep_id=v.id,De.data=p,De.lang=o,fetch("/operator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:De})})}async function q(le){let De=v.staff[m];if(De&&confirm("Delete "+De.name)){let Ue={};Ue.proj="kolmit",Ue.func="remoper",Ue.em=f.email,Ue.id=De.id,Ue.dep=v.id,Ue.lang=o,Ue.abonent=f.abonent;const mt=await(await fetch("/operator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:Ue})})).json();n(2,v.staff=mt.dep.staff,v)}}function te(le){Ie[le?"unshift":"push"](()=>{L=le,n(9,L)})}function Ge(){b=this.files,n(5,b)}function Ce(){p.name=this.value,n(0,p)}function Ne(){p.email=this.value,n(0,p)}function rt(){p.desc=this.value,n(0,p)}function Ae(le){h=le,Ei.set(h)}function be(le){Ie[le?"unshift":"push"](()=>{fe=le,n(12,fe)})}return s.$$set=le=>{"operator"in le&&n(3,f=le.operator),"id"in le&&n(20,m=le.id),"dep"in le&&n(2,v=le.dep),"user"in le&&n(0,p=le.user),"edited_display"in le&&n(1,N=le.edited_display)},s.$$.update=()=>{s.$$.dirty[0]&2097154&&c&&(n(1,N=c),n(10,H=!N),n(11,U=!N)),s.$$.dirty[0]&25&&p.email&&f.em===p.email&&(console.log(f.em+" "+p.email),rn(X0,l=z,l))},[p,N,v,f,z,b,A,T,B,L,H,U,fe,h,w,Z,x,pe,ve,q,m,c,te,Ge,Ce,Ne,rt,Ae,be]}class pu extends tt{constructor(r){super(),nt(this,r,F1,W1,et,{operator:3,id:20,dep:2,user:0,edited_display:1},null,[-1,-1])}}function xs(s,r,n){const o=s.slice();return o[30]=r[n],o[31]=r,o[32]=n,o}function Js(s){let r,n,o,l,c,a=s[1]&&Ks(s);return{c(){r=J("button"),n=J("input"),o=re(),a&&a.c(),this.h()},l(h){r=K(h,"BUTTON",{class:!0,owner:!0});var f=j(r);n=K(f,"INPUT",{type:!0,style:!0,placeholder:!0,class:!0}),o=ie(f),a&&a.l(f),f.forEach(k),this.h()},h(){S(n,"type","text"),n.readOnly=s[10],O(n,"border-width","0px"),S(n,"placeholder","input dep name"),S(n,"class","svelte-wxdsc0"),S(r,"class","collapsible svelte-wxdsc0"),S(r,"owner",s[2])},m(h,f){Q(h,r,f),P(r,n),Je(n,s[0].alias),P(r,o),a&&a.m(r,null),s[17](r),l||(c=[ue(n,"change",function(){Pr(s[13]({dep:s[0]}))&&s[13]({dep:s[0]}).apply(this,arguments)}),ue(n,"click",s[12]),ue(n,"input",s[16]),ue(r,"click",s[14])],l=!0)},p(h,f){s=h,f[0]&1024&&(n.readOnly=s[10]),f[0]&1&&n.value!==s[0].alias&&Je(n,s[0].alias),s[1]?a?a.p(s,f):(a=Ks(s),a.c(),a.m(r,null)):a&&(a.d(1),a=null),f[0]&4&&S(r,"owner",s[2])},d(h){h&&k(r),a&&a.d(),s[17](null),l=!1,ln(c)}}}function Ks(s){let r,n=s[3].email===s[3].abonent&&Ys(s);return{c(){n&&n.c(),r=_t()},l(o){n&&n.l(o),r=_t()},m(o,l){n&&n.m(o,l),Q(o,r,l)},p(o,l){o[3].email===o[3].abonent?n?n.p(o,l):(n=Ys(o),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},d(o){o&&k(r),n&&n.d(o)}}}function Ys(s){let r,n,o,l,c,a;return{c(){r=Te("svg"),n=Te("glyph"),o=Te("g"),l=Te("path"),this.h()},l(h){r=Re(h,"svg",{height:!0,width:!0,style:!0});var f=j(r);n=Re(f,"glyph",{"glyph-name":!0,unicode:!0,"horiz-adv-x":!0}),j(n).forEach(k),o=Re(f,"g",{class:!0});var m=j(o);l=Re(m,"path",{d:!0,transform:!0,style:!0}),j(l).forEach(k),m.forEach(k),f.forEach(k),this.h()},h(){S(n,"glyph-name","minus-circle"),S(n,"unicode",""),S(n,"horiz-adv-x","50"),S(l,"d","M500.2 62.5c-241.8 0-437.7 195.89999999999998-437.7 437.3 0 241.8 195.89999999999998 437.7 437.7 437.7 241.40000000000003 0 437.3-195.89999999999998 437.3-437.7 0-241.40000000000003-195.89999999999998-437.3-437.3-437.3z m301.59999999999997 466.5c-0.6999999999999318 9-2.199999999999932 19.100000000000023-4.699999999999932 30.299999999999955h-593.9000000000001c-2.499999999999943-11.199999999999932-4.299999999999926-21.699999999999932-5.0999999999999375-31.399999999999977-0.6999999999999886-9.699999999999932-1.0999999999999943-19.799999999999955-1.0999999999999943-30.299999999999955 0-9 0.4000000000000057-18 1.0999999999999943-26.700000000000045 0.700000000000017-9 2.5-19.099999999999966 5.099999999999994-30.299999999999955h593.9000000000001c2.4999999999998863 11.199999999999989 3.9999999999998863 21.599999999999966 4.699999999999818 31.399999999999977 1.1000000000000227 9.699999999999989 1.400000000000091 19.80000000000001 1.400000000000091 30.30000000000001 0.09999999999990905 9.099999999999966-0.3000000000000682 17.69999999999999-1.400000000000091 26.69999999999999z"),S(l,"transform","scale(.03)"),O(l,"fill","lightgrey"),O(l,"stroke","black"),O(l,"stroke-width","20px"),S(o,"class","currentLayer"),S(r,"height","30"),S(r,"width","30"),O(r,"position","relative"),O(r,"float","right")},m(h,f){Q(h,r,f),P(r,n),P(r,o),P(o,l),c||(a=ue(r,"click",function(){Pr(s[6](s[0].id))&&s[6](s[0].id).apply(this,arguments)}),c=!0)},p(h,f){s=h},d(h){h&&k(r),c=!1,a()}}}function js(s){let r,n,o,l,c,a;function h(p){s[18](p)}function f(p){s[19](p)}function m(p){s[20](p)}let v={id:s[0].admin.id,operator:s[3],update:s[4],readonly:s[10]};return s[9]!==void 0&&(v.status=s[9]),s[0]!==void 0&&(v.dep=s[0]),s[0].admin!==void 0&&(v.user=s[0].admin),n=new pu({props:v}),Ie.push(()=>$e(n,"status",h)),Ie.push(()=>$e(n,"dep",f)),Ie.push(()=>$e(n,"user",m)),{c(){r=J("div"),Ye(n.$$.fragment)},l(p){r=K(p,"DIV",{});var b=j(r);je(n.$$.fragment,b),b.forEach(k)},m(p,b){Q(p,r,b),Ze(n,r,null),a=!0},p(p,b){const w={};b[0]&1&&(w.id=p[0].admin.id),b[0]&8&&(w.operator=p[3]),b[0]&16&&(w.update=p[4]),b[0]&1024&&(w.readonly=p[10]),!o&&b[0]&512&&(o=!0,w.status=p[9],Qe(()=>o=!1)),!l&&b[0]&1&&(l=!0,w.dep=p[0],Qe(()=>l=!1)),!c&&b[0]&1&&(c=!0,w.user=p[0].admin,Qe(()=>c=!1)),n.$set(w)},i(p){a||(se(n.$$.fragment,p),a=!0)},o(p){de(n.$$.fragment,p),a=!1},d(p){p&&k(r),Xe(n)}}}function Zs(s){let r,n,o=dr(s[0].staff),l=[];for(let a=0;a<o.length;a+=1)l[a]=Xs(xs(s,o,a));const c=a=>de(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();r=_t()},l(a){for(let h=0;h<l.length;h+=1)l[h].l(a);r=_t()},m(a,h){for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(a,h);Q(a,r,h),n=!0},p(a,h){if(h[0]&1561){o=dr(a[0].staff);let f;for(f=0;f<o.length;f+=1){const m=xs(a,o,f);l[f]?(l[f].p(m,h),se(l[f],1)):(l[f]=Xs(m),l[f].c(),se(l[f],1),l[f].m(r.parentNode,r))}for(Sn(),f=o.length;f<l.length;f+=1)c(f);Cn()}},i(a){if(!n){for(let h=0;h<o.length;h+=1)se(l[h]);n=!0}},o(a){l=l.filter(Boolean);for(let h=0;h<l.length;h+=1)de(l[h]);n=!1},d(a){a&&k(r),su(l,a)}}}function Xs(s){let r,n,o,l,c,a;function h(p){s[21](p)}function f(p){s[22](p)}function m(p){s[23](p,s[30],s[31],s[32])}let v={operator:s[3],update:s[4],readonly:s[10]};return s[9]!==void 0&&(v.status=s[9]),s[0]!==void 0&&(v.dep=s[0]),s[30]!==void 0&&(v.user=s[30]),r=new pu({props:v}),Ie.push(()=>$e(r,"status",h)),Ie.push(()=>$e(r,"dep",f)),Ie.push(()=>$e(r,"user",m)),{c(){Ye(r.$$.fragment),c=re()},l(p){je(r.$$.fragment,p),c=ie(p)},m(p,b){Ze(r,p,b),Q(p,c,b),a=!0},p(p,b){s=p;const w={};b[0]&8&&(w.operator=s[3]),b[0]&16&&(w.update=s[4]),b[0]&1024&&(w.readonly=s[10]),!n&&b[0]&512&&(n=!0,w.status=s[9],Qe(()=>n=!1)),!o&&b[0]&1&&(o=!0,w.dep=s[0],Qe(()=>o=!1)),!l&&b[0]&1&&(l=!0,w.user=s[30],Qe(()=>l=!1)),r.$set(w)},i(p){a||(se(r.$$.fragment,p),a=!0)},o(p){de(r.$$.fragment,p),a=!1},d(p){p&&k(c),Xe(r,p)}}}function Qs(s){let r,n,o,l,c,a,h,f;return{c(){r=J("div"),n=Te("svg"),o=Te("title"),l=St("add-user"),c=Te("glyph"),a=Te("path"),this.h()},l(m){r=K(m,"DIV",{class:!0,style:!0});var v=j(r);n=Re(v,"svg",{style:!0});var p=j(n);o=Re(p,"title",{});var b=j(o);l=Ct(b,"add-user"),b.forEach(k),c=Re(p,"glyph",{"glyph-name":!0,unicode:!0,"horiz-adv-x":!0}),j(c).forEach(k),a=Re(p,"path",{d:!0,transform:!0,style:!0}),j(a).forEach(k),p.forEach(k),v.forEach(k),this.h()},h(){S(c,"glyph-name","contact-add"),S(c,"unicode",""),S(c,"horiz-adv-x","50"),S(a,"d","M134.1 761.6c-14.5 0-26.39999999999999-11.899999999999977-26.39999999999999-26.399999999999977v-523.5c0-14.500000000000057 11.899999999999991-26.400000000000034 26.39999999999999-26.400000000000034h639.8c14.5 0 26.399999999999977 11.899999999999977 26.399999999999977 26.399999999999977v239.40000000000003c15.800000000000068 2.3999999999999773 30.90000000000009 6.2999999999999545 45.40000000000009 11.899999999999977v-288.7c0-14.5-11.900000000000091-26.400000000000006-26.40000000000009-26.400000000000006h-730.4c-14.499999999999972 0-26.399999999999977 11.900000000000006-26.399999999999977 26.400000000000006v598.7c0 14.399999999999977 11.900000000000006 26.299999999999955 26.400000000000006 26.299999999999955h479.30000000000007c-7.400000000000091-11.899999999999977-13.700000000000045-24.59999999999991-18.700000000000045-37.69999999999993h-415.4z m164.70000000000002-245h-19.400000000000034c-41.69999999999999 0-75.39999999999998 33.799999999999955-75.39999999999998 75.39999999999998v21c0 13.100000000000023 10.699999999999989 23.799999999999955 23.80000000000001 23.799999999999955h251.7c13.100000000000023 0 23.899999999999977-10.699999999999932 23.899999999999977-23.799999999999955v-21c0-41.60000000000002-33.799999999999955-75.39999999999998-75.39999999999998-75.39999999999998h-19.600000000000023c-10.099999999999966 0-18.299999999999955-8.100000000000023-18.299999999999955-18.30000000000001 0-3.8000000000000114 1.5-7.300000000000011 4.199999999999989-10 11.300000000000011-11 20.899999999999977-25.80000000000001 27.69999999999999-41.80000000000001 1.5 1.1000000000000227 2.8999999999999773 1.8000000000000114 4.5 1.8000000000000114 10.899999999999977 0 23.80000000000001-24.19999999999999 23.80000000000001-40.80000000000001 0-16.399999999999977-1.5-29.80000000000001-12.300000000000011-29.80000000000001-1.3000000000000114 0-2.8000000000000114 0.30000000000001137-4 0.6000000000000227-0.8000000000000114-44.69999999999999-12.100000000000023-100.40000000000003-80.30000000000001-100.40000000000003-71.19999999999999 0-79.5 55.60000000000002-80.19999999999999 100.20000000000005-1-0.20000000000004547-2-0.4000000000000341-2.8999999999999773-0.4000000000000341-11 0-12.5 13.400000000000034-12.5 29.80000000000001 0 16.5 12.899999999999977 40.80000000000001 23.799999999999955 40.80000000000001 1.3000000000000114 0 2.6000000000000227-0.4000000000000341 3.8000000000000114-1.1000000000000227 6.800000000000011 15.699999999999989 16.19999999999999 30.30000000000001 27.30000000000001 41 2.8000000000000114 2.6000000000000227 4.199999999999989 6.300000000000011 4.199999999999989 10-0.19999999999998863 10.199999999999989-8.399999999999977 18.400000000000034-18.399999999999977 18.400000000000034z m381.2-189.3c0-9.699999999999989-7.899999999999977-17.80000000000001-17.799999999999955-17.80000000000001h-211.00000000000006c6 13.600000000000023 10.300000000000011 30.100000000000023 12.199999999999989 50.60000000000002 4.600000000000023 2.8999999999999773 7.900000000000034 7.399999999999977 10.700000000000045 12.799999999999955h188.10000000000002c9.699999999999932 0 17.799999999999955-7.899999999999977 17.799999999999955-17.599999999999966v-28z m-2.1000000000000227 151.09999999999997c1.1000000000000227-2.3999999999999773 2.1000000000000227-5 2.1000000000000227-7.699999999999989v-28c0-9.699999999999989-7.899999999999977-17.80000000000001-17.799999999999955-17.80000000000001h-183.80000000000007c-5 18.900000000000034-17.099999999999966 38.700000000000045-34.299999999999955 43.900000000000034l-1.6000000000000227 2.8000000000000114v16.69999999999999h213.20000000000005c7.2999999999999545-3.6999999999999886 14.699999999999932-7 22.199999999999932-9.900000000000034z m-125 125.10000000000002c8.899999999999977-23.299999999999955 21.5-44.5 37.39999999999998-63.200000000000045h-71.69999999999993c9.399999999999977 15 15.100000000000023 32.700000000000045 15.100000000000023 51.60000000000002v11.5h19.199999999999932v0.10000000000002274z m332.20000000000005-55.39999999999998c-30.700000000000045-31.100000000000023-73.10000000000002-50.60000000000002-119.70000000000005-52.400000000000034h-6.2999999999999545c-49.700000000000045 0-94 19.900000000000034-126.5 52.400000000000034-32.10000000000002 32.10000000000002-52.39999999999998 76.79999999999995-52.39999999999998 126 0 25.299999999999955 5.399999999999977 49.299999999999955 14.899999999999977 71 9 20.699999999999932 21.699999999999932 39.69999999999993 37.5 55.60000000000002 32.5 32.09999999999991 76.79999999999995 52 126.5 52 98.39999999999998 0 178.39999999999998-80 178.39999999999998-178.4000000000001 0-49.39999999999998-19.899999999999977-94.09999999999991-52.39999999999998-126.19999999999993z m-41.60000000000002 152.19999999999993h-58.700000000000045v58.30000000000007h-52v-58.30000000000007h-58.299999999999955v-52.39999999999998h58.299999999999955v-58.299999999999955h52v58.299999999999955h58.700000000000045v52.39999999999998z"),S(a,"transform","scale(.04)"),O(a,"fill","grey"),O(n,"position","relative"),O(n,"left","45%"),O(n,"height","40, width=40"),S(r,"class","add_oper"),O(r,"display",s[8])},m(m,v){Q(m,r,v),P(r,n),P(n,o),P(o,l),P(n,c),P(n,a),h||(f=ue(r,"click",s[5]),h=!0)},p(m,v){v[0]&256&&O(r,"display",m[8])},d(m){m&&k(r),h=!1,f()}}}function N1(s){let r,n,o,l,c,a=s[0].id!=="0"&&Js(s),h=s[0].admin&&js(s),f=s[0].staff&&Zs(s),m=s[1]&&Qs(s);return{c(){a&&a.c(),r=re(),n=J("div"),h&&h.c(),o=re(),f&&f.c(),l=re(),m&&m.c(),this.h()},l(v){a&&a.l(v),r=ie(v),n=K(v,"DIV",{class:!0,style:!0});var p=j(n);h&&h.l(p),o=ie(p),f&&f.l(p),l=ie(p),m&&m.l(p),p.forEach(k),this.h()},h(){S(n,"class","content svelte-wxdsc0"),O(n,"max-height","0px")},m(v,p){a&&a.m(v,p),Q(v,r,p),Q(v,n,p),h&&h.m(n,null),P(n,o),f&&f.m(n,null),P(n,l),m&&m.m(n,null),s[24](n),c=!0},p(v,p){v[0].id!=="0"?a?a.p(v,p):(a=Js(v),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),v[0].admin?h?(h.p(v,p),p[0]&1&&se(h,1)):(h=js(v),h.c(),se(h,1),h.m(n,o)):h&&(Sn(),de(h,1,1,()=>{h=null}),Cn()),v[0].staff?f?(f.p(v,p),p[0]&1&&se(f,1)):(f=Zs(v),f.c(),se(f,1),f.m(n,l)):f&&(Sn(),de(f,1,1,()=>{f=null}),Cn()),v[1]?m?m.p(v,p):(m=Qs(v),m.c(),m.m(n,null)):m&&(m.d(1),m=null)},i(v){c||(se(h),se(f),c=!0)},o(v){de(h),de(f),c=!1},d(v){v&&(k(r),k(n)),a&&a.d(v),h&&h.d(),f&&f.d(),m&&m.d(),s[24](null)}}}function z1(s,r,n){let o,l,c;Le(s,Qt,q=>n(25,o=q)),Le(s,Tr,q=>n(15,l=q)),Le(s,Ei,q=>n(26,c=q)),Le(s,qn,q=>n(27,q));let{dep:a}=r,{owner:h}=r,{operator:f}=r,m,v="none",p=c,b=!1,w;$t(()=>{a.id==="0"&&n(11,w.style.maxHeight=200+w.scrollHeight+"px",w);let q=document.getElementsByClassName("add_oper");for(let te in q)b||(q[te].scrollIntoView&&q[te].scrollIntoView(!1),N(new Event("expand")))});let{update:A}=r,{edited_display:T}=r;function B(q){T&&(a.admin.email===h||!f.abonent)&&(q.currentTarget.readOnly=!1)}async function L(q){let te={};te.proj="kolmit",te.func="changedep",te.abonent=f.abonent,te.em=f.email,te.dep=a;let Ce=await(await fetch("/operator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:te})})).json();n(0,a=Ce.dep),console.log(Ce.rows.affectedRows)}async function Z(q){let te={};te.proj="kolmit",te.func="addoper",te.abonent=f.abonent,te.em=f.email,te.lang=o,te.dep_id=a.id;let Ce=await(await fetch("/operator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:te})})).json();n(0,a=Ce.dep),n(11,w.style.maxHeight=200+w.scrollHeight+"px",w)}let{RemoveDep:z}=r;function N(q){w&&q.type!=="expand"&&(w.style.maxHeight=="0px"?n(11,w.style.maxHeight=w.scrollHeight+"px",w):n(11,w.style.maxHeight="0px",w)),console.log(w.style.maxHeight)}function H(){a.alias=this.value,n(0,a)}function U(q){Ie[q?"unshift":"push"](()=>{m=q,n(7,m)})}function G(q){p=q,n(9,p)}function fe(q){a=q,n(0,a)}function x(q){s.$$.not_equal(a.admin,q)&&(a.admin=q,n(0,a))}function D(q){p=q,n(9,p)}function ee(q){a=q,n(0,a)}function pe(q,te,Ge,Ce){Ge[Ce]=q,n(0,a)}function ve(q){Ie[q?"unshift":"push"](()=>{w=q,n(11,w)})}return s.$$set=q=>{"dep"in q&&n(0,a=q.dep),"owner"in q&&n(2,h=q.owner),"operator"in q&&n(3,f=q.operator),"update"in q&&n(4,A=q.update),"edited_display"in q&&n(1,T=q.edited_display),"RemoveDep"in q&&n(6,z=q.RemoveDep)},s.$$.update=()=>{s.$$.dirty[0]&32770&&l&&(n(1,T=l),n(10,b=!T)),s.$$.dirty[0]&11&&T&&(!f.abonent&&a.id==="0"||!f.abonent&&!a.admin||f.abonent&&f.email===a.admin.email)&&n(8,v="block")},[a,T,h,f,A,Z,z,m,v,p,b,w,B,L,N,l,H,U,G,fe,x,D,ee,pe,ve]}class H1 extends tt{constructor(r){super(),nt(this,r,z1,N1,et,{dep:0,owner:2,operator:3,update:4,edited_display:1,AddOper:5,RemoveDep:6},null,[-1,-1])}get AddOper(){return this.$$.ctx[5]}}function $s(s,r,n){const o=s.slice();return o[18]=r[n],o[19]=r,o[20]=n,o}function eu(s){let r,n,o,l,c,a,h;function f(b){s[8](b,s[18],s[19],s[20])}function m(b){s[9](b)}function v(b){s[10](b)}let p={owner:s[18].admin.email,operator:s[0],update:s[2],RemoveDep:s[6]};return s[18]!==void 0&&(p.dep=s[18]),s[1]!==void 0&&(p.tarif=s[1]),s[4]!==void 0&&(p.edited_display=s[4]),o=new H1({props:p}),Ie.push(()=>$e(o,"dep",f)),Ie.push(()=>$e(o,"tarif",m)),Ie.push(()=>$e(o,"edited_display",v)),{c(){r=J("br"),n=re(),Ye(o.$$.fragment),this.h()},l(b){r=K(b,"BR",{class:!0}),n=ie(b),je(o.$$.fragment,b),this.h()},h(){S(r,"class","svelte-1iqzrvs")},m(b,w){Q(b,r,w),Q(b,n,w),Ze(o,b,w),h=!0},p(b,w){s=b;const A={};w&4&&(A.owner=s[18].admin.email),w&1&&(A.operator=s[0]),w&4&&(A.update=s[2]),!l&&w&4&&(l=!0,A.dep=s[18],Qe(()=>l=!1)),!c&&w&2&&(c=!0,A.tarif=s[1],Qe(()=>c=!1)),!a&&w&16&&(a=!0,A.edited_display=s[4],Qe(()=>a=!1)),o.$set(A)},i(b){h||(se(o.$$.fragment,b),h=!0)},o(b){de(o.$$.fragment,b),h=!1},d(b){b&&(k(r),k(n)),Xe(o,b)}}}function tu(s){let r,n=s[0].role==="admin"&&nu(s);return{c(){n&&n.c(),r=_t()},l(o){n&&n.l(o),r=_t()},m(o,l){n&&n.m(o,l),Q(o,r,l)},p(o,l){o[0].role==="admin"?n?n.p(o,l):(n=nu(o),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},d(o){o&&k(r),n&&n.d(o)}}}function nu(s){let r,n,o,l,c,a,h;return{c(){r=Te("svg"),n=Te("title"),o=St("Add Dep"),l=Te("glyph"),c=Te("path"),this.h()},l(f){r=Re(f,"svg",{class:!0,height:!0,width:!0,style:!0});var m=j(r);n=Re(m,"title",{class:!0});var v=j(n);o=Ct(v,"Add Dep"),v.forEach(k),l=Re(m,"glyph",{"glyph-name":!0,unicode:!0,"horiz-adv-x":!0,class:!0}),j(l).forEach(k),c=Re(m,"path",{d:!0,transform:!0,style:!0,class:!0}),j(c).forEach(k),m.forEach(k),this.h()},h(){S(n,"class","svelte-1iqzrvs"),S(l,"glyph-name","plus-circle"),S(l,"unicode",""),S(l,"horiz-adv-x","50"),S(l,"class","svelte-1iqzrvs"),S(c,"d","M500.2 62.5c-241.8 0-437.7 195.89999999999998-437.7 437.3 0 241.8 195.89999999999998 437.7 437.7 437.7 241.40000000000003 0 437.3-195.89999999999998 437.3-437.7 0-241.40000000000003-195.89999999999998-437.3-437.3-437.3z m301.59999999999997 466.5c-0.6999999999999318 9-2.199999999999932 19.100000000000023-4.699999999999932 30.299999999999955h-237.70000000000005v237.80000000000007c-11.199999999999932 2.5-21.600000000000023 4.2999999999999545-31.399999999999977 5.100000000000023-9.700000000000045 0.6999999999999318-19.80000000000001 1.099999999999909-30.30000000000001 1.099999999999909-9 0-17.69999999999999-0.39999999999997726-26.69999999999999-1.099999999999909-9-0.7000000000000455-19.100000000000023-2.5-30.30000000000001-5.100000000000023v-237.70000000000005h-237.5c-2.5-11.199999999999932-4.299999999999983-21.699999999999932-5.099999999999994-31.399999999999977-0.6999999999999886-9.700000000000045-1.0999999999999943-19.80000000000001-1.0999999999999943-30.30000000000001 0-9 0.4000000000000057-17.69999999999999 1.0999999999999943-26.69999999999999 0.700000000000017-9 2.5-19.100000000000023 5.099999999999994-30.30000000000001h237.40000000000003v-237.5c11.199999999999989-2.5 21.599999999999966-4 31.399999999999977-4.699999999999989 9.699999999999989-1.0999999999999943 19.80000000000001-1.4000000000000057 30.30000000000001-1.4000000000000057 9 0 17.999999999999943 0.4000000000000057 26.69999999999999 1.4000000000000057 9 0.6999999999999886 19.100000000000023 2.1999999999999886 30.299999999999955 4.699999999999989v237.40000000000003h237.80000000000007c2.5 11.199999999999989 4 21.599999999999966 4.699999999999932 31.399999999999977 1.1000000000000227 9.699999999999989 1.400000000000091 19.80000000000001 1.400000000000091 30.30000000000001 0.09999999999990905 9.099999999999966-0.3000000000000682 18.099999999999966-1.400000000000091 26.69999999999999z"),S(c,"transform","scale(.04)"),O(c,"fill","lightgrey"),S(c,"class","svelte-1iqzrvs"),S(r,"class","add_dep svelte-1iqzrvs"),S(r,"height","50"),S(r,"width","50"),O(r,"float","right")},m(f,m){Q(f,r,m),P(r,n),P(n,o),P(r,l),P(r,c),a||(h=ue(r,"click",s[5]),a=!0)},p:We,d(f){f&&k(r),a=!1,h()}}}function V1(s){let r,n,o,l,c,a,h=dr(s[2]),f=[];for(let p=0;p<h.length;p+=1)f[p]=eu($s(s,h,p));const m=p=>de(f[p],1,1,()=>{f[p]=null});let v=s[4]&&tu(s);return{c(){r=J("div"),n=J("div");for(let p=0;p<f.length;p+=1)f[p].c();o=re(),v&&v.c(),l=re(),c=J("div"),this.h()},l(p){r=K(p,"DIV",{style:!0,class:!0});var b=j(r);n=K(b,"DIV",{class:!0,style:!0});var w=j(n);for(let A=0;A<f.length;A+=1)f[A].l(w);o=ie(w),v&&v.l(w),l=ie(w),c=K(w,"DIV",{class:!0,style:!0}),j(c).forEach(k),w.forEach(k),b.forEach(k),this.h()},h(){S(c,"class","empty svelte-1iqzrvs"),O(c,"height","400px"),S(n,"class","deps_div svelte-1iqzrvs"),O(n,"height","100vh"),O(n,"overflow-y","scroll"),O(r,"display",s[3]),S(r,"class","svelte-1iqzrvs")},m(p,b){Q(p,r,b),P(r,n);for(let w=0;w<f.length;w+=1)f[w]&&f[w].m(n,null);P(n,o),v&&v.m(n,null),P(n,l),P(n,c),a=!0},p(p,[b]){if(b&87){h=dr(p[2]);let w;for(w=0;w<h.length;w+=1){const A=$s(p,h,w);f[w]?(f[w].p(A,b),se(f[w],1)):(f[w]=eu(A),f[w].c(),se(f[w],1),f[w].m(n,o))}for(Sn(),w=h.length;w<f.length;w+=1)m(w);Cn()}p[4]?v?v.p(p,b):(v=tu(p),v.c(),v.m(n,l)):v&&(v.d(1),v=null),(!a||b&8)&&O(r,"display",p[3])},i(p){if(!a){for(let b=0;b<h.length;b+=1)se(f[b]);a=!0}},o(p){f=f.filter(Boolean);for(let b=0;b<f.length;b+=1)de(f[b]);a=!1},d(p){p&&k(r),su(f,p),v&&v.d()}}}function G1(s,r,n){let o,l,c;Le(s,qn,H=>n(12,o=H)),Le(s,Ci,H=>n(13,l=H)),Le(s,Qt,H=>n(14,c=H));const{forEach:a,findIndex:h}=hu;let{operator:f}=r,{view:m}=r,v="none",p,b=c,w=l;$t(async()=>{o.OperatorWaiting({type:"user",abonent:f.abonent,em:f.em})});let A=!1,{tarif:T}=r;async function B(){if(f.role==="admin"){let H={};H.proj="kolmit",H.func="adddep",H.em=f.email,H.lang=b,H.abonent=f.abonent,H.id=p;const x=(await(await fetch("/operator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:H})})).json()).dep;n(2,w[H.id]=x,w)}}async function L(H){let U=h(w,{id:H});if(confirm("Delete Dep "+(w[U].alias?w[U].alias:"")+"?")){let G={};G.proj="kolmit",G.func="remdep",G.role=f,G.dep=H,G.em=f.email,G.lang=b,G.abonent=f.abonent,G.uid=f.uid;const x=await(await fetch("/operator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:G})})).json();n(2,w=x.users)}}function Z(H,U,G,fe){G[fe]=H,n(2,w)}function z(H){T=H,n(1,T)}function N(H){A=H,n(4,A)}return s.$$set=H=>{"operator"in H&&n(0,f=H.operator),"view"in H&&n(7,m=H.view),"tarif"in H&&n(1,T=H.tarif)},s.$$.update=()=>{s.$$.dirty&128&&(m==="cc"?n(3,v="block"):n(3,v="none")),s.$$.dirty&5&&w&&w.length>0&&a(w,(H,U)=>{H.admin&&H.admin.email===f.email&&n(0,f.role=H.admin.role,f),p=U})},[f,T,w,v,A,B,L,m,Z,z,N]}class q1 extends tt{constructor(r){super(),nt(this,r,G1,V1,et,{operator:0,view:7,tarif:1})}}class x1{constructor(r,n,o){this.con=new RTCPeerConnection(n),this.signal=r.signal,this.rtc=r,this.pc_key=o,this.params={}}async SendDesc(r){let n=this,o={};return o.proj="kolmit",o.func="call",o.abonent=n.rtc.abonent,o.type=this.rtc.type,o.em=this.rtc.em,o.uid=this.rtc.uid,o.desc=r,o.status="call",o.oper_uid=this.rtc.oper_uid,await this.signal.SendMessage(o)}async SendCand(r){let n=this,o={};return o.proj="kolmit",o.func="call",o.type=this.rtc.type,o.uid=this.rtc.uid,o.em=this.rtc.em,o.cand=r,o.status="call",o.abonent=n.rtc.abonent,o.oper_uid=this.rtc.oper_uid,await this.signal.SendMessage(o)}async SendOffer(r){let n={};return n.proj="kolmit",n.func="offer",n.abonent=this.rtc.abonent,n.type=this.rtc.type,n.uid=this.rtc.uid,n.em=this.rtc.em,n.desc=this.params.loc_desc,n.cand=this.params.loc_cand,n.status="offer",await this.signal.SendMessage(n)}StartEvents(){let r=this;this.con.ontrack=function(o){r.pc_key!=="reserve"&&(r.rtc.GetRemoteAudio()!==o.streams[0]&&(r.rtc.remoteStream=o.streams[0],r.rtc.remoteStream.onaddtrack=function(l){console.log("addtrack in remote stream",r)}),r.rtc.remoteStream&&(o.track.kind==="audio"&&(r.rtc.SetRemoteAudio(null),r.rtc.SetRemoteAudio(r.rtc.remoteStream)),o.track.kind==="video"&&(r.rtc.SetRemoteVideo(r.rtc.remoteStream),r.rtc.DC.SendDCVideoOK(()=>{}))))};let n;this.con.onicecandidate=o=>{let l=this;o.candidate&&(this.params.loc_cand||(this.params.loc_cand=[]),this.params.loc_cand.push(o.candidate),n||(n=setTimeout(()=>{if(this.rtc.DC&&this.rtc.DC.dc.readyState==="open"){let c="";this.rtc.type&&this.rtc.type.offerToReceiveVideo===1&&(c={confirm:"Do you mind to turn on the cameras?"}),this.rtc.DC.SendDCOffer(l.pc_key,c),clearTimeout(n)}else this.rtc.DC&&this.rtc.DC.dc.readyState!=="open"&&(this.SendOffer(o.candidate),clearTimeout(n))},100)))},this.con.oniceconnectionstatechange=function(o){r.rtc.onIceStateChange(r,o)},this.con.onremovestream=function(o){},this.con.onsignalingstatechange=function(o){},this.con.onconnectionstatechange=function(o){console.log()}}onCreateAnswerSuccess(r){let n=this;console.log("Answer from pcPull 2:",this),console.log("setLocalDescription start",n),n.con.setLocalDescription(r).then(function(){n.params.loc_desc=n.con.localDescription,console.log("onSetLocalDescriptionSuccess",n),n.SendDesc(r)},n.onSetAnswerError)}setRemoteDesc(r){let n=this;console.log("setRemoteDescription start",n),console.log("Peer connectionState:"+this.con.connectionState,n),this.con.setRemoteDescription(r).then(function(){n.params.rem_desc=n.con.remoteDescription,n.con.remoteDescription.type==="offer"&&n.con.createAnswer().then(o=>n.onCreateAnswerSuccess(o),n.onCreateAnswerError)},function(o){console.log("Failed to set remote description: "+o.toString(),this)})}onCreateAnswerError(r){console.log("Failed to create answer: "+r.toString(),this)}onCreateOfferSuccess(r){let n=this;console.log("Offer created",n),console.log("setLocalDescription start",n),n.con.setLocalDescription(r).then(function(){n.params.loc_desc=n.con.localDescription,console.log(" setLocalDescription complete",n)},n.onSetOfferError)}onCreateVideoOfferSuccess(r,n){let o=this;console.log("Offer created",o),console.log("setLocalDescription start",o),o.con.setLocalDescription(r).then(function(){o.params.loc_desc=o.con.localDescription,console.log(" setLocalDescription complete",o),o.rtc.DC.SendDCDesc(r,o.pc_key)},o.onSetOfferError)}onSetOfferError(r){console.log("Failed to set offer: "+r.toString(),this)}onSetAnswerError(r){console.log("Failed to set session description: "+r.toString(),this)}onAddIceCandidateSuccess(r){console.log(" addIceCandidate success",this)}onAddIceCandidateError(r,n){console.log(" failed to add ICE Candidate: "+n.toString(),this)}onCreateOfferError(r){console.log("Failed to create session description: "+r.toString(),this)}onAddVideo(r){let n=this,o="Do you mind to turn on the cameras?";n.rtc.DC&&n.rtc.DC.dc.readyState==="open"&&n.rtc.DC.SendData({confirm:o})}onCreateSessionDescriptionError(r){}Cancel(){this.close()}}class J1{constructor(r,n){this.rtc=r,this.pc=n,this.call_num=3,this.forward}CreateDC(){this.dc=pc.con.createDataChannel(pc.pc_key+" data channel")}}const gu=$0();class K1 extends J1{constructor(r,n){super(r,n);let o=this;o.cnt_call=0,this.dc=n.con.createDataChannel(n.pc_key+" data channel"),this.dc.onopen=()=>{o.dc.readyState==="open"&&console.log(o.pc.pc_key+" datachannel open"),this.dc.onclose=()=>{}},n.StartEvents(),n.con.ondatachannel=h=>{console.log("Receive Channel Callback"),this.dc=h.channel};let l="",c=[],a=0;this.dc.onmessage=function(h){try{let f=JSON.parse(h.data);if(f.type==="eom"){l&&(o.rtc.OnMessage(JSON.parse(l),o),gu.set(JSON.parse(l))),l="";return}if(l+=f.slice,f.file,f.type==="eof"){const m=new Blob(c);if(c=[],a=0,confirm("Получен файл: "+f.file+". Размер: "+f.length+" Сохранить?")){let v=document.getElementById("download_href");v.text("Получен файл: "+f.file+". Размер: "+f.length+" Сохранить?"),v.attributes.href="URL.createObjectURL(received)",v.attributes.download=f.file,v.click()}setTimeout(function(){document.getElementById("dataProgress").style.display="none"},2e3);return}}catch{if(l="",!h.data.byteLength)return}}}SendFile(r,n){try{if(this.dc.readyState==="open"){let o=16384;const l=Math.ceil(r.byteLength/o);this.dc.send(JSON.stringify({file:n,length:r.byteLength}),function(c){console.log(c)});for(let c=0,a=0;c<l;++c,a+=o){const h=r.slice(a,a+o);document.getElementById("dataProgress").attributes.value=a+o,this.dc.send(h,function(f){console.log(f)})}setTimeout(function(){document.getElementById("dataProgress").style.display="none"},2e3),this.dc.send(JSON.stringify({type:"eof",file:n,length:r.byteLength}),function(c){console.log(c)})}}catch(o){console.log(o)}}SendData(r,n){try{if(this.dc.readyState==="open"){r=JSON.stringify(r);let o=16384;const l=Math.ceil(r.length/o);for(let c=0,a=0;c<l;++c,a+=o)this.dc.send(JSON.stringify({slice:r.substr(a,o)}));this.dc.send(JSON.stringify({type:"eom"}))}n&&n()}catch(o){console.log(o)}}SendDCHangup(r){let n={};n.proj="kolmit",n.func="mute",n.type=this.rtc.type,this.SendData(n,r)}SendDCClose(r){let n={};n.proj="kolmit",n.func="close",n.type=this.rtc.type,this.SendData(n,r)}SendDCTalk(r){let n={};n.proj="kolmit",n.func="talk",n.type=this.rtc.type,this.SendData(n,r)}SendDCCand(r,n,o){let l={};l.proj="kolmit",l.func="offer",l.cand=r,l.trans=n,l.abonent=this.rtc.abonent,l.msg=o,this.SendData(l)}SendDCDesc(r,n,o){let l={};l.proj="kolmit",l.func="offer",l.desc=r,l.trans=n,l.abonent=this.rtc.abonent,l.msg=o,this.SendData(l)}SendDCOffer(r,n){let o={};o.proj="kolmit",o.func="offer",o.desc=this.pc.params.loc_desc,o.cand=this.pc.params.loc_cand,o.trans=r,o.abonent=this.rtc.abonent,o.msg=n,this.SendData(o)}SendDCVideoOK(r){let n={};n.proj="kolmit",n.func="video",n.type=this.rtc.type,this.SendData(n,r)}SendRedirect(r,n){let o={};if(o.proj="kolmit",o.func="redirect",o.abonent=r,this.dc.readyState==="open"){this.SendData(o);let l=new Date().toLocaleString("es-CL");n(l)}}}class Y1{constructor(r,n,o){this.signal=o,this.type=r.type,this.abonent=r.abonent,this.em=r.em,this.role=r.role,this.uid=n,this.status,this.pcPull={},this.main_pc,this.url,this.localStream,this.remoteStream,this.startTime,this.phone=""}async SendCheck(){let r={};r.proj="kolmit",r.func="check",r.status="check",r.type=this.type,r.abonent=this.abonent,r.em=this.em,r.uid=this.uid,this.signal.SendMessage(r,n=>{this.status="check"})}SendVideoOffer(r){this.pcPull[r].params.loc_desc="",this.pcPull[r].params.loc_cand="",this.pcPull[r].con.createOffer(this.mode={offerToReceiveAudio:1,offerToReceiveVideo:1,iceRestart:1}).then(n=>this.pcPull[r].onCreateVideoOfferSuccess(n),this.pcPull[r].onCreateOfferError)}onIceStateChange(r,n){r&&r.con&&(r.con.iceConnectionState==="new"&&console.log(r.pc_key+" ICE state change event: new",this),r.con.iceConnectionState==="checking"&&(console.log(r.pc_key+" ICE state change event: checking",this),this.checking_tmr=setTimeout(()=>{r.con.restartIce()},5e3)),r.con.iceConnectionState==="disconnected"&&(console.log(r.pc_key+" ICE state change event: disconnected",this),r.con.restartIce()),r.con.iceConnectionState==="connected"&&(clearTimeout(this.checking_tmr),console.log(r.pc_key+" ICE state change event: connected",this),this.main_pc=r.pc_key),r.con.iceConnectionState==="failed"&&(console.log(r.pc_key+" ICE state change event: failed",this),r.con.restartIce()),r.con.iceConnectionState==="completed"&&console.log(r.pc_key+" ICE state change event: completed",this),console.log(r.pc_key+" ICE state change event: "+n.type,this))}TransFile(){async function r(){const n=this.fileInput.files[0];if(n||console.log("No file chosen"),n.size===0)return;dataProgress.style.display="block",dataProgress.attributes.max=n.size;let o=new FileReader;o.onload=l=>{console.log("FileRead.onload ",l),this.DC.SendFile(l.target.result,n.name)},o.readAsArrayBuffer(n)}this.fileInput.removeEventListener("change",this.fileInput.onchange),this.fileInput.onchange=r,this.fileInput.dispatchEvent(new Event("click"))}GetUserMedia(r,n){navigator.mediaDevices.getUserMedia(r).then(o=>this.gotStream(o,n)).catch(function(o){(o.name==="NotFoundError"||o.name==="NotReadableError")&&(r.audio&&alert("Something wrong with mic?"),r.video&&alert("Something wrong with camera?"),n(!1))})}get RemoteStream(){return this.remoteStream}async InitRTC(r,n){this.conf=cu;let o={iceTransportPolicy:"all",lifetimeDuration:this.conf.lifetimeDuration,rtcpMuxPolicy:"require",bundlePolicy:"balanced",iceServers:[this.conf.stun,this.conf.turn]};this.pcPull[r]&&(this.DC&&this.DC.dc&&(this.DC.dc.close(),this.DC=null),this.pcPull[r].con&&(this.pcPull[r].con.close(),this.pcPull[r].con=null));let l={};this.pcPull[r]=null,this.pcPull[r]=new x1(this,o,r),this.pcPull[r].signal=this.signal,this.pcPull[r].params=l,this.DC=new K1(this,this.pcPull[r]),this.startTime=Date.now(),n()}gotStream(r,n){this.localStream||(this.localStream=r),this.getTracks(r,n)}getTracks(r,n){r.getTracks().forEach(c=>{for(let a in this.pcPull)a!=="reserve"&&(this.pcPull[a].con.iceConnectionState==="disconnected"||this.pcPull[a].con.iceConnectionState==="closed"||(this.localStream.addTrack(c),this.pcPull[a].sender=this.pcPull[a].con.addTrack(c,this.localStream),c.kind==="video"?this.SetLocalVideo(this.localStream):c.kind))});var o=this.localStream.getVideoTracks(),l=this.localStream.getAudioTracks();o.length>0&&console.log("Using video device: "+o[0].label,this),l.length>0&&console.log("Using audio device: "+l[0].label,this),n(!0)}RemoveTracks(){this.localStream&&(this.localStream.getVideoTracks().forEach(o=>{o.readyState=="live"&&o.kind==="video"&&o.stop(),this.localStream.removeTrack(o)}),this.localStream.getAudioTracks().forEach(o=>{o.readyState=="live"&&o.kind==="audio"&&o.stop(),this.localStream.removeTrack(o)}))}}class j1 extends Y1{constructor(r,n,o){super(r,n,o),this.checking_tmr,Rr.subscribe(l=>{try{l&&this.OnMessage(l)}catch(c){console.log(c)}})}Init(r){let n=this;this.mode="";let o=[n.abonent];n.main_pc="";for(let l in o)n.InitRTC(o[l],function(){r()})}SendOffer(r){let n=this;n.pcPull[r].params.loc_desc="",n.pcPull[r].params.loc_cand="",n.pcPull[r].con.createOffer(this.mode={offerToReceiveAudio:1,offerToReceiveVideo:1,iceRestart:1}).then(o=>n.pcPull[r].onCreateOfferSuccess(o),n.pcPull[r].onCreateOfferError)}ChooseTarif(r){let n={};return n.proj="kolmit",n.func="tarif",n.em=this.em,n.tarif=r,n.psw=this.psw,new Promise((o,l)=>{this.signal.SendMessage(n,c=>{o(c)})})}SendStatus(r){let n={};return n.proj="kolmit",n.func="status",n.type=this.type,n.abonent=this.abonent,n.uid=this.uid,n.em=this.em,n.status=r,this.status=r,new Promise((o,l)=>{this.signal.SendMessage(n,c=>{o(c)})})}SendVideoOffer(r){let n=this;n.pcPull[r].params.loc_desc="",n.pcPull[r].params.loc_cand="",n.pcPull[r].con.createOffer(n.mode={offerToReceiveAudio:1,offerToReceiveVideo:1,iceRestart:1}).then(o=>n.pcPull[r].onCreateVideoOfferSuccess(o),n.pcPull[r].onCreateOfferError)}async Offer(){this.Init(async()=>{this.pcPull[this.abonent].con.signalingState!=="closed"&&this.GetUserMedia({audio:1,video:0},()=>{this.SendOffer(this.abonent)})})}OnActive(){this.Init(()=>{this.pcPull[this.abonent].con.signalingState!=="closed"&&this.GetUserMedia({audio:1,video:0},r=>{r&&this.SendOffer(this.abonent)})})}OnCall(){this.DC&&clearInterval(this.DC.inter),this.SendStatus("call")}OnTalk(){this.DC.dc&&this.DC.SendDCTalk(),this.SendStatus("talk"),console.log()}OnMute(){this.RemoveTracks(),this.DC&&this.DC.SendDCHangup(()=>{})}OnInactive(){this.RemoveTracks(),(this.DC.dc.readyState==="open"||this.DC.dc.readyState==="connecting")&&this.DC.SendDCHangup(()=>{this.DC.dc.close(),this.SendStatus("close")})}OnMessage(r){let n=this;if(r.func,r.func==="mute"&&this.RemoveTracks(),r.func==="talk"&&clearInterval(n.DC.inter),r.func,r.func,r.desc&&n.pcPull[r.abonent]&&(n.pcPull[r.abonent].con&&(n.pcPull[r.abonent].con.connectionState==="failed"||n.pcPull[r.abonent].con.connectionState==="disconnected")&&n.pcPull[r.abonent].con.restartIce(),n.pcPull[r.abonent]&&(n.pcPull[r.abonent].params.rem_desc=r.desc,n.pcPull[r.abonent].setRemoteDesc(r.desc),n.PlayCallCnt())),r.cand&&n.pcPull[r.abonent]&&n.pcPull[r.abonent]){if(!n.pcPull[r.abonent].con||n.pcPull[r.abonent].con.signalingState==="closed")return;try{if(n.pcPull[r.abonent].params.rem_cand=r.cand,Array.isArray(r.cand))for(let o in r.cand)n.pcPull[r.abonent].con.addIceCandidate(r.cand[o]);else n.pcPull[r.abonent].con.addIceCandidate(r.cand)}catch(o){log(o)}}}}function Z1(s){let r,n,o,l,c,a,h,f;return{c(){r=J("div"),n=Te("svg"),o=Te("g"),l=Te("title"),c=St("Layer 1"),a=Te("path"),this.h()},l(m){r=K(m,"DIV",{class:!0,style:!0});var v=j(r);n=Re(v,"svg",{class:!0,status:!0,width:!0,height:!0,style:!0});var p=j(n);o=Re(p,"g",{class:!0,style:!0});var b=j(o);l=Re(b,"title",{});var w=j(l);c=Ct(w,"Layer 1"),w.forEach(k),a=Re(b,"path",{d:!0,id:!0,class:!0,transform:!0}),j(a).forEach(k),b.forEach(k),p.forEach(k),v.forEach(k),this.h()},h(){S(a,"d","M390.7 353.3c-120.30000000000001 69.5 63.19999999999999 413.59999999999997 194.90000000000003 337.59999999999997l122.10000000000002 211.39999999999998c-55.60000000000002 32.10000000000002-102.5 52.30000000000007-166.9000000000001 15.5-178.79999999999995-102.19999999999993-375.59999999999997-442.9-369.99999999999994-646.0999999999999 1.8999999999999773-70.60000000000005 43.599999999999994-98.30000000000004 97.89999999999998-129.70000000000005 23.30000000000001 40.400000000000006 98.60000000000002 170.8 122 211.3z m50.400000000000034-5.699999999999989c-13 7.5-29.700000000000045 3.099999999999966-37.30000000000001-10l-115-199.3c-7.5-13.000000000000014-3.1000000000000227-29.700000000000017 10-37.30000000000001l60.5-34.900000000000006c13-7.499999999999993 29.69999999999999-3.0999999999999943 37.30000000000001 10l115.09999999999997 199.29999999999998c7.500000000000057 13 3.099999999999966 29.700000000000045-10 37.200000000000045l-60.599999999999966 35z m314.4 544.5c-13 7.5-29.700000000000045 3.1000000000000227-37.299999999999955-10l-115-199.30000000000007c-7.5-13-3.1000000000000227-29.699999999999932 10-37.299999999999955l60.5-34.89999999999998c13-7.5 29.699999999999932-3.1000000000000227 37.299999999999955 10l115.10000000000002 199.29999999999995c7.5 13 3.1000000000000227 29.700000000000045-10 37.30000000000007l-60.60000000000002 34.89999999999998z"),S(a,"id","svg_1"),S(a,"class","selected"),S(a,"transform","scale(.04)"),S(o,"class","currentLayer svelte-jaz7he"),O(o,"stroke","lightgrey"),O(o,"stroke-width","10px"),S(n,"class","callButton svelte-jaz7he"),S(n,"status",s[0]),S(n,"width","50"),S(n,"height","50"),O(n,"position","absolute"),O(n,"left","0px"),O(n,"top","5px"),O(n,"z-index","30"),S(r,"class","callObject"),O(r,"display","block")},m(m,v){Q(m,r,v),P(r,n),P(n,o),P(o,l),P(l,c),P(o,a),h||(f=[ue(n,"click",s[2]),ue(r,"long-press",function(){Pr(s[1])&&s[1].apply(this,arguments)})],h=!0)},p(m,[v]){s=m,v&1&&S(n,"status",s[0])},i:We,o:We,d(m){m&&k(r),h=!1,ln(f)}}}function X1(s,r,n){let{status:o="inactive"}=r,{OnLongPress:l}=r;function c(a){Z0.call(this,s,a)}return s.$$set=a=>{"status"in a&&n(0,o=a.status),"OnLongPress"in a&&n(1,l=a.OnLongPress)},[o,l,c]}class Q1 extends tt{constructor(r){super(),nt(this,r,X1,Z1,et,{status:0,OnLongPress:1})}}function $1(s){let r,n,o,l,c,a,h;return{c(){r=J("button"),n=Te("svg"),o=Te("line"),l=Te("line"),c=Te("line"),this.h()},l(f){r=K(f,"BUTTON",{style:!0,class:!0});var m=j(r);n=Re(m,"svg",{width:!0,height:!0,class:!0});var v=j(n);o=Re(v,"line",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,style:!0,class:!0}),j(o).forEach(k),l=Re(v,"line",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,style:!0,class:!0}),j(l).forEach(k),c=Re(v,"line",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,style:!0,class:!0}),j(c).forEach(k),v.forEach(k),m.forEach(k),this.h()},h(){S(o,"id","top"),S(o,"x1","0"),S(o,"y1","8"),S(o,"x2","26"),S(o,"y2","8"),O(o,"transition","transform "+s[1]+"s ease-in-out, opacity "+s[1]+"s ease-in-out"),S(o,"class","svelte-15vte99"),S(l,"id","mid"),S(l,"x1","0"),S(l,"y1","16"),S(l,"x2","26"),S(l,"y2","16"),O(l,"transition","transform "+s[1]+"s ease-in-out, opacity "+s[1]+"s ease-in-out"),S(l,"class","svelte-15vte99"),S(c,"id","bot"),S(c,"x1","0"),S(c,"y1","24"),S(c,"x2","26"),S(c,"y2","24"),O(c,"transition","transform "+s[1]+"s ease-in-out, opacity "+s[1]+"s ease-in-out"),S(c,"class","svelte-15vte99"),S(n,"width","26"),S(n,"height","26"),S(n,"class","svelte-15vte99"),O(r,"position","fixed"),O(r,"transition","color "+s[1]+"s ease-in-out"),O(r,"color",s[0]?s[3]:s[2]),S(r,"class","svelte-15vte99"),Rs(r,"open",s[0])},m(f,m){Q(f,r,m),P(r,n),P(n,o),P(n,l),P(n,c),a||(h=ue(r,"click",s[4]),a=!0)},p(f,[m]){m&2&&O(o,"transition","transform "+f[1]+"s ease-in-out, opacity "+f[1]+"s ease-in-out"),m&2&&O(l,"transition","transform "+f[1]+"s ease-in-out, opacity "+f[1]+"s ease-in-out"),m&2&&O(c,"transition","transform "+f[1]+"s ease-in-out, opacity "+f[1]+"s ease-in-out"),m&2&&O(r,"transition","color "+f[1]+"s ease-in-out"),m&13&&O(r,"color",f[0]?f[3]:f[2]),m&1&&Rs(r,"open",f[0])},i:We,o:We,d(f){f&&k(r),a=!1,h()}}}function eg(s,r,n){let{open:o}=r,{duration:l}=r,{burgerColor:c}=r,{menuColor:a}=r;const h=()=>n(0,o=!o);return s.$$set=f=>{"open"in f&&n(0,o=f.open),"duration"in f&&n(1,l=f.duration),"burgerColor"in f&&n(2,c=f.burgerColor),"menuColor"in f&&n(3,a=f.menuColor)},[o,l,c,a,h]}class tg extends tt{constructor(r){super(),nt(this,r,eg,$1,et,{open:0,duration:1,burgerColor:2,menuColor:3})}}function ng(s){let r,n,o;const l=s[8].default,c=xn(l,s,s[7],null);return{c(){r=J("div"),n=J("div"),c&&c.c(),this.h()},l(a){r=K(a,"DIV",{id:!0,style:!0,class:!0});var h=j(r);n=K(h,"DIV",{id:!0,style:!0,class:!0});var f=j(n);c&&c.l(f),f.forEach(k),h.forEach(k),this.h()},h(){S(n,"id","menu"),O(n,"padding",s[3]),O(n,"padding-top",s[4]),S(n,"class","svelte-42ebs2"),S(r,"id","container"),O(r,"position","fixed"),O(r,"z-index","1"),O(r,"background-color",s[5]),O(r,"color",s[6]),O(r,"width",s[2]),O(r,"right",s[0]?"0px":"-"+(parseInt(s[2])+10)+"px"),O(r,"transition","right "+s[1]+"s ease-in-out"),S(r,"class","svelte-42ebs2")},m(a,h){Q(a,r,h),P(r,n),c&&c.m(n,null),o=!0},p(a,[h]){c&&c.p&&(!o||h&128)&&Jn(c,l,a,a[7],o?Yn(l,a[7],h,null):Kn(a[7]),null),(!o||h&8)&&O(n,"padding",a[3]),(!o||h&16)&&O(n,"padding-top",a[4]),(!o||h&32)&&O(r,"background-color",a[5]),(!o||h&64)&&O(r,"color",a[6]),(!o||h&4)&&O(r,"width",a[2]),(!o||h&5)&&O(r,"right",a[0]?"0px":"-"+(parseInt(a[2])+10)+"px"),(!o||h&2)&&O(r,"transition","right "+a[1]+"s ease-in-out")},i(a){o||(se(c,a),o=!0)},o(a){de(c,a),o=!1},d(a){a&&k(r),c&&c.d(a)}}}function rg(s,r,n){let{$$slots:o={},$$scope:l}=r,{open:c}=r,{duration:a}=r,{width:h}=r,{padding:f}=r,{paddingTop:m}=r,{backgroundColor:v}=r,{menuColor:p}=r;return s.$$set=b=>{"open"in b&&n(0,c=b.open),"duration"in b&&n(1,a=b.duration),"width"in b&&n(2,h=b.width),"padding"in b&&n(3,f=b.padding),"paddingTop"in b&&n(4,m=b.paddingTop),"backgroundColor"in b&&n(5,v=b.backgroundColor),"menuColor"in b&&n(6,p=b.menuColor),"$$scope"in b&&n(7,l=b.$$scope)},[c,a,h,f,m,v,p,l,o]}class ig extends tt{constructor(r){super(),nt(this,r,rg,ng,et,{open:0,duration:1,width:2,padding:3,paddingTop:4,backgroundColor:5,menuColor:6})}}function og(s){let r;const n=s[10].default,o=xn(n,s,s[13],null);return{c(){o&&o.c()},l(l){o&&o.l(l)},m(l,c){o&&o.m(l,c),r=!0},p(l,c){o&&o.p&&(!r||c&8192)&&Jn(o,n,l,l[13],r?Yn(n,l[13],c,null):Kn(l[13]),null)},i(l){r||(se(o,l),r=!0)},o(l){de(o,l),r=!1},d(l){o&&o.d(l)}}}function lg(s){let r,n,o,l,c,a;const h=[s[1]];function f(w){s[11](w)}let m={};for(let w=0;w<h.length;w+=1)m=fr(m,h[w]);s[0]!==void 0&&(m.open=s[0]),r=new tg({props:m}),Ie.push(()=>$e(r,"open",f));const v=[s[2]];function p(w){s[12](w)}let b={$$slots:{default:[og]},$$scope:{ctx:s}};for(let w=0;w<v.length;w+=1)b=fr(b,v[w]);return s[0]!==void 0&&(b.open=s[0]),l=new ig({props:b}),Ie.push(()=>$e(l,"open",p)),{c(){Ye(r.$$.fragment),o=re(),Ye(l.$$.fragment)},l(w){je(r.$$.fragment,w),o=ie(w),je(l.$$.fragment,w)},m(w,A){Ze(r,w,A),Q(w,o,A),Ze(l,w,A),a=!0},p(w,[A]){const T=A&2?cr(h,[hr(w[1])]):{};!n&&A&1&&(n=!0,T.open=w[0],Qe(()=>n=!1)),r.$set(T);const B=A&4?cr(v,[hr(w[2])]):{};A&8192&&(B.$$scope={dirty:A,ctx:w}),!c&&A&1&&(c=!0,B.open=w[0],Qe(()=>c=!1)),l.$set(B)},i(w){a||(se(r.$$.fragment,w),se(l.$$.fragment,w),a=!0)},o(w){de(r.$$.fragment,w),de(l.$$.fragment,w),a=!1},d(w){w&&k(o),Xe(r,w),Xe(l,w)}}}function sg(s,r,n){let{$$slots:o={},$$scope:l}=r,{open:c=!1}=r,{duration:a=.4}=r,{width:h="250px"}=r,{padding:f="20px"}=r,{paddingTop:m="50px"}=r,{backgroundColor:v="rgb(250, 250, 250)"}=r,{burgerColor:p="rgb(18.4, 18.4, 18.4)"}=r,{menuColor:b="rgb(180, 180, 180)"}=r,w={duration:a,burgerColor:p,menuColor:b},A={duration:a,width:h,padding:f,paddingTop:m,backgroundColor:v,menuColor:b};function T(L){c=L,n(0,c)}function B(L){c=L,n(0,c)}return s.$$set=L=>{"open"in L&&n(0,c=L.open),"duration"in L&&n(3,a=L.duration),"width"in L&&n(4,h=L.width),"padding"in L&&n(5,f=L.padding),"paddingTop"in L&&n(6,m=L.paddingTop),"backgroundColor"in L&&n(7,v=L.backgroundColor),"burgerColor"in L&&n(8,p=L.burgerColor),"menuColor"in L&&n(9,b=L.menuColor),"$$scope"in L&&n(13,l=L.$$scope)},[c,w,A,a,h,f,m,v,p,b,o,T,B,l]}class ug extends tt{constructor(r){super(),nt(this,r,sg,lg,et,{open:0,duration:3,width:4,padding:5,paddingTop:6,backgroundColor:7,burgerColor:8,menuColor:9})}}function ag(s){let r,n,o,l;const c=s[6].default,a=xn(c,s,s[5],null);return{c(){r=J("video"),n=J("track"),o=re(),a&&a.c(),this.h()},l(h){r=K(h,"VIDEO",{poster:!0,style:!0});var f=j(r);n=K(f,"TRACK",{kind:!0}),f.forEach(k),o=ie(h),a&&a.l(h),this.h()},h(){S(n,"kind","captions"),r.autoplay=!0,r.playsInline=!0,S(r,"poster",s[1]),O(r,"display",s[0]),O(r,"position","absolute"),O(r,"height","105px"),O(r,"background-color","white"),O(r,"max-width","12%"),O(r,"z-index","10")},m(h,f){Q(h,r,f),P(r,n),s[7](r),Q(h,o,f),a&&a.m(h,f),l=!0},p(h,[f]){(!l||f&2)&&S(r,"poster",h[1]),(!l||f&1)&&O(r,"display",h[0]),a&&a.p&&(!l||f&32)&&Jn(a,c,h,h[5],l?Yn(c,h[5],f,null):Kn(h[5]),null)},i(h){l||(se(a,h),l=!0)},o(h){de(a,h),l=!1},d(h){h&&(k(r),k(o)),s[7](null),a&&a.d(h)}}}function fg(s,r,n){let{$$slots:o={},$$scope:l}=r,{display:c="none"}=r,{poster:a}=r,{srcObject:h}=r,f,m;$t(async()=>{n(4,f=m)});function v(p){Ie[p?"unshift":"push"](()=>{m=p,n(2,m)})}return s.$$set=p=>{"display"in p&&n(0,c=p.display),"poster"in p&&n(1,a=p.poster),"srcObject"in p&&n(3,h=p.srcObject),"$$scope"in p&&n(5,l=p.$$scope)},s.$$.update=()=>{s.$$.dirty&24&&(f&&h?n(4,f.srcObject=h,f):f&&f.srcObject&&(f.srcObject.getVideoTracks().forEach(p=>{p.stop(),f.srcObject.removeTrack(p)}),n(4,f.src="",f)))},[c,a,m,h,f,l,o,v]}class cg extends tt{constructor(r){super(),nt(this,r,fg,ag,et,{display:0,poster:1,srcObject:3})}}function hg(s){let r,n="",o,l,c='<input type="file" id="fileInput" name="files"/>',a,h;return{c(){r=J("a"),r.innerHTML=n,o=re(),l=J("form"),l.innerHTML=c,a=re(),h=J("i"),this.h()},l(f){r=K(f,"A",{id:!0,style:!0,"data-svelte-h":!0}),wn(r)!=="svelte-1ulz4fx"&&(r.innerHTML=n),o=ie(f),l=K(f,"FORM",{id:!0,style:!0,"data-svelte-h":!0}),wn(l)!=="svelte-tjvju7"&&(l.innerHTML=c),a=ie(f),h=K(f,"I",{class:!0,style:!0}),j(h).forEach(k),this.h()},h(){S(r,"id","download_href"),O(r,"display","none"),S(l,"id","fileInfo"),O(l,"display","none"),S(h,"class","fa fa-spinner fa-spin"),O(h,"position","absolute"),O(h,"top","50%"),O(h,"left","50%"),O(h,"font-size","44px")},m(f,m){Q(f,r,m),Q(f,o,m),Q(f,l,m),Q(f,a,m),Q(f,h,m)},p:We,i:We,o:We,d(f){f&&(k(r),k(o),k(l),k(a),k(h))}}}class dg extends tt{constructor(r){super(),nt(this,r,null,hg,et,{})}}function pg(s){let r,n='<track kind="captions"/>',o;return{c(){r=J("audio"),r.innerHTML=n,this.h()},l(l){r=K(l,"AUDIO",{id:!0,src:!0,"data-svelte-h":!0}),wn(r)!=="svelte-qhtjm0"&&(r.innerHTML=n),this.h()},h(){S(r,"id","localSound"),Dt(r.src,o="../src/routes/assets/mp3/ring.mp3")||S(r,"src",o)},m(l,c){Q(l,r,c)},p:We,i:We,o:We,d(l){l&&k(r)}}}function gg(s,r,n){let{paused:o=!0}=r,l;return $t(async()=>{n(1,l=document.getElementById("localSound"))}),s.$$set=c=>{"paused"in c&&n(0,o=c.paused)},s.$$.update=()=>{s.$$.dirty&3&&l&&(o?l.pause():l.play())},[o,l]}class _g extends tt{constructor(r){super(),nt(this,r,gg,pg,et,{paused:0})}}function mg(s){let r,n;return{c(){r=J("audio"),n=J("track"),this.h()},l(o){r=K(o,"AUDIO",{id:!0});var l=j(r);n=K(l,"TRACK",{kind:!0}),l.forEach(k),this.h()},h(){S(n,"kind","captions"),S(r,"id","remoteAudio"),r.autoplay=!0,r.muted=s[0]},m(o,l){Q(o,r,l),P(r,n)},p(o,[l]){l&1&&(r.muted=o[0])},i:We,o:We,d(o){o&&k(r)}}}function vg(s,r,n){let{muted:o=!1}=r,{srcObject:l}=r,c;return $t(async()=>{n(2,c=document.getElementById("remoteAudio"))}),s.$$set=a=>{"muted"in a&&n(0,o=a.muted),"srcObject"in a&&n(1,l=a.srcObject)},s.$$.update=()=>{s.$$.dirty&6&&c&&l&&n(2,c.srcObject=l,c)},[o,l,c]}class bg extends tt{constructor(r){super(),nt(this,r,vg,mg,et,{muted:0,srcObject:1})}}function yg(s){let r;return{c(){r=J("video"),this.h()},l(n){r=K(n,"VIDEO",{class:!0,style:!0}),j(r).forEach(k),this.h()},h(){S(r,"class","recordedVideo"),r.autoplay=!0,r.muted=!0,O(r,"display",s[0])},m(n,o){Q(n,r,o)},p(n,[o]){o&1&&O(r,"display",n[0])},i:We,o:We,d(n){n&&k(r)}}}function wg(s,r,n){let{display:o="none"}=r;return s.$$set=l=>{"display"in l&&n(0,o=l.display)},[o]}class Sg extends tt{constructor(r){super(),nt(this,r,wg,yg,et,{display:0})}}function Cg(s){let r,n="100",o,l,c="0";return{c(){r=J("b"),r.textContent=n,o=re(),l=J("span"),l.textContent=c,this.h()},l(a){r=K(a,"B",{class:!0,style:!0,"data-svelte-h":!0}),wn(r)!=="svelte-1h19z5i"&&(r.textContent=n),o=ie(a),l=K(a,"SPAN",{class:!0,style:!0,"data-svelte-h":!0}),wn(l)!=="svelte-1dn9ak7"&&(l.textContent=c),this.h()},h(){S(r,"class","call_cnt"),O(r,"display","none"),O(r,"position","absolute"),O(r,"left","22px"),O(r,"top","10px"),O(r,"color","#0e0cff"),O(r,"font-size","12px"),S(l,"class","badge badge-primary badge-pill call-queue"),O(l,"display","none"),O(l,"position","absolute"),O(l,"right","0px"),O(l,"bottom","0px"),O(l,"color","#0e0cff"),O(l,"font-size","12px"),O(l,"opacity","1")},m(a,h){Q(a,r,h),Q(a,o,h),Q(a,l,h)},p:We,d(a){a&&(k(r),k(o),k(l))}}}function Og(s){let r;return{c(){r=J("div")},l(n){r=K(n,"DIV",{}),j(r).forEach(k)},m(n,o){Q(n,r,o),s[22](r)},p:We,d(n){n&&k(r),s[22](null)}}}function ru(s){let r,n,o,l,c,a,h;return{c(){r=J("div"),n=Te("svg"),o=Te("glyph"),l=Te("g"),c=Te("path"),this.h()},l(f){r=K(f,"DIV",{class:!0,style:!0});var m=j(r);n=Re(m,"svg",{height:!0,width:!0,style:!0});var v=j(n);o=Re(v,"glyph",{"glyph-name":!0,unicode:!0,"horiz-adv-x":!0}),j(o).forEach(k),l=Re(v,"g",{class:!0,style:!0});var p=j(l);c=Re(p,"path",{d:!0,transform:!0,style:!0}),j(c).forEach(k),p.forEach(k),v.forEach(k),m.forEach(k),this.h()},h(){S(o,"glyph-name","ui-video-chat"),S(o,"unicode",""),S(o,"horiz-adv-x","50"),S(c,"d","M891.5 23h-783c-59.7 0-108.5 48.8-108.5 108.5v466.20000000000005c0 59.59999999999991 48.8 108.5 108.5 108.5h222.39999999999998v270.5999999999999l270.70000000000005-270.5999999999999h289.9c59.700000000000045 0 108.5-48.90000000000009 108.5-108.5v-466.20000000000005c0-59.7-48.799999999999955-108.5-108.5-108.5z m-223.5 370l-252.8 134.70000000000005c-26.30000000000001 14-47.89999999999998 1.099999999999909-47.89999999999998-28.700000000000045v-262.9c0-29.900000000000034 21.599999999999966-42.80000000000001 47.89999999999998-28.80000000000001l252.8 134.7c26.299999999999955 14 26.299999999999955 37 0 51z"),S(c,"transform","scale(.03)"),O(c,"fill","lightgrey"),O(c,"stroke","black"),O(c,"stroke-width","20px"),S(l,"class","currentLayer"),O(l,"position","absolute"),O(l,"right","0"),O(l,"top","0"),O(l,"stroke","grey"),O(l,"stroke-width","2px"),O(l,"fill","lightgrey"),O(l,"font-size","30px"),S(n,"height","30"),S(n,"width","30"),O(n,"position","absolute"),O(n,"bottom","70px"),O(n,"right","0px"),O(n,"z-index","30"),S(r,"class","video"),O(r,"position","absolute"),O(r,"top","0"),O(r,"width","100px"),O(r,"height","100px")},m(f,m){Q(f,r,m),P(r,n),P(n,o),P(n,l),P(l,c),a||(h=ue(n,"click",s[16]),a=!0)},p:We,d(f){f&&k(r),a=!1,h()}}}function iu(s){let r;function n(c,a){return c[6]?Eg:Ig}let o=n(s),l=o(s);return{c(){l.c(),r=_t()},l(c){l.l(c),r=_t()},m(c,a){l.m(c,a),Q(c,r,a)},p(c,a){o===(o=n(c))&&l?l.p(c,a):(l.d(1),l=o(c),l&&(l.c(),l.m(r.parentNode,r)))},d(c){c&&k(r),l.d(c)}}}function Eg(s){let r,n=s[11]["Cancel Edit Call Center"][s[10]]+"",o,l,c;return{c(){r=J("h5"),o=St(n)},l(a){r=K(a,"H5",{});var h=j(r);o=Ct(h,n),h.forEach(k)},m(a,h){Q(a,r,h),P(r,o),l||(c=ue(r,"click",s[30]),l=!0)},p(a,h){h[0]&3072&&n!==(n=a[11]["Cancel Edit Call Center"][a[10]]+"")&&on(o,n)},d(a){a&&k(r),l=!1,c()}}}function Ig(s){let r,n=s[11]["Edit Call Center"][s[10]]+"",o,l,c;return{c(){r=J("h5"),o=St(n)},l(a){r=K(a,"H5",{});var h=j(r);o=Ct(h,n),h.forEach(k)},m(a,h){Q(a,r,h),P(r,o),l||(c=ue(r,"click",s[29]),l=!0)},p(a,h){h[0]&3072&&n!==(n=a[11]["Edit Call Center"][a[10]]+"")&&on(o,n)},d(a){a&&k(r),l=!1,c()}}}function ou(s){let r,n=s[11]["Create my own net"][s[10]]+"",o,l,c;return{c(){r=J("h5"),o=St(n)},l(a){r=K(a,"H5",{});var h=j(r);o=Ct(h,n),h.forEach(k)},m(a,h){Q(a,r,h),P(r,o),l||(c=ue(r,"click",Tg),l=!0)},p(a,h){h[0]&3072&&n!==(n=a[11]["Create my own net"][a[10]]+"")&&on(o,n)},d(a){a&&k(r),l=!1,c()}}}function kg(s){let r=s[11]["Language Select"][s[10]]+"",n,o,l,c,a,h,f,m,v,p,b,w,A,T,B,L,Z,z,N,H,U,G,fe,x,D,ee,pe=s[7].role=="admin"&&iu(s),ve=s[7].role=="user"&&ou(s);return x=Qp(s[26][0]),{c(){n=St(r),o=St(`:\r
\r
		`),l=J("div"),c=J("label"),a=J("input"),h=re(),f=J("img"),v=re(),p=J("label"),b=J("input"),w=re(),A=J("img"),B=re(),L=J("label"),Z=J("input"),z=re(),N=J("img"),U=re(),pe&&pe.c(),G=re(),ve&&ve.c(),fe=_t(),this.h()},l(q){n=Ct(q,r),o=Ct(q,`:\r
\r
		`),l=K(q,"DIV",{style:!0});var te=j(l);c=K(te,"LABEL",{style:!0});var Ge=j(c);a=K(Ge,"INPUT",{type:!0,name:!0}),h=ie(Ge),f=K(Ge,"IMG",{src:!0,alt:!0}),Ge.forEach(k),v=ie(te),p=K(te,"LABEL",{style:!0});var Ce=j(p);b=K(Ce,"INPUT",{type:!0,name:!0}),w=ie(Ce),A=K(Ce,"IMG",{src:!0,alt:!0}),Ce.forEach(k),B=ie(te),L=K(te,"LABEL",{style:!0});var Ne=j(L);Z=K(Ne,"INPUT",{type:!0,name:!0}),z=ie(Ne),N=K(Ne,"IMG",{src:!0,alt:!0}),Ne.forEach(k),te.forEach(k),U=ie(q),pe&&pe.l(q),G=ie(q),ve&&ve.l(q),fe=_t(),this.h()},h(){S(a,"type","radio"),S(a,"name","lang"),a.__value="en",Je(a,a.__value),Dt(f.src,m="https://www.sic-info.org/wp-content/uploads/2014/01/gb.png")||S(f,"src",m),S(f,"alt","English"),O(c,"flex","1"),S(b,"type","radio"),S(b,"name","lang"),b.__value="fr",Je(b,b.__value),Dt(A.src,T="https://www.sic-info.org/wp-content/uploads/2014/01/fr.png")||S(A,"src",T),S(A,"alt","French"),O(p,"flex","1"),S(Z,"type","radio"),S(Z,"name","lang"),Z.__value="ru",Je(Z,Z.__value),Dt(N.src,H="https://www.sic-info.org/wp-content/uploads/2014/01/ru.png")||S(N,"src",H),S(N,"alt","Russian"),O(L,"flex","1"),O(l,"display","flex"),O(l,"margin-bottom","20px"),x.p(a,b,Z)},m(q,te){Q(q,n,te),Q(q,o,te),Q(q,l,te),P(l,c),P(c,a),a.checked=a.__value===s[10],P(c,h),P(c,f),P(l,v),P(l,p),P(p,b),b.checked=b.__value===s[10],P(p,w),P(p,A),P(l,B),P(l,L),P(L,Z),Z.checked=Z.__value===s[10],P(L,z),P(L,N),Q(q,U,te),pe&&pe.m(q,te),Q(q,G,te),ve&&ve.m(q,te),Q(q,fe,te),D||(ee=[ue(a,"change",s[25]),ue(a,"change",s[14]),ue(b,"change",s[27]),ue(b,"change",s[14]),ue(Z,"change",s[28]),ue(Z,"change",s[14])],D=!0)},p(q,te){te[0]&3072&&r!==(r=q[11]["Language Select"][q[10]]+"")&&on(n,r),te[0]&1024&&(a.checked=a.__value===q[10]),te[0]&1024&&(b.checked=b.__value===q[10]),te[0]&1024&&(Z.checked=Z.__value===q[10]),q[7].role=="admin"?pe?pe.p(q,te):(pe=iu(q),pe.c(),pe.m(G.parentNode,G)):pe&&(pe.d(1),pe=null),q[7].role=="user"?ve?ve.p(q,te):(ve=ou(q),ve.c(),ve.m(fe.parentNode,fe)):ve&&(ve.d(1),ve=null)},d(q){q&&(k(n),k(o),k(l),k(U),k(G),k(fe)),pe&&pe.d(q),ve&&ve.d(q),x.r(),D=!1,ln(ee)}}}function Ag(s){let r,n,o,l,c,a,h,f,m,v=s[2].text.msg+"",p,b,w,A,T=s[2].text.name+"",B,L,Z,z,N,H,U,G,fe,x,D,ee,pe,ve,q,te,Ge,Ce,Ne,rt,Ae,be,le,De,Ue;const ht=[s[2].video];let mt={};for(let Y=0;Y<ht.length;Y+=1)mt=fr(mt,ht[Y]);o=new cg({props:mt});function Ft(Y){s[21](Y)}let Tt={OnLongPress:Dg,$$slots:{default:[Cg]},$$scope:{ctx:s}};s[1]!==void 0&&(Tt.status=s[1]),c=new Q1({props:Tt}),Ie.push(()=>$e(c,"status",Ft)),c.$on("click",s[15]);const X=[s[9].video];let On={$$slots:{footer:[Og]},$$scope:{ctx:s}};for(let Y=0;Y<X.length;Y+=1)On=fr(On,X[Y]);z=new c1({props:On});let He=s[5]&&ru(s);const Kt=[s[9].audio];function Lr(Y){s[23](Y)}let dt={};for(let Y=0;Y<Kt.length;Y+=1)dt=fr(dt,Kt[Y]);s[9].audio.paused!==void 0&&(dt.paused=s[9].audio.paused),G=new _g({props:dt}),Ie.push(()=>$e(G,"paused",Lr));const sn=[s[2].audio];function ki(Y){s[24](Y)}let Ot={};for(let Y=0;Y<sn.length;Y+=1)Ot=fr(Ot,sn[Y]);s[2].audio.srcObject!==void 0&&(Ot.srcObject=s[2].audio.srcObject),D=new bg({props:Ot}),Ie.push(()=>$e(D,"srcObject",ki)),ve=new Sg({}),te=new dg({}),Ce=new ug({props:{padding:"25px",$$slots:{default:[kg]},$$scope:{ctx:s}}});function Mr(Y){s[32](Y)}function Ai(Y){s[33](Y)}let un={view:s[12],tarif:s[0]};return s[1]!==void 0&&(un.status=s[1]),s[7]!==void 0&&(un.operator=s[7]),be=new q1({props:un}),s[31](be),Ie.push(()=>$e(be,"status",Mr)),Ie.push(()=>$e(be,"operator",Ai)),{c(){r=J("div"),n=J("div"),Ye(o.$$.fragment),l=re(),Ye(c.$$.fragment),h=re(),f=J("div"),m=J("p"),p=St(v),b=re(),w=J("br"),A=re(),B=St(T),L=re(),Z=J("div"),Ye(z.$$.fragment),N=re(),He&&He.c(),H=re(),U=J("div"),Ye(G.$$.fragment),x=re(),Ye(D.$$.fragment),pe=re(),Ye(ve.$$.fragment),q=re(),Ye(te.$$.fragment),Ge=re(),Ye(Ce.$$.fragment),Ne=re(),rt=J("progress"),Ae=re(),Ye(be.$$.fragment),this.h()},l(Y){r=K(Y,"DIV",{style:!0});var ge=j(r);n=K(ge,"DIV",{style:!0});var Rt=j(n);je(o.$$.fragment,Rt),l=ie(Rt),je(c.$$.fragment,Rt),h=ie(Rt),f=K(Rt,"DIV",{class:!0,style:!0});var En=j(f);m=K(En,"P",{class:!0,style:!0});var vt=j(m);p=Ct(vt,v),b=ie(vt),w=K(vt,"BR",{}),A=ie(vt),B=Ct(vt,T),vt.forEach(k),En.forEach(k),Rt.forEach(k),L=ie(ge),Z=K(ge,"DIV",{style:!0});var an=j(Z);je(z.$$.fragment,an),N=ie(an),He&&He.l(an),an.forEach(k),H=ie(ge),U=K(ge,"DIV",{style:!0});var at=j(U);je(G.$$.fragment,at),x=ie(at),je(D.$$.fragment,at),pe=ie(at),je(ve.$$.fragment,at),q=ie(at),je(te.$$.fragment,at),at.forEach(k),Ge=ie(ge),je(Ce.$$.fragment,ge),ge.forEach(k),Ne=ie(Y),rt=K(Y,"PROGRESS",{id:!0,max:!0,duration:!0,style:!0}),j(rt).forEach(k),Ae=ie(Y),je(be.$$.fragment,Y),this.h()},h(){S(m,"class","remote_msg"),O(m,"font-size",".7em"),O(m,"white-space","nowrap"),O(m,"color","white"),O(m,"margin","auto"),O(m,"text-align","center"),S(f,"class","remote_text_display"),O(f,"display",s[2].text.display),O(f,"position","absolute"),O(f,"z-index","21"),O(f,"background-color","rgba(125, 125, 125, 0.8)"),O(f,"top","90px"),O(f,"left","2px"),O(n,"flex","1"),O(Z,"position","absolute"),O(Z,"flex","1 1 0%"),O(U,"flex","3"),O(r,"display","flex"),O(r,"min-height","100px"),O(r,"flex-wrap","nowrap"),O(r,"justify-content","space-between"),S(rt,"id","dataProgress"),rt.value=s[13].value,S(rt,"max","100"),S(rt,"duration","200"),O(rt,"display",s[13].display),O(rt,"top","100px"),O(rt,"width","98%")},m(Y,ge){Q(Y,r,ge),P(r,n),Ze(o,n,null),P(n,l),Ze(c,n,null),P(n,h),P(n,f),P(f,m),P(m,p),P(m,b),P(m,w),P(m,A),P(m,B),P(r,L),P(r,Z),Ze(z,Z,null),P(Z,N),He&&He.m(Z,null),P(r,H),P(r,U),Ze(G,U,null),P(U,x),Ze(D,U,null),P(U,pe),Ze(ve,U,null),P(U,q),Ze(te,U,null),P(r,Ge),Ze(Ce,r,null),Q(Y,Ne,ge),Q(Y,rt,ge),Q(Y,Ae,ge),Ze(be,Y,ge),Ue=!0},p(Y,ge){const Rt=ge[0]&4?cr(ht,[hr(Y[2].video)]):{};o.$set(Rt);const En={};ge[1]&16384&&(En.$$scope={dirty:ge,ctx:Y}),!a&&ge[0]&2&&(a=!0,En.status=Y[1],Qe(()=>a=!1)),c.$set(En),(!Ue||ge[0]&4)&&v!==(v=Y[2].text.msg+"")&&on(p,v),(!Ue||ge[0]&4)&&T!==(T=Y[2].text.name+"")&&on(B,T),(!Ue||ge[0]&4)&&O(f,"display",Y[2].text.display);const vt=ge[0]&512?cr(X,[hr(Y[9].video)]):{};ge[0]&256|ge[1]&16384&&(vt.$$scope={dirty:ge,ctx:Y}),z.$set(vt),Y[5]?He?He.p(Y,ge):(He=ru(Y),He.c(),He.m(Z,null)):He&&(He.d(1),He=null);const an=ge[0]&512?cr(Kt,[hr(Y[9].audio)]):{};!fe&&ge[0]&512&&(fe=!0,an.paused=Y[9].audio.paused,Qe(()=>fe=!1)),G.$set(an);const at=ge[0]&4?cr(sn,[hr(Y[2].audio)]):{};!ee&&ge[0]&4&&(ee=!0,at.srcObject=Y[2].audio.srcObject,Qe(()=>ee=!1)),D.$set(at);const fn={};ge[0]&3272|ge[1]&16384&&(fn.$$scope={dirty:ge,ctx:Y}),Ce.$set(fn);const cn={};ge[0]&4096&&(cn.view=Y[12]),ge[0]&1&&(cn.tarif=Y[0]),!le&&ge[0]&2&&(le=!0,cn.status=Y[1],Qe(()=>le=!1)),!De&&ge[0]&128&&(De=!0,cn.operator=Y[7],Qe(()=>De=!1)),be.$set(cn)},i(Y){Ue||(se(o.$$.fragment,Y),se(c.$$.fragment,Y),se(z.$$.fragment,Y),se(G.$$.fragment,Y),se(D.$$.fragment,Y),se(ve.$$.fragment,Y),se(te.$$.fragment,Y),se(Ce.$$.fragment,Y),se(be.$$.fragment,Y),Ue=!0)},o(Y){de(o.$$.fragment,Y),de(c.$$.fragment,Y),de(z.$$.fragment,Y),de(G.$$.fragment,Y),de(D.$$.fragment,Y),de(ve.$$.fragment,Y),de(te.$$.fragment,Y),de(Ce.$$.fragment,Y),de(be.$$.fragment,Y),Ue=!1},d(Y){Y&&(k(r),k(Ne),k(rt),k(Ae)),Xe(o),Xe(c),Xe(z),He&&He.d(),Xe(G),Xe(D),Xe(ve),Xe(te),Xe(Ce),s[31](null),Xe(be,Y)}}}function Dg(){select.display=!0}const Tg=()=>{};function Rg(s,r,n){let o,l,c,a,h,f,m,v;Le(s,Qt,X=>n(10,o=X)),Le(s,qn,X=>n(38,l=X)),Le(s,gu,X=>n(19,c=X)),Le(s,Ps,X=>n(39,a=X)),Le(s,Tr,X=>n(3,h=X)),Le(s,Rr,X=>n(20,f=X)),Le(s,Oi,X=>n(11,m=X)),Le(s,t1,X=>n(12,v=X));let p,b,{tarif:w}=r,A,T="inactive",B,L=!1,Z=!1,{email:z,abonent:N}=r;const H=Q0(z);let U={type:"operator",em:z,abonent:N,uid:H};U.em===N?U.role="admin":U.role="user",rn(Ps,a=U,a);let G;$t(async()=>{try{b=new j1(U,H,l),pe(),b.SendCheck(),l.CallWaiting(U)}catch{console.log()}});let fe={display:"block",value:0},x={video:{display:"none",srcObject:"",poster:""},audio:{paused:!0,src:""}},D={text:{display:"none",msg:"You have a call from:",name:"",email:""},video:{display:"none",srcObject:"",poster:""},audio:{muted:!0,srcObject:""}};lu("operator",{getOperator:()=>this});function ee(X){rn(Qt,o=X.target.attributes[2].nodeValue,o)}async function pe(){b.PlayCallCnt=()=>{A=10,n(9,x.audio.paused=!1,x),B=setInterval(function(){A--,A===0&&(clearInterval(B),n(9,x.audio.paused=!0,x))},2e3)},b.GetRemoteAudio=()=>D.audio.srcObject,b.SetRemoteAudio=X=>{X&&n(2,D.audio.srcObject=X,D)},b.GetRemoteVideo=()=>D.video.srcObject,b.SetLocalVideo=X=>{X&&n(9,x.video.srcObject=X,x)},b.SetRemoteVideo=X=>{T==="talk"&&(n(2,D.video.poster="",D),n(2,D.video.srcObject=X,D),n(2,D.video.display="block",D),n(9,x.audio.paused=!0,x))}}function ve(){try{if(!window.AudioContext){window.AudioContext=window.AudioContext||window.webkitAudioContext;let X=new AudioContext;b.localSoundSrc=X.createMediaElementSource(window.user.localSound),b.localSoundSrc.connect(X.destination)}}catch{console.log("Web Audio API is not supported in this browser")}switch(T){case"inactive":b.Offer(),n(1,T="active");break;case"active":n(1,T="inactive"),b.OnInactive();break;case"call":n(1,T="talk"),clearInterval(B),n(9,x.audio.paused=!0,x),n(2,D.audio.muted=!1,D),b.OnTalk(),n(5,L=!0),n(2,D.text.display="block",D);const X=new Event("talk");document.getElementsByTagName("body")[0].dispatchEvent(X);break;case"talk":b.OnInactive(),n(2,D.audio.muted=!0,D),n(9,x.video.display="none",x),n(5,L=!1),n(2,D.video.display="none",D),n(2,D.video.srcObject="",D),n(2,D.video.poster="",D),n(2,D.text.display="none",D),n(2,D.text.name="",D),n(2,D.text.email="",D),n(1,T="inactive");break;case"muted":n(1,T="inactive"),n(9,x.video.srcObject="",x),n(2,D.audio.muted=!0,D),n(2,D.video.display="none",D),n(2,D.video.srcObject="",D),n(2,D.video.poster="",D),n(2,D.text.display="none",D),b.OnInactive();break;default:return}}function q(){n(1,T="talk"),n(9,x.audio.paused=!0,x),n(9,x.video.display="block",x),b.DC.dc.readyState==="open"&&b.GetUserMedia({audio:1,video:1},function(){b.SendVideoOffer(b.main_pc)})}function te(X,On){if(X.func==="mute"&&(n(9,x.audio.paused=!0,x),n(2,D.audio.muted=!0,D),n(5,L=!1),n(9,x.video.display="none",x),n(9,x.video.srcObject="",x),n(2,D.video.srcObject="",D),n(2,D.video.poster="",D),n(2,D.video.display="none",D),n(2,D.text.name="",D),n(2,D.text.email="",D),n(2,D.text.display="none",D),b.OnInactive(),T==="talk"?n(1,T="inactive"):T==="call"&&(n(1,T="inactive"),b.OnMute(),ve()),On&&On()),(X.call||X.func==="call")&&(n(1,T="call"),b.OnCall(),n(2,D.text.display="block",D),X.profile)){let He=X.profile,Kt=He.src;n(2,D.video.poster=Kt,D),Kt&&n(2,D.video.display="block",D),n(2,D.text.name=He.name,D),n(2,D.text.email=He.email,D)}X.desc,X.camera&&n(9,x.video.src=that.localStream,x),X.status==="wait"&&(n(2,D.text.display="block",D),n(2,D.text.msg="You have a waiting call",D))}const Ge=[[]];function Ce(X){T=X,n(1,T)}function Ne(X){Ie[X?"unshift":"push"](()=>{G=X,n(8,G)})}function rt(X){s.$$.not_equal(x.audio.paused,X)&&(x.audio.paused=X,n(9,x))}function Ae(X){s.$$.not_equal(D.audio.srcObject,X)&&(D.audio.srcObject=X,n(2,D))}function be(){o=this.__value,Qt.set(o)}function le(){o=this.__value,Qt.set(o)}function De(){o=this.__value,Qt.set(o)}const Ue=()=>rn(Tr,h=!0,h),ht=()=>rn(Tr,h=!1,h);function mt(X){Ie[X?"unshift":"push"](()=>{p=X,n(4,p)})}function Ft(X){T=X,n(1,T)}function Tt(X){U=X,n(7,U)}return s.$$set=X=>{"tarif"in X&&n(0,w=X.tarif),"email"in X&&n(17,z=X.email),"abonent"in X&&n(18,N=X.abonent)},s.$$.update=()=>{s.$$.dirty[0]&1048576&&f&&te(f),s.$$.dirty[0]&2&&Ei.set(T),s.$$.dirty[0]&8&&h&&n(6,Z=h),s.$$.dirty[0]&524288&&c&&te(c),s.$$.dirty[0]&4&&D.text.msg&&console.log(D.text.msg)},[w,T,D,h,p,L,Z,U,G,x,o,m,v,fe,ee,ve,q,z,N,c,f,Ce,Ne,rt,Ae,be,Ge,le,De,Ue,ht,mt,Ft,Tt]}class Pg extends tt{constructor(r){super(),nt(this,r,Rg,Ag,et,{tarif:0,email:17,abonent:18},null,[-1,-1])}}function Lg(s){let r,n,o,l,c,a,h,f,m,v,p,b,w,A,T,B,L,Z;return{c(){r=J("form"),n=J("div"),o=J("input"),l=re(),c=J("input"),a=re(),h=J("input"),f=re(),m=J("div"),v=J("img"),b=re(),w=J("div"),A=J("input"),T=re(),B=J("input"),this.h()},l(z){r=K(z,"FORM",{});var N=j(r);n=K(N,"DIV",{id:!0});var H=j(n);o=K(H,"INPUT",{type:!0,placeholder:!0}),l=ie(H),c=K(H,"INPUT",{type:!0,placeholder:!0}),a=ie(H),h=K(H,"INPUT",{class:!0,accept:!0,id:!0,name:!0,type:!0,style:!0}),f=ie(H),m=K(H,"DIV",{});var U=j(m);v=K(U,"IMG",{class:!0,src:!0,alt:!0,style:!0}),U.forEach(k),b=ie(H),w=K(H,"DIV",{});var G=j(w);A=K(G,"INPUT",{type:!0,placeholder:!0}),T=ie(G),B=K(G,"INPUT",{type:!0,placeholder:!0}),G.forEach(k),H.forEach(k),N.forEach(k),this.h()},h(){S(o,"type","email"),S(o,"placeholder","input your email"),o.required=!0,S(c,"type","text"),S(c,"placeholder","input your name"),c.required=!0,S(h,"class","file-upload"),S(h,"accept","image/png, image/jpeg"),S(h,"id","avatar"),S(h,"name","avatar"),S(h,"type","file"),O(h,"display","none"),S(v,"class","user_pic is-rounded"),Dt(v.src,p=s[1])||S(v,"src",p),S(v,"alt",""),O(v,"border-radius","5px"),O(v,"max-width","10%"),S(A,"type","password"),S(A,"placeholder","input your password"),A.required=!0,S(B,"type","password"),S(B,"placeholder","repeat your password"),B.required=!0,S(n,"id","inputs")},m(z,N){Q(z,r,N),P(r,n),P(n,o),Je(o,s[4]),P(n,l),P(n,c),Je(c,s[0]),P(n,a),P(n,h),s[15](h),P(n,f),P(n,m),P(m,v),P(n,b),P(n,w),P(w,A),Je(A,s[5]),P(w,T),P(w,B),Je(B,s[6]),L||(Z=[ue(o,"input",s[13]),ue(c,"input",s[14]),ue(h,"change",s[9]),ue(h,"change",s[16]),ue(v,"click",s[8]),ue(A,"input",s[17]),ue(B,"input",s[18]),ue(B,"change",s[7])],L=!0)},p(z,[N]){N&16&&o.value!==z[4]&&Je(o,z[4]),N&1&&c.value!==z[0]&&Je(c,z[0]),N&2&&!Dt(v.src,p=z[1])&&S(v,"src",p),N&32&&A.value!==z[5]&&Je(A,z[5]),N&64&&B.value!==z[6]&&Je(B,z[6])},i:We,o:We,d(z){z&&k(r),s[15](null),L=!1,ln(Z)}}}function Mg(s,r,n){let o;Le(s,qn,x=>n(21,o=x));let{user_name:l,user_pic:c}=r,{lang:a="en",checked:h,abonent:f,upload:m,files:v}=r,p="",b="",w="",A,T;c||(c=du);async function B(x){let D={};D.proj="kolmit",D.func="operator",D.abonent=f,D.email=p,D.psw=Q0(b),D.img=c,D.lang=a,(await new Promise((ve,q)=>{o.SendMessage(D,te=>{ve(te)})})).func===D.func&&n(10,h=!0)}function L(x){let D=new MouseEvent("click",{bubbles:!1,cancelable:!0,view:window});m&&m.dispatchEvent(D)}function Z(x){try{eo(x.target.files[0],function(D,ee){D.type==="error"?console.error("Error loading image "):(A=D.width,T=D.height,n(1,c=D.toDataURL()))},{orientation:!0,maxWidth:100,maxHeight:100,minWidth:50,minHeight:50,canvas:!0})}catch(D){console.log(D)}}function z(){p=this.value,n(4,p)}function N(){l=this.value,n(0,l)}function H(x){Ie[x?"unshift":"push"](()=>{m=x,n(2,m)})}function U(){v=this.files,n(3,v)}function G(){b=this.value,n(5,b)}function fe(){w=this.value,n(6,w)}return s.$$set=x=>{"user_name"in x&&n(0,l=x.user_name),"user_pic"in x&&n(1,c=x.user_pic),"lang"in x&&n(11,a=x.lang),"checked"in x&&n(10,h=x.checked),"abonent"in x&&n(12,f=x.abonent),"upload"in x&&n(2,m=x.upload),"files"in x&&n(3,v=x.files)},[l,c,m,v,p,b,w,B,L,Z,h,a,f,z,N,H,U,G,fe]}class Bg extends tt{constructor(r){super(),nt(this,r,Mg,Lg,et,{user_name:0,user_pic:1,lang:11,checked:10,abonent:12,upload:2,files:3})}}const Ug="CPkJ1MYWC7DMlvw6MvtV0yBw",j0={"Content-Type":"application/json",Authorization:`Bearer ${Ug}`};class Wg{constructor(r){this.msg_signal_oper=Rr,this.msg_signal_user=Dr,this.operator=r}async SendMessage(r,n){r.operator=this.operator;let o;o=await fetch("./",{method:"POST",body:JSON.stringify({par:r}),headers:{headers:j0}});const{resp:l}=await o.json();n&&n(l)}async CallWaiting(r){r.func="callwaiting";const n=await fetch("/operator/",{method:"POST",body:JSON.stringify({par:r}),headers:{headers:j0}}),{resp:o}=await n.json();let l=o;Array.isArray(l)?l.map(c=>{Rr.set(c)}):Rr.set(l),this.CallWaiting(r)}async OperatorWaiting(r){const n=await fetch("/user/",{method:"POST",body:JSON.stringify({par:r}),headers:{headers:j0}}),{resp:o}=await n.json();let l=o;Array.isArray(l)?l.map(c=>{Dr.set(c)}):Dr.set(l),this.OperatorWaiting(r)}}function Fg(s){let r,n,o,l,c,a;function h(p){s[6](p)}let f={};s[1]!==void 0&&(f.$langs=s[1]),r=new o1({props:f}),Ie.push(()=>$e(r,"$langs",h));function m(p){s[7](p)}let v={"data-sveltekit-prefetch":!0,abonent:s[4],user_pic:s[2],lang:s[1]};return s[0]!==void 0&&(v.checked=s[0]),l=new Bg({props:v}),Ie.push(()=>$e(l,"checked",m)),{c(){Ye(r.$$.fragment),o=re(),Ye(l.$$.fragment)},l(p){je(r.$$.fragment,p),o=ie(p),je(l.$$.fragment,p)},m(p,b){Ze(r,p,b),Q(p,o,b),Ze(l,p,b),a=!0},p(p,b){const w={};!n&&b&2&&(n=!0,w.$langs=p[1],Qe(()=>n=!1)),r.$set(w);const A={};b&2&&(A.lang=p[1]),!c&&b&1&&(c=!0,A.checked=p[0],Qe(()=>c=!1)),l.$set(A)},i(p){a||(se(r.$$.fragment,p),se(l.$$.fragment,p),a=!0)},o(p){de(r.$$.fragment,p),de(l.$$.fragment,p),a=!1},d(p){p&&k(o),Xe(r,p),Xe(l,p)}}}function Ng(s){let r,n;return r=new Pg({props:{email:s[3],abonent:s[4]}}),{c(){Ye(r.$$.fragment)},l(o){je(r.$$.fragment,o)},m(o,l){Ze(r,o,l),n=!0},p:We,i(o){n||(se(r.$$.fragment,o),n=!0)},o(o){de(r.$$.fragment,o),n=!1},d(o){Xe(r,o)}}}function zg(s){let r,n,o,l;const c=[Ng,Fg],a=[];function h(f,m){return f[0]?0:1}return r=h(s),n=a[r]=c[r](s),{c(){n.c(),o=_t()},l(f){n.l(f),o=_t()},m(f,m){a[r].m(f,m),Q(f,o,m),l=!0},p(f,[m]){let v=r;r=h(f),r===v?a[r].p(f,m):(Sn(),de(a[v],1,1,()=>{a[v]=null}),Cn(),n=a[r],n?n.p(f,m):(n=a[r]=c[r](f),n.c()),se(n,1),n.m(o.parentNode,o))},i(f){l||(se(n),l=!0)},o(f){de(n),l=!1},d(f){f&&k(o),a[r].d(f)}}}function Hg(s,r,n){let o,l,c,a,h;Le(s,Ci,T=>n(8,o=T)),Le(s,Ls,T=>n(9,l=T)),Le(s,Oi,T=>n(10,c=T)),Le(s,Qt,T=>n(1,a=T)),Le(s,qn,T=>n(11,h=T));let{data:f}=r,m=f.check,v=f.picture?f.picture.medium:"";const p=f.operator,b=f.abonent;rn(qn,h=new Wg(p),h),rn(Qt,a=f.lang,a),rn(Oi,c=f.dict[0],c),rn(Ls,l=f.ice_conf,l),rn(Ci,o=JSON.parse(f.users),o),lu("users",o),$t(async()=>{});function w(T){a=T,Qt.set(a)}function A(T){m=T,n(0,m)}return s.$$set=T=>{"data"in T&&n(5,f=T.data)},[m,a,v,p,b,f,w,A]}class Zg extends tt{constructor(r){super(),nt(this,r,Hg,zg,et,{data:5})}}export{Zg as component,Kg as universal};
