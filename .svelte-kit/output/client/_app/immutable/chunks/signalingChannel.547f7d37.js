import{r as Jt,s as We,A as wt,n as we,o as Ft,f as Oe,a as Jn,u as Kn,g as Yn,b as Zn,c as Be,B as C1,l as Cr,C as $l,h as ut,d as Mn,D as mr,E as Eu,e as S1}from"./scheduler.09e37659.js";import{l as le,m as ae,S as xe,i as He,e as U,t as Ue,s as ne,c as N,a as J,b as Ne,d as S,f as re,k as C,x as k,g as W,h as L,D as ue,j as It,n as Re,A as nn,E as nt,B as Pe,C as Le,q as at,r as qe,u as Ge,v as je,p as Gt,o as jt,w as Je,F as Xn,G as z0,H as k1,I as E1,J as O1}from"./index.0089bb03.js";import{w as ro}from"./paths.d27590c6.js";import{p as eo,m as yr,s as Li,u as Mi,l as Sn,e as Ur,d as Ou,b as Di,a as io,c as Nr,v as I1}from"./stores.8b626080.js";function _t(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function T1(s,r){s.d(1),r.delete(s.key)}function A1(s,r){ae(s,1,1,()=>{r.delete(s.key)})}function Iu(s,r,t,i,o,a,u,f,c,d,g,p){let m=s.length,v=a.length,P=m;const O={};for(;P--;)O[s[P].key]=P;const I=[],A=new Map,z=new Map,x=[];for(P=v;P--;){const R=p(o,a,P),j=t(R);let Z=u.get(j);Z?i&&x.push(()=>Z.p(R,r)):(Z=d(j,R),Z.c()),A.set(j,I[P]=Z),j in O&&z.set(j,Math.abs(P-O[j]))}const M=new Set,ee=new Set;function H(R){le(R,1),R.m(f,g),u.set(R.key,R),g=R.first,v--}for(;m&&v;){const R=I[v-1],j=s[m-1],Z=R.key,Y=j.key;R===j?(g=R.first,m--,v--):A.has(Y)?!u.has(Z)||M.has(Z)?H(R):ee.has(Y)?m--:z.get(Z)>z.get(Y)?(ee.add(Z),H(R)):(M.add(Y),m--):(c(j,u),m--)}for(;m--;){const R=s[m];A.has(R.key)||c(R,u)}for(;v;)H(I[v-1]);return Jt(x),I}function vr(s,r){const t={},i={},o={$$scope:1};let a=s.length;for(;a--;){const u=s[a],f=r[a];if(f){for(const c in u)c in f||(i[c]=1);for(const c in f)o[c]||(t[c]=f[c],o[c]=1);s[a]=f}else for(const c in u)o[c]=1}for(const u in i)u in t||(t[u]=void 0);return t}function br(s){return typeof s=="object"&&s!==null?s:{}}function U0(s,r,t){const i=s.slice();return i[8]=r[t],i}function N0(s){let r=[],t=new Map,i,o=_t(s[0]);const a=u=>u[8].id;for(let u=0;u<o.length;u+=1){let f=U0(s,o,u),c=a(f);t.set(c,r[u]=W0(c,f))}return{c(){for(let u=0;u<r.length;u+=1)r[u].c();i=Re()},l(u){for(let f=0;f<r.length;f+=1)r[f].l(u);i=Re()},m(u,f){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(u,f);W(u,i,f)},p(u,f){f&17&&(o=_t(u[0]),r=Iu(r,f,a,1,u,o,t,i.parentNode,T1,W0,i,U0))},d(u){u&&S(i);for(let f=0;f<r.length;f+=1)r[f].d(u)}}}function W0(s,r){let t,i,o,a,u=r[8].alt+"",f,c,d,g;return{key:s,first:null,c(){t=U("div"),i=U("img"),f=Ue(u),c=ne(),this.h()},l(p){t=N(p,"DIV",{style:!0});var m=J(t);i=N(m,"IMG",{src:!0,alt:!0,value:!0}),f=Ne(m,u),c=re(m),m.forEach(S),this.h()},h(){wt(i.src,o=r[8].src)||C(i,"src",o),C(i,"alt",""),C(i,"value",a=r[8].id),k(t,"padding","10px"),this.first=t},m(p,m){W(p,t,m),L(t,i),L(t,f),L(t,c),d||(g=ue(i,"click",r[4]),d=!0)},p(p,m){r=p,m&1&&!wt(i.src,o=r[8].src)&&C(i,"src",o),m&1&&a!==(a=r[8].id)&&C(i,"value",a),m&1&&u!==(u=r[8].alt+"")&&It(f,u)},d(p){p&&S(t),d=!1,g()}}}function D1(s){let r,t,i,o,a=s[2].alt+"",u,f,c,d,g,p=s[0]&&N0(s);return{c(){r=U("button"),t=U("div"),i=U("img"),u=Ue(a),f=ne(),c=U("div"),p&&p.c(),this.h()},l(m){r=N(m,"BUTTON",{class:!0});var v=J(r);t=N(v,"DIV",{style:!0});var P=J(t);i=N(P,"IMG",{src:!0,alt:!0}),u=Ne(P,a),P.forEach(S),v.forEach(S),f=re(m),c=N(m,"DIV",{class:!0});var O=J(c);p&&p.l(O),O.forEach(S),this.h()},h(){wt(i.src,o=s[2].src)||C(i,"src",o),C(i,"alt",""),k(t,"padding","10px"),C(r,"class","button collapsible svelte-1d5ftok"),C(c,"class","content svelte-1d5ftok")},m(m,v){W(m,r,v),L(r,t),L(t,i),L(t,u),W(m,f,v),W(m,c,v),p&&p.m(c,null),s[6](c),d||(g=ue(r,"click",s[3]),d=!0)},p(m,[v]){v&4&&!wt(i.src,o=m[2].src)&&C(i,"src",o),v&4&&a!==(a=m[2].alt+"")&&It(u,a),m[0]?p?p.p(m,v):(p=N0(m),p.c(),p.m(c,null)):p&&(p.d(1),p=null)},i:we,o:we,d(m){m&&(S(r),S(f),S(c)),p&&p.d(),s[6](null),d=!1,g()}}}function R1(s,r,t){let i,o,a="",{lang:u="en"}=r;i=[{id:0,lang:"en",src:"https://www.sic-info.org/wp-content/uploads/2014/01/gb.png",alt:"English"},{id:1,lang:"fr",src:"https://www.sic-info.org/wp-content/uploads/2014/01/fr.png",alt:"French"},{id:2,lang:"de",src:"https://www.sic-info.org/wp-content/uploads/2014/01/de.png",alt:"Deutch"},{id:3,lang:"ru",src:"https://www.sic-info.org/wp-content/uploads/2014/01/ru.png",alt:"Русский"}];let f={id:0,src:"https://www.sic-info.org/wp-content/uploads/2014/01/gb.png",alt:"English"};Ft(()=>{a=JSON.parse(localStorage.getItem("kolmi")),a&&t(5,u=kolmi.lang)});function c(p){o.style.maxHeight?t(1,o.style.maxHeight=null,o):t(1,o.style.maxHeight=o.scrollHeight+"px",o)}function d(p){t(2,f=i[p.currentTarget.attributes.value.value]),t(5,u=f.lang),c()}function g(p){Oe[p?"unshift":"push"](()=>{o=p,t(1,o)})}return s.$$set=p=>{"lang"in p&&t(5,u=p.lang)},[i,o,f,c,d,u,g]}class lm extends xe{constructor(r){super(),He(this,r,R1,D1,We,{lang:5})}}var _r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lo(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Tu={exports:{}};(function(s){(function(r){var t=r.URL||r.webkitURL;function i(d){return t?t.createObjectURL(d):!1}function o(d){return t?t.revokeObjectURL(d):!1}function a(d,g){d&&d.slice(0,5)==="blob:"&&!(g&&g.noRevoke)&&o(d)}function u(d,g,p,m){if(!r.FileReader)return!1;var v=new FileReader;v.onload=function(){g.call(v,this.result)},p&&(v.onabort=v.onerror=function(){p.call(v,this.error)});var P=v[m||"readAsDataURL"];if(P)return P.call(v,d),v}function f(d,g){return Object.prototype.toString.call(g)==="[object "+d+"]"}function c(d,g,p){function m(v,P){var O=document.createElement("img"),I;function A(x,M){if(v===P){v&&v(x,M);return}else if(x instanceof Error){P(x);return}M=M||{},M.image=x,v(M)}function z(x,M){M&&r.console&&console.log(M),x&&f("Blob",x)?(d=x,I=i(d)):(I=d,p&&p.crossOrigin&&(O.crossOrigin=p.crossOrigin)),O.src=I}if(O.onerror=function(x){a(I,p),P&&P.call(O,x)},O.onload=function(){a(I,p);var x={originalWidth:O.naturalWidth||O.width,originalHeight:O.naturalHeight||O.height};try{c.transform(O,p,A,d,x)}catch(M){P&&P(M)}},typeof d=="string")return c.requiresMetaData(p)?c.fetchBlob(d,z,p):z(),O;if(f("Blob",d)||f("File",d))return I=i(d),I?(O.src=I,O):u(d,function(x){O.src=x},P)}return r.Promise&&typeof g!="function"?(p=g,new Promise(m)):m(g,g)}c.requiresMetaData=function(d){return d&&d.meta},c.fetchBlob=function(d,g){g()},c.transform=function(d,g,p,m,v){p(d,v)},c.global=r,c.readFile=u,c.isInstanceOf=f,c.createObjectURL=i,c.revokeObjectURL=o,s.exports?s.exports=c:r.loadImage=c})(typeof window<"u"&&window||_r)})(Tu);var Au=Tu.exports;const oo=lo(Au);var P1={exports:{}};(function(s){(function(r){s.exports?r(Au):r(window.loadImage)})(function(r){var t=r.transform;r.createCanvas=function(i,o,a){if(a&&r.global.OffscreenCanvas)return new OffscreenCanvas(i,o);var u=document.createElement("canvas");return u.width=i,u.height=o,u},r.transform=function(i,o,a,u,f){t.call(r,r.scale(i,o,f),o,a,u,f)},r.transformCoordinates=function(){},r.getTransformedOptions=function(i,o){var a=o.aspectRatio,u,f,c,d;if(!a)return o;u={};for(f in o)Object.prototype.hasOwnProperty.call(o,f)&&(u[f]=o[f]);return u.crop=!0,c=i.naturalWidth||i.width,d=i.naturalHeight||i.height,c/d>a?(u.maxWidth=d*a,u.maxHeight=d):(u.maxWidth=c,u.maxHeight=c/a),u},r.drawImage=function(i,o,a,u,f,c,d,g,p){var m=o.getContext("2d");return p.imageSmoothingEnabled===!1?(m.msImageSmoothingEnabled=!1,m.imageSmoothingEnabled=!1):p.imageSmoothingQuality&&(m.imageSmoothingQuality=p.imageSmoothingQuality),m.drawImage(i,a,u,f,c,0,0,d,g),m},r.requiresCanvas=function(i){return i.canvas||i.crop||!!i.aspectRatio},r.scale=function(i,o,a){o=o||{},a=a||{};var u=i.getContext||r.requiresCanvas(o)&&!!r.global.HTMLCanvasElement,f=i.naturalWidth||i.width,c=i.naturalHeight||i.height,d=f,g=c,p,m,v,P,O,I,A,z,x,M,ee,H;function R(){var Z=Math.max((v||d)/d,(P||g)/g);Z>1&&(d*=Z,g*=Z)}function j(){var Z=Math.min((p||d)/d,(m||g)/g);Z<1&&(d*=Z,g*=Z)}if(u&&(o=r.getTransformedOptions(i,o,a),A=o.left||0,z=o.top||0,o.sourceWidth?(O=o.sourceWidth,o.right!==void 0&&o.left===void 0&&(A=f-O-o.right)):O=f-A-(o.right||0),o.sourceHeight?(I=o.sourceHeight,o.bottom!==void 0&&o.top===void 0&&(z=c-I-o.bottom)):I=c-z-(o.bottom||0),d=O,g=I),p=o.maxWidth,m=o.maxHeight,v=o.minWidth,P=o.minHeight,u&&p&&m&&o.crop?(d=p,g=m,ee=O/I-p/m,ee<0?(I=m*O/p,o.top===void 0&&o.bottom===void 0&&(z=(c-I)/2)):ee>0&&(O=p*I/m,o.left===void 0&&o.right===void 0&&(A=(f-O)/2))):((o.contain||o.cover)&&(v=p=p||v,P=m=m||P),o.cover?(j(),R()):(R(),j())),u){if(x=o.pixelRatio,x>1&&!(i.style.width&&Math.floor(parseFloat(i.style.width,10))===Math.floor(f/x))&&(d*=x,g*=x),r.orientationCropBug&&!i.getContext&&(A||z||O!==f||I!==c)&&(ee=i,i=r.createCanvas(f,c,!0),r.drawImage(ee,i,0,0,f,c,f,c,o)),M=o.downsamplingRatio,M>0&&M<1&&d<O&&g<I)for(;O*M>d;)H=r.createCanvas(O*M,I*M,!0),r.drawImage(i,H,A,z,O,I,H.width,H.height,o),A=0,z=0,O=H.width,I=H.height,i=H;return H=r.createCanvas(d,g),r.transformCoordinates(H,o,a),x>1&&(H.style.width=H.width/x+"px"),r.drawImage(i,H,A,z,O,I,d,g,o).setTransform(1,0,0,1,0,0),H}return i.width=d,i.height=g,i}})})(P1);const L1=s=>({}),x0=s=>({});function M1(s){let r,t,i;const o=s[4].footer,a=Jn(o,s,s[3],x0);return{c(){r=U("video"),t=ne(),a&&a.c(),this.h()},l(u){r=N(u,"VIDEO",{poster:!0,style:!0}),J(r).forEach(S),t=re(u),a&&a.l(u),this.h()},h(){C(r,"poster",s[1]),r.autoplay=!0,r.playsInline=!0,r.muted=!0,k(r,"display",B1),k(r,"position","absolute"),k(r,"top","-15px"),k(r,"width","100px"),k(r,"height","100px"),k(r,"z-index","20")},m(u,f){W(u,r,f),s[5](r),W(u,t,f),a&&a.m(u,f),i=!0},p(u,[f]){(!i||f&2)&&C(r,"poster",u[1]),a&&a.p&&(!i||f&8)&&Kn(a,o,u,u[3],i?Zn(o,u[3],f,L1):Yn(u[3]),x0)},i(u){i||(le(a,u),i=!0)},o(u){ae(a,u),i=!1},d(u){u&&(S(r),S(t)),s[5](null),a&&a.d(u)}}}let B1="block";function F1(s,r,t){let i;Be(s,eo,d=>t(1,i=d));let{$$slots:o={},$$scope:a}=r,{srcObject:u=""}=r,f;Ft(async()=>{});function c(d){Oe[d?"unshift":"push"](()=>{f=d,t(0,f),t(2,u)})}return s.$$set=d=>{"srcObject"in d&&t(2,u=d.srcObject),"$$scope"in d&&t(3,a=d.$$scope)},s.$$.update=()=>{s.$$.dirty&2,s.$$.dirty&5&&(f&&u?t(0,f.srcObject=u,f):f&&f.srcObject&&(f.srcObject.getVideoTracks().forEach(d=>{d.stop(),f.srcObject.removeTrack(d)}),t(0,f.src="",f)))},[f,i,u,a,o,c]}class z1 extends xe{constructor(r){super(),He(this,r,F1,M1,We,{srcObject:2})}}var Du={exports:{}},Ru={exports:{}};(function(){var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,i){return t<<i|t>>>32-i},rotr:function(t,i){return t<<32-i|t>>>i},endian:function(t){if(t.constructor==Number)return r.rotl(t,8)&16711935|r.rotl(t,24)&4278255360;for(var i=0;i<t.length;i++)t[i]=r.endian(t[i]);return t},randomBytes:function(t){for(var i=[];t>0;t--)i.push(Math.floor(Math.random()*256));return i},bytesToWords:function(t){for(var i=[],o=0,a=0;o<t.length;o++,a+=8)i[a>>>5]|=t[o]<<24-a%32;return i},wordsToBytes:function(t){for(var i=[],o=0;o<t.length*32;o+=8)i.push(t[o>>>5]>>>24-o%32&255);return i},bytesToHex:function(t){for(var i=[],o=0;o<t.length;o++)i.push((t[o]>>>4).toString(16)),i.push((t[o]&15).toString(16));return i.join("")},hexToBytes:function(t){for(var i=[],o=0;o<t.length;o+=2)i.push(parseInt(t.substr(o,2),16));return i},bytesToBase64:function(t){for(var i=[],o=0;o<t.length;o+=3)for(var a=t[o]<<16|t[o+1]<<8|t[o+2],u=0;u<4;u++)o*8+u*6<=t.length*8?i.push(s.charAt(a>>>6*(3-u)&63)):i.push("=");return i.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/ig,"");for(var i=[],o=0,a=0;o<t.length;a=++o%4)a!=0&&i.push((s.indexOf(t.charAt(o-1))&Math.pow(2,-2*a+8)-1)<<a*2|s.indexOf(t.charAt(o))>>>6-a*2);return i}};Ru.exports=r})();var U1=Ru.exports,to={utf8:{stringToBytes:function(s){return to.bin.stringToBytes(unescape(encodeURIComponent(s)))},bytesToString:function(s){return decodeURIComponent(escape(to.bin.bytesToString(s)))}},bin:{stringToBytes:function(s){for(var r=[],t=0;t<s.length;t++)r.push(s.charCodeAt(t)&255);return r},bytesToString:function(s){for(var r=[],t=0;t<s.length;t++)r.push(String.fromCharCode(s[t]));return r.join("")}}},H0=to;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var N1=function(s){return s!=null&&(Pu(s)||W1(s)||!!s._isBuffer)};function Pu(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function W1(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&Pu(s.slice(0,0))}(function(){var s=U1,r=H0.utf8,t=N1,i=H0.bin,o=function(a,u){a.constructor==String?u&&u.encoding==="binary"?a=i.stringToBytes(a):a=r.stringToBytes(a):t(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var f=s.bytesToWords(a),c=a.length*8,d=1732584193,g=-271733879,p=-1732584194,m=271733878,v=0;v<f.length;v++)f[v]=(f[v]<<8|f[v]>>>24)&16711935|(f[v]<<24|f[v]>>>8)&4278255360;f[c>>>5]|=128<<c%32,f[(c+64>>>9<<4)+14]=c;for(var P=o._ff,O=o._gg,I=o._hh,A=o._ii,v=0;v<f.length;v+=16){var z=d,x=g,M=p,ee=m;d=P(d,g,p,m,f[v+0],7,-680876936),m=P(m,d,g,p,f[v+1],12,-389564586),p=P(p,m,d,g,f[v+2],17,606105819),g=P(g,p,m,d,f[v+3],22,-1044525330),d=P(d,g,p,m,f[v+4],7,-176418897),m=P(m,d,g,p,f[v+5],12,1200080426),p=P(p,m,d,g,f[v+6],17,-1473231341),g=P(g,p,m,d,f[v+7],22,-45705983),d=P(d,g,p,m,f[v+8],7,1770035416),m=P(m,d,g,p,f[v+9],12,-1958414417),p=P(p,m,d,g,f[v+10],17,-42063),g=P(g,p,m,d,f[v+11],22,-1990404162),d=P(d,g,p,m,f[v+12],7,1804603682),m=P(m,d,g,p,f[v+13],12,-40341101),p=P(p,m,d,g,f[v+14],17,-1502002290),g=P(g,p,m,d,f[v+15],22,1236535329),d=O(d,g,p,m,f[v+1],5,-165796510),m=O(m,d,g,p,f[v+6],9,-1069501632),p=O(p,m,d,g,f[v+11],14,643717713),g=O(g,p,m,d,f[v+0],20,-373897302),d=O(d,g,p,m,f[v+5],5,-701558691),m=O(m,d,g,p,f[v+10],9,38016083),p=O(p,m,d,g,f[v+15],14,-660478335),g=O(g,p,m,d,f[v+4],20,-405537848),d=O(d,g,p,m,f[v+9],5,568446438),m=O(m,d,g,p,f[v+14],9,-1019803690),p=O(p,m,d,g,f[v+3],14,-187363961),g=O(g,p,m,d,f[v+8],20,1163531501),d=O(d,g,p,m,f[v+13],5,-1444681467),m=O(m,d,g,p,f[v+2],9,-51403784),p=O(p,m,d,g,f[v+7],14,1735328473),g=O(g,p,m,d,f[v+12],20,-1926607734),d=I(d,g,p,m,f[v+5],4,-378558),m=I(m,d,g,p,f[v+8],11,-2022574463),p=I(p,m,d,g,f[v+11],16,1839030562),g=I(g,p,m,d,f[v+14],23,-35309556),d=I(d,g,p,m,f[v+1],4,-1530992060),m=I(m,d,g,p,f[v+4],11,1272893353),p=I(p,m,d,g,f[v+7],16,-155497632),g=I(g,p,m,d,f[v+10],23,-1094730640),d=I(d,g,p,m,f[v+13],4,681279174),m=I(m,d,g,p,f[v+0],11,-358537222),p=I(p,m,d,g,f[v+3],16,-722521979),g=I(g,p,m,d,f[v+6],23,76029189),d=I(d,g,p,m,f[v+9],4,-640364487),m=I(m,d,g,p,f[v+12],11,-421815835),p=I(p,m,d,g,f[v+15],16,530742520),g=I(g,p,m,d,f[v+2],23,-995338651),d=A(d,g,p,m,f[v+0],6,-198630844),m=A(m,d,g,p,f[v+7],10,1126891415),p=A(p,m,d,g,f[v+14],15,-1416354905),g=A(g,p,m,d,f[v+5],21,-57434055),d=A(d,g,p,m,f[v+12],6,1700485571),m=A(m,d,g,p,f[v+3],10,-1894986606),p=A(p,m,d,g,f[v+10],15,-1051523),g=A(g,p,m,d,f[v+1],21,-2054922799),d=A(d,g,p,m,f[v+8],6,1873313359),m=A(m,d,g,p,f[v+15],10,-30611744),p=A(p,m,d,g,f[v+6],15,-1560198380),g=A(g,p,m,d,f[v+13],21,1309151649),d=A(d,g,p,m,f[v+4],6,-145523070),m=A(m,d,g,p,f[v+11],10,-1120210379),p=A(p,m,d,g,f[v+2],15,718787259),g=A(g,p,m,d,f[v+9],21,-343485551),d=d+z>>>0,g=g+x>>>0,p=p+M>>>0,m=m+ee>>>0}return s.endian([d,g,p,m])};o._ff=function(a,u,f,c,d,g,p){var m=a+(u&f|~u&c)+(d>>>0)+p;return(m<<g|m>>>32-g)+u},o._gg=function(a,u,f,c,d,g,p){var m=a+(u&c|f&~c)+(d>>>0)+p;return(m<<g|m>>>32-g)+u},o._hh=function(a,u,f,c,d,g,p){var m=a+(u^f^c)+(d>>>0)+p;return(m<<g|m>>>32-g)+u},o._ii=function(a,u,f,c,d,g,p){var m=a+(f^(u|~c))+(d>>>0)+p;return(m<<g|m>>>32-g)+u},o._blocksize=16,o._digestsize=16,Du.exports=function(a,u){if(a==null)throw new Error("Illegal argument "+a);var f=s.wordsToBytes(o(a,u));return u&&u.asBytes?f:u&&u.asString?i.bytesToString(f):s.bytesToHex(f)}})();var x1=Du.exports;const wr=lo(x1);let H1=class{constructor(r,t,i){this.con=new RTCPeerConnection(t),this.rtc=r,this.pc_key=i,this.params={}}SendDesc(r,t){let i=this,o={};o.proj="kolmit",o.func="call",o.abonent=i.rtc.abonent,o.type=this.rtc.type,o.em=this.rtc.em,o.uid=this.rtc.uid,o.desc=r,o.status="call",o.abonent=this.rtc.abonent,o.oper_uid=this.rtc.oper_uid,this.rtc.status="call",this.rtc.signal.SendMessage(o,function(){t()})}SendCand(r,t){let i={};i.proj="kolmit",i.func="call",i.type=this.rtc.type,i.uid=this.rtc.uid,i.em=this.rtc.em,i.cand=r,i.status="call",i.abonent=this.rtc.abonent,i.oper_uid=this.rtc.oper_uid,this.rtc.status="call",this.rtc.signal.SendMessage(i,function(){t()})}StartEvents(){let r=this;this.con.ontrack=function(t){r.pc_key!=="reserve"&&(r.rtc.GetRemoteAudio()!==t.streams[0]&&(r.rtc.remoteStream=t.streams[0],r.rtc.remoteStream.onaddtrack=function(i){console.log("addtrack in remote stream",r)}),r.rtc.remoteStream&&(t.track.kind==="audio"&&(r.rtc.SetRemoteAudio(null),r.rtc.SetRemoteAudio(r.rtc.remoteStream)),t.track.kind==="video"&&(r.rtc.SetRemoteVideo(null),r.rtc.SetRemoteVideo(r.rtc.remoteStream),r.rtc.DC.SendDCVideoOK(()=>{}))))},r.rtc.type==="user"&&(this.con.onicecandidate=t=>{let i=this;if(t.candidate)if(this.params.loc_cand||(this.params.loc_cand=[]),this.params.loc_cand.push(t.candidate),this.rtc.DC&&this.rtc.DC.dc.readyState==="open"){let o="";this.rtc.type&&this.rtc.type.offerToReceiveVideo===1&&(o={confirm:"Do you mind to turn on the cameras?"}),this.rtc.DC.SendDCCand(t.candidate,i.pc_key,o)}else this.SendCand(t.candidate,function(){})}),this.con.oniceconnectionstatechange=function(t){r.rtc.onIceStateChange(r,t)},this.con.onremovestream=function(t){},this.con.onsignalingstatechange=function(t){},this.con.onconnectionstatechange=function(t){console.log()}}onCreateAnswerSuccess(r){let t=this;console.log("Answer from pcPull 2:",this),console.log("setLocalDescription start",t),t.con.setLocalDescription(r).then(function(){t.params.loc_desc=t.con.localDescription,console.log("onSetLocalDescriptionSuccess",t),t.SendDesc(r,function(){})},t.onSetAnswerError)}setRemoteDesc(r){let t=this;console.log("setRemoteDescription start",t),console.log("Peer connectionState:"+this.con.connectionState,t),this.con.setRemoteDescription(r).then(function(){t.params.rem_desc=t.con.remoteDescription,t.con.remoteDescription.type==="offer"&&t.con.createAnswer().then(i=>t.onCreateAnswerSuccess(i),t.onCreateAnswerError)},function(i){console.log("Failed to set remote description: "+i.toString(),this)})}onCreateAnswerError(r){console.log("Failed to create answer: "+r.toString(),this)}onCreateOfferSuccess(r){let t=this;console.log("Offer created",t),console.log("setLocalDescription start",t),t.con.setLocalDescription(r).then(function(){t.params.loc_desc=t.con.localDescription,console.log(" setLocalDescription complete",t)},t.onSetOfferError)}onCreateVideoOfferSuccess(r,t){let i=this;console.log("Offer created",i),console.log("setLocalDescription start",i),i.con.setLocalDescription(r).then(function(){i.params.loc_desc=i.con.localDescription,log(" setLocalDescription complete",i),i.rtc.DC.SendDCDesc(r,i.pc_key)},i.onSetOfferError)}onSetOfferError(r){console.log("Failed to set offer: "+r.toString(),this)}onSetAnswerError(r){console.log("Failed to set session description: "+r.toString(),this)}onAddIceCandidateSuccess(r){console.log(" addIceCandidate success",this)}onAddIceCandidateError(r,t){console.log(" failed to add ICE Candidate: "+t.toString(),this)}onCreateOfferError(r){console.log("Failed to create session description: "+r.toString(),this)}onAddVideo(r){let t=this,i="Do you mind to turn on the cameras?";t.rtc.DC&&t.rtc.DC.dc.readyState==="open"&&t.rtc.DC.SendData({confirm:i})}onCreateSessionDescriptionError(r){}Cancel(){this.close()}};class V1{constructor(r,t){this.rtc=r,this.pc=t,this.call_num=3,this.dc=t.con.createDataChannel(t.pc_key+" data channel"),this.forward;let i=this;i.cnt_call=0,this.dc.onclose=()=>{},t.StartEvents(),t.con.ondatachannel=f=>{console.log("Receive Channel Callback"),this.dc=f.channel,this.dc.onopen=()=>(i.dc.readyState==="open"&&console.log(i.pc.pc_key+" datachannel open"),i.SendDCCall(),!0)};let o="",a=[],u=0;this.dc.removeEventListener("message",this.dc.onmessage),this.dc.onmessage=function(f){try{let c=JSON.parse(f.data);if(c.type==="eom"){i.rtc.OnMessage(JSON.parse(o),i),i.rtc.SendToComponent(JSON.parse(o)),o="";return}if(o+=c.slice,c.file&&(document.getElementById("dataProgress").attributes.max=c.length),c.type==="eof"){const d=new Blob(a);if(a=[],u=0,confirm("Получен файл: "+c.file+". Размер: "+c.length+" Сохранить?")){let g=document.getElementById("download_href");g.text("Получен файл: "+c.file+". Размер: "+c.length+" Сохранить?"),g.attributes.href="URL.createObjectURL(received)",g.attributes.download=c.file,g.click()}setTimeout(function(){document.getElementById("dataProgress").style.display="none"},2e3);return}}catch{if(o="",!f.data.byteLength)return}}}SendFile(r,t,i){try{if(this.dc.readyState==="open"){let o=16384;const a=Math.ceil(r.byteLength/o);this.dc.send(JSON.stringify({file:t,length:r.byteLength}),function(u){console.log(u)});for(let u=0,f=0;u<a;++u,f+=o){const c=r.slice(f,f+o);let d=document.getElementById("dataProgress");this.dc.send(c,function(g){console.log(g)})}setTimeout(function(){document.getElementById("dataProgress").style.display="none"},2e3),this.dc.send(JSON.stringify({type:"eof",file:t,length:r.byteLength}),function(u){console.log(u),i()})}}catch(o){console.log(o)}}SendData(r,t){try{if(this.dc.readyState==="open"){r=JSON.stringify(r);let i=16384;const o=Math.ceil(r.length/i);for(let a=0,u=0;a<o;++a,u+=i)this.dc.send(JSON.stringify({slice:r.substr(u,i)}));this.dc.send(JSON.stringify({type:"eom"}))}t&&t()}catch(i){console.log(i)}}SendDCCall(){let r=this,t={};t.proj="kolmit",t.uid=r.rtc.uid,t.func="call",t.call=r.rtc.call_num,t.type=r.rtc.type,t.email=r.rtc.email.from,t.profile={email:r.rtc.em,name:r.rtc.em},r.dc.readyState==="open"&&r.SendData(t),r.rtc.OnOpenDataChannel()}SendDCHangup(r){let t={};t.proj="kolmit",t.func="mute",t.type=this.rtc.type,this.SendData(t,r)}SendDCClose(r){let t={};t.proj="kolmit",t.func="close",t.type=this.rtc.type,this.SendData(t,r)}SendDCTalk(r){let t={};t.proj="kolmit",t.func="talk",t.type=this.rtc.type,this.SendData(t,r)}SendDCCand(r,t,i){let o={};o.proj="kolmit",o.func="offer",o.cand=r,o.trans=t,o.abonent=this.rtc.abonent,o.msg=i,this.SendData(o)}SendDCDesc(r,t,i){let o={};o.proj="kolmit",o.func="offer",o.desc=r,o.trans=t,o.abonent=this.rtc.abonent,o.msg=i,this.SendData(o)}SendDCOffer(r,t){let i={};i.proj="kolmit",i.func="offer",i.desc=this.pc.params.loc_desc,i.cand=this.pc.params.loc_cand,i.trans=r,i.abonent=this.rtc.abonent,i.msg=t,this.SendData(i)}SendDCVideoOK(r){let t={};t.proj="kolmit",t.func="video",t.type=this.rtc.type,this.SendData(t,r)}}const Lu={stun:{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302"]},turn:{urls:["turn:delivery-angels.com:3478?transport=udp","turn:delivery-angels.com:3478?transport=tcp","turn:delivery-angels.com:5349?transport=udp","turn:delivery-angels.com:5349?transport=tcp"],username:"guest",credential:"password"},lifetimeDuration:"86400s"};let q1=class{constructor(r,t,i){this.type=r.type,this.abonent=r.abonent,this.em=r.em,this.uid=t,this.signal=i,this.email={from:"",to:""},this.pcPull={},this.main_pc,this.origin=location.origin,this.url,this.localStream,this.remoteStream,this.startTime,this.phone=""}async SendCheck(){let r={};r.proj="kolmit",r.func="check",r.status="check",r.type=this.type,r.abonent=this.abonent,r.em=this.em,r.uid=this.uid,this.signal.SendMessage(r,()=>{this.status="check"})}SendVideoOffer(r){let t=this;t.pcPull[r].params.loc_desc="",t.pcPull[r].params.loc_cand="",t.pcPull[r].con.createOffer(t.mode={offerToReceiveAudio:1,offerToReceiveVideo:1,iceRestart:1}).then(i=>t.pcPull[r].onCreateVideoOfferSuccess(i),t.pcPull[r].onCreateOfferError)}onIceStateChange(r,t){let i=this;r&&(r.con.iceConnectionState==="new"&&console.log(r.pc_key+" ICE state change event: new",i),r.con.iceConnectionState==="checking"&&(console.log(r.pc_key+" ICE state change event: checking",i),i.checking_tmr=setTimeout(function(){r.con.restartIce()},5e3)),r.con.iceConnectionState==="disconnected"&&(console.log(r.pc_key+" ICE state change event: disconnected",i),r.con.restartIce()),r.con.iceConnectionState==="connected"&&(clearTimeout(i.checking_tmr),console.log(r.pc_key+" ICE state change event: connected",i),i.main_pc=r.pc_key),r.con.iceConnectionState==="failed"&&(console.log(r.pc_key+" ICE state change event: failed",i),r.con.restartIce()),r.con.iceConnectionState==="completed"&&console.log(r.pc_key+" ICE state change event: completed",i),console.log(r.pc_key+" ICE state change event: "+t.type,i))}TransFile(r){let t=this;async function i(){const a=r.files[0];if(a||console.log("No file chosen"),a.size===0)return;dataProgress.style.display="block",dataProgress.attributes.max=a.size;let u=new FileReader;u.onload=f=>{console.log("FileRead.onload ",f),t.DC.SendFile(f.target.result,a.name)},u.readAsArrayBuffer(a)}r.removeEventListener("change",r.onchange),r.onchange=i;let o=new PointerEvent("click",{bubbles:!1,cancelable:!0,view:window});r.dispatchEvent(o)}get RemoteStream(){return this.remoteStream}async InitRTC(r,t){let i=this;this.conf=Lu;let o={iceTransportPolicy:"all",lifetimeDuration:this.conf.lifetimeDuration,rtcpMuxPolicy:"require",bundlePolicy:"balanced",iceServers:[this.conf.stun,this.conf.turn]};i.pcPull[r]&&(i.DC&&(i.DC.dc.close(),i.DC=null),i.pcPull[r].con&&(i.pcPull[r].con.close(),i.pcPull[r].con=null));let a=i.pcPull[r]?i.pcPull[r].params:{};i.pcPull[r]=null,i.pcPull[r]=new H1(i,o,r),i.pcPull[r].signal=null,i.pcPull[r].signal=i.signal,a&&(i.pcPull[r].params=a),i.DC=new V1(i,i.pcPull[r]),this.startTime=Date.now(),t()}GetUserMedia(r,t){navigator.mediaDevices.getUserMedia(r).then(i=>this.gotStream(i,t)).catch(function(i){(i.name==="NotFoundError"||i.name==="NotReadableError")&&(r.audio&&alert("Something wrong with mic?"),r.video&&alert("Something wrong with camera?"),t(!1))})}gotStream(r,t){this.localStream||(this.localStream=r),this.getTracks(r,t)}getTracks(r,t){let i=this;r.getTracks().forEach(u=>{for(let f in i.pcPull)f!=="reserve"&&(i.pcPull[f].con.iceConnectionState==="disconnected"||i.pcPull[f].con.iceConnectionState==="closed"||(i.localStream.addTrack(u),i.pcPull[f].sender=i.pcPull[f].con.addTrack(u,i.localStream),u.kind==="video"?window.user.SetLocalVideo(i.localStream):u.kind))});var o=this.localStream.getVideoTracks(),a=this.localStream.getAudioTracks();o.length>0&&console.log("Using video device: "+o[0].label,i),a.length>0&&console.log("Using audio device: "+a[0].label,i),t(!0)}SendStatus(r){let t={};t.proj="kolmit",t.func="status",t.type=this.type,t.abonent=this.abonent.toLowerCase(),t.uid=this.uid,t.em=this.em.toLowerCase(),t.status=r,this.signal.SendMessage(t,()=>{this.status=r})}RemoveTracks(){let r=this;r.localStream&&(r.localStream.getVideoTracks().forEach(o=>{o.readyState=="live"&&o.kind==="video"&&o.stop(),r.localStream.removeTrack(o)}),r.localStream.getAudioTracks().forEach(o=>{o.readyState=="live"&&o.kind==="audio"&&o.stop(),r.localStream.removeTrack(o)}))}};class G1 extends q1{constructor(r,t,i){super(r,t,i),this.redirected=!1,this.component="",this.checking_tmr,this.fileInput=document.getElementsByClassName("fileInput")[0]?document.getElementsByClassName("fileInput")[0]:"",this.dataProgress=document.getElementById("dataProgress")?document.getElementById("dataProgress"):"",yr.subscribe(o=>{try{o&&this.OnMessage(o)}catch(a){console.log(a)}})}Init(r){let t=this;this.mode="";let i=[this.abonent];t.main_pc="";for(let o in i)t.InitRTC(i[o],function(){r()})}Call(){this.Init(()=>{this.GetUserMedia({audio:1,video:0},()=>{let r={};r.proj="kolmit",r.func="call",r.status="call",r.type=this.type,r.abonent=this.abonent.toLowerCase(),r.em=this.em.toLowerCase(),r.uid=this.uid,this.signal.SendMessage(r,()=>{this.status="call"})})})}Hangup(){this.DC&&(this.DC.SendDCHangup(()=>{}),this.Init(()=>{this.SendCheck()}))}OnMessage(r){let t=this;if(r.operators&&r.em===t.em&&r.operators[t.abonent]&&r.operators[t.abonent].abonent===t.abonent&&(r.operators[t.abonent].status==="offer"||r.operators[t.abonent].status==="close"&&r.operators[t.abonent].uid===t.oper_uid&&(t.RemoveTracks(),t.Hangup())),r.operator&&(r.operator.em,t.abonent),r.func==="mute"&&(t.RemoveTracks(),t.Init(()=>{t.SendCheck()})),(r.call||r.func==="call")&&console.log("received call: "+r.call+" from "+t.type,t),r.func==="redirect"&&(t.em=r.abonent.operator,t.InitRTC(r.abonent.operator,async()=>{await new Promise((o,a)=>{t.Call(o)})})),r.oper_uid&&(t.oper_uid=r.oper_uid),r.desc&&t.pcPull[r.abonent]&&(t.pcPull[r.abonent].con.connectionState==="failed"&&t.pcPull[r.abonent].con.restartIce(),t.pcPull[r.abonent]&&(t.pcPull[r.abonent].params.rem_desc=r.desc,t.pcPull[r.abonent].setRemoteDesc(r.desc))),r.cand&&t.pcPull[r.abonent]&&t.pcPull[r.abonent]){if(t.pcPull[r.abonent].con.signalingState==="closed")return;try{if(t.pcPull[r.abonent].params.rem_cand=r.cand,Array.isArray(r.cand))for(let i in r.cand)t.pcPull[r.abonent].con.addIceCandidate(r.cand[i]);else t.pcPull[r.abonent].con.addIceCandidate(r.cand)}catch(i){console.log(i)}}}}let j1=ro(),J1=ro();function K1(s){let r,t,i=`input {\r
      border-width: 0;\r
    }\r
\r
    .form-signin {\r
      background-color: white;\r
      max-width: 90%;\r
      /* max-height: 90%;            */\r
      border: 3px solid grey;\r
      padding: 10px;\r
      margin: 0 auto;\r
    }\r
    .form-signin .form-signin-heading,\r
    .form-signin .form-control {\r
      position: relative;\r
      height: auto;\r
      -webkit-box-sizing: border-box;\r
      -moz-box-sizing: border-box;\r
      box-sizing: border-box;\r
      padding: 10px;\r
      font-size: 16px;\r
    }\r
    .form-signin .form-control:focus {\r
      z-index: 2;\r
    }\r
    .form-signin input[type='email'] {\r
      margin-bottom: -1px;\r
      border-bottom-right-radius: 0;\r
      border-bottom-left-radius: 0;\r
    }`,o,a,u,f=s[8]["How to introduce you?"][s[7]]+"",c,d,g,p,m,v,P,O,I,A,z,x,M,ee,H,R,j='<span style="display: block; position: absolute; display: block; left: 46px; bottom: 113px; font-weight: 200; font-size: x-small;">Upload photo...</span>',Z,Y,K,V,ge=" ",Q,oe,$e=s[8]["Save and Close"][s[7]]+"",ke,Ke,it;return{c(){r=U("div"),t=U("style"),t.textContent=i,o=ne(),a=U("div"),u=U("h2"),c=Ue(f),d=ne(),g=U("div"),p=U("div"),m=U("input"),P=ne(),O=U("div"),I=U("input"),z=ne(),x=U("div"),M=U("img"),H=ne(),R=U("div"),R.innerHTML=j,Z=ne(),Y=U("input"),K=ne(),V=U("div"),V.textContent=ge,Q=ne(),oe=U("button"),ke=Ue($e),this.h()},l(Ae){r=N(Ae,"DIV",{class:!0,style:!0});var be=J(r);t=N(be,"STYLE",{"data-svelte-h":!0}),nn(t)!=="svelte-nchiym"&&(t.textContent=i),o=re(be),a=N(be,"DIV",{class:!0,style:!0});var ce=J(a);u=N(ce,"H2",{class:!0});var De=J(u);c=Ne(De,f),De.forEach(S),d=re(ce),g=N(ce,"DIV",{style:!0});var Ze=J(g);p=N(Ze,"DIV",{style:!0});var lt=J(p);m=N(lt,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0}),lt.forEach(S),P=re(Ze),O=N(Ze,"DIV",{style:!0});var ft=J(O);I=N(ft,"INPUT",{type:!0,id:!0,class:!0,placeholder:!0,style:!0}),ft.forEach(S),Ze.forEach(S),z=re(ce),x=N(ce,"DIV",{});var Tt=J(x);M=N(Tt,"IMG",{src:!0,id:!0,alt:!0,style:!0}),H=re(Tt),R=N(Tt,"DIV",{"data-svelte-h":!0}),nn(R)!=="svelte-1y18wj7"&&(R.innerHTML=j),Z=re(Tt),Y=N(Tt,"INPUT",{accept:!0,id:!0,name:!0,type:!0,style:!0}),Tt.forEach(S),K=re(ce),V=N(ce,"DIV",{for:!0,"data-svelte-h":!0}),nn(V)!=="svelte-o0b98r"&&(V.textContent=ge),Q=re(ce),oe=N(ce,"BUTTON",{id:!0,class:!0});var At=J(oe);ke=Ne(At,$e),At.forEach(S),ce.forEach(S),be.forEach(S),this.h()},h(){C(u,"class","form-signin-heading"),C(m,"type","text"),C(m,"id","name"),C(m,"class","form-control"),C(m,"placeholder",v=s[8]["input user name *"][s[7]]),m.required=!0,k(p,"width","250px"),C(I,"type","email"),C(I,"id","email"),C(I,"class","form-control"),C(I,"placeholder",A=s[8]["input email address"][s[7]]),I.required=!0,k(I,"width","100%"),k(O,"flex","1"),k(g,"display","flex"),k(g,"flex-direction","column"),wt(M.src,ee=s[2])||C(M,"src",ee),C(M,"id","avatar_img"),C(M,"alt","avatar"),k(M,"display","block"),k(M,"margin-left","auto"),k(M,"margin-right","auto"),k(M,"width","40%"),C(Y,"accept","image/png, image/jpeg"),C(Y,"id","avatar"),C(Y,"name","avatar"),C(Y,"type","file"),k(Y,"display","none"),C(V,"for","send_form"),C(oe,"id","send_form"),C(oe,"class","btn btn-primary"),C(a,"class","row"),k(a,"border-style","groove"),k(a,"border-radius","2px"),k(a,"border-color","#cbced2"),k(a,"padding","10px"),C(r,"class","form-signin"),k(r,"display","block"),k(r,"position","fixed"),k(r,"top","0")},m(Ae,be){W(Ae,r,be),L(r,t),L(r,o),L(r,a),L(a,u),L(u,c),L(a,d),L(a,g),L(g,p),L(p,m),nt(m,s[3]),L(g,P),L(g,O),L(O,I),nt(I,s[4]),L(a,z),L(a,x),L(x,M),s[17](M),L(x,H),L(x,R),L(x,Z),L(x,Y),s[18](Y),L(a,K),L(a,V),L(a,Q),L(a,oe),L(oe,ke),s[20](r),Ke||(it=[ue(m,"input",s[15]),ue(I,"input",s[16]),ue(M,"click",s[12]),ue(Y,"change",s[10]),ue(Y,"change",s[19]),ue(oe,"click",s[11]),C1(s[9].call(null,r))],Ke=!0)},p(Ae,[be]){be&128&&f!==(f=Ae[8]["How to introduce you?"][Ae[7]]+"")&&It(c,f),be&128&&v!==(v=Ae[8]["input user name *"][Ae[7]])&&C(m,"placeholder",v),be&8&&m.value!==Ae[3]&&nt(m,Ae[3]),be&128&&A!==(A=Ae[8]["input email address"][Ae[7]])&&C(I,"placeholder",A),be&16&&I.value!==Ae[4]&&nt(I,Ae[4]),be&4&&!wt(M.src,ee=Ae[2])&&C(M,"src",ee),be&128&&$e!==($e=Ae[8]["Save and Close"][Ae[7]]+"")&&It(ke,$e)},i:we,o:we,d(Ae){Ae&&S(r),s[17](null),s[18](null),s[20](null),Ke=!1,Jt(it)}}}function Y1(s,r,t){let i,o;Be(s,J1,Y=>t(21,i=Y)),Be(s,j1,Y=>t(22,o=Y));let{profile:a}=r,{selected:u}=r,f,c="./assets/user.svg",d,g,p,m,v,P="en";P=o;const O=i;async function I(Y){if(window.parent.document.body.append(Y),localStorage.getItem("kolmit_abonent")){let K=JSON.parse(localStorage.getItem("kolmit_abonent"));t(3,d=K.name),t(4,g=K.email),t(2,c=K.src)}}async function A(Y){try{let K=await oo(Y.target.files[0],function(V,ge){V.type==="error"?console.error("Error loading image "):(t(2,c=V.toDataURL()),window.parent.document.getElementById("avatar_img").src=c,window.parent.document.getElementById("avatar_input").value=c)},{orientation:!0,maxWidth:300,maxHeight:300,minWidth:100,minHeight:50,canvas:!0})}catch{}}function z(){localStorage.setItem("kolmit_abonent",JSON.stringify({id:window.id,src:c,name:d,email:g})),t(14,u=""),t(13,a=!1)}function x(){let Y=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});v.dispatchEvent(Y)}function M(){d=this.value,t(3,d)}function ee(){g=this.value,t(4,g)}function H(Y){Oe[Y?"unshift":"push"](()=>{m=Y,t(5,m)})}function R(Y){Oe[Y?"unshift":"push"](()=>{v=Y,t(6,v)})}function j(){p=this.files,t(0,p)}function Z(Y){Oe[Y?"unshift":"push"](()=>{f=Y,t(1,f)})}return s.$$set=Y=>{"profile"in Y&&t(13,a=Y.profile),"selected"in Y&&t(14,u=Y.selected)},s.$$.update=()=>{s.$$.dirty&1&&p&&console.log(p)},[p,f,c,d,g,m,v,P,O,I,A,z,x,a,u,M,ee,H,R,j,Z]}class Z1 extends xe{constructor(r){super(),He(this,r,Y1,K1,We,{profile:13,selected:14})}}function X1(s){let r,t,i,o,a,u,f,c,d,g="0",p,m,v;const P=s[3].default,O=Jn(P,s,s[2],null);return{c(){r=U("div"),t=Pe("svg"),i=Pe("g"),o=Pe("title"),a=Ue("Layer 1"),u=Pe("path"),f=ne(),O&&O.c(),c=ne(),d=U("span"),d.textContent=g,this.h()},l(I){r=N(I,"DIV",{class:!0});var A=J(r);t=Le(A,"svg",{class:!0,status:!0,width:!0,height:!0});var z=J(t);i=Le(z,"g",{class:!0,style:!0});var x=J(i);o=Le(x,"title",{});var M=J(o);a=Ne(M,"Layer 1"),M.forEach(S),u=Le(x,"path",{d:!0,id:!0,class:!0,transform:!0}),J(u).forEach(S),x.forEach(S),z.forEach(S),f=re(A),O&&O.l(A),c=re(A),d=N(A,"SPAN",{class:!0,style:!0,"data-svelte-h":!0}),nn(d)!=="svelte-zcrh5f"&&(d.textContent=g),A.forEach(S),this.h()},h(){C(u,"d","M390.7 353.3c-120.30000000000001 69.5 63.19999999999999 413.59999999999997 194.90000000000003 337.59999999999997l122.10000000000002 211.39999999999998c-55.60000000000002 32.10000000000002-102.5 52.30000000000007-166.9000000000001 15.5-178.79999999999995-102.19999999999993-375.59999999999997-442.9-369.99999999999994-646.0999999999999 1.8999999999999773-70.60000000000005 43.599999999999994-98.30000000000004 97.89999999999998-129.70000000000005 23.30000000000001 40.400000000000006 98.60000000000002 170.8 122 211.3z m50.400000000000034-5.699999999999989c-13 7.5-29.700000000000045 3.099999999999966-37.30000000000001-10l-115-199.3c-7.5-13.000000000000014-3.1000000000000227-29.700000000000017 10-37.30000000000001l60.5-34.900000000000006c13-7.499999999999993 29.69999999999999-3.0999999999999943 37.30000000000001 10l115.09999999999997 199.29999999999998c7.500000000000057 13 3.099999999999966 29.700000000000045-10 37.200000000000045l-60.599999999999966 35z m314.4 544.5c-13 7.5-29.700000000000045 3.1000000000000227-37.299999999999955-10l-115-199.30000000000007c-7.5-13-3.1000000000000227-29.699999999999932 10-37.299999999999955l60.5-34.89999999999998c13-7.5 29.699999999999932-3.1000000000000227 37.299999999999955 10l115.10000000000002 199.29999999999995c7.5 13 3.1000000000000227 29.700000000000045-10 37.30000000000007l-60.60000000000002 34.89999999999998z"),C(u,"id","svg_1"),C(u,"class","selected"),C(u,"transform","scale(.03)"),C(i,"class","currentLayer svelte-1rc8o8m"),k(i,"stroke","black"),k(i,"stroke-width","10px"),C(t,"class","callButton svelte-1rc8o8m"),C(t,"status",s[0]),C(t,"width","35"),C(t,"height","35"),C(d,"class","badge badge-primary badge-pill call-queue"),k(d,"display","none"),k(d,"position","absolute"),k(d,"right","0px"),k(d,"bottom","0px"),k(d,"color","#0e0cff"),k(d,"font-size","12px"),k(d,"opacity","1"),C(r,"class","callObject svelte-1rc8o8m")},m(I,A){W(I,r,A),L(r,t),L(t,i),L(i,o),L(o,a),L(i,u),L(r,f),O&&O.m(r,null),L(r,c),L(r,d),p=!0,m||(v=[ue(t,"mute",s[5]),ue(r,"long-press",function(){Cr(s[1])&&s[1].apply(this,arguments)}),ue(r,"click",s[4])],m=!0)},p(I,[A]){s=I,(!p||A&1)&&C(t,"status",s[0]),O&&O.p&&(!p||A&4)&&Kn(O,P,s,s[2],p?Zn(P,s[2],A,null):Yn(s[2]),null)},i(I){p||(le(O,I),p=!0)},o(I){ae(O,I),p=!1},d(I){I&&S(r),O&&O.d(I),m=!1,Jt(v)}}}function Q1(s,r,t){let{$$slots:i={},$$scope:o}=r,{status:a="inactive"}=r,{OnLongPress:u}=r;function f(d){$l.call(this,s,d)}function c(d){$l.call(this,s,d)}return s.$$set=d=>{"status"in d&&t(0,a=d.status),"OnLongPress"in d&&t(1,u=d.OnLongPress),"$$scope"in d&&t(2,o=d.$$scope)},[a,u,o,i,f,c]}class $1 extends xe{constructor(r){super(),He(this,r,Q1,X1,We,{status:0,OnLongPress:1})}}var Ri={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ri.exports;(function(s,r){(function(){var t,i="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",f="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,g="__lodash_placeholder__",p=1,m=2,v=4,P=1,O=2,I=1,A=2,z=4,x=8,M=16,ee=32,H=64,R=128,j=256,Z=512,Y=30,K="...",V=800,ge=16,Q=1,oe=2,$e=3,ke=1/0,Ke=9007199254740991,it=17976931348623157e292,Ae=0/0,be=4294967295,ce=be-1,De=be>>>1,Ze=[["ary",R],["bind",I],["bindKey",A],["curry",x],["curryRight",M],["flip",Z],["partial",ee],["partialRight",H],["rearg",j]],lt="[object Arguments]",ft="[object Array]",Tt="[object AsyncFunction]",At="[object Boolean]",cn="[object Date]",Qn="[object DOMException]",te="[object Error]",ct="[object Function]",Xe="[object GeneratorFunction]",pt="[object Map]",Bn="[object Number]",$n="[object Null]",zt="[object Object]",Wr="[object Promise]",er="[object Proxy]",Fn="[object RegExp]",Ut="[object Set]",hn="[object String]",$="[object Symbol]",_e="[object Undefined]",Dt="[object WeakMap]",kn="[object WeakSet]",Ct="[object ArrayBuffer]",Rt="[object DataView]",St="[object Float32Array]",tr="[object Float64Array]",dn="[object Int8Array]",zn="[object Int16Array]",Bi="[object Int32Array]",Fi="[object Uint8Array]",zi="[object Uint8ClampedArray]",Ui="[object Uint16Array]",Ni="[object Uint32Array]",xu=/\b__p \+= '';/g,Hu=/\b(__p \+=) '' \+/g,Vu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,so=/&(?:amp|lt|gt|quot|#39);/g,uo=/[&<>"']/g,qu=RegExp(so.source),Gu=RegExp(uo.source),ju=/<%-([\s\S]+?)%>/g,Ju=/<%([\s\S]+?)%>/g,ao=/<%=([\s\S]+?)%>/g,Ku=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yu=/^\w*$/,Zu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wi=/[\\^$.*+?()[\]{}|]/g,Xu=RegExp(Wi.source),xi=/^\s+/,Qu=/\s/,$u=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ea=/\{\n\/\* \[wrapped with (.+)\] \*/,ta=/,? & /,na=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ra=/[()=,{}\[\]\/\s]/,ia=/\\(\\)?/g,la=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fo=/\w*$/,oa=/^[-+]0x[0-9a-f]+$/i,sa=/^0b[01]+$/i,ua=/^\[object .+?Constructor\]$/,aa=/^0o[0-7]+$/i,fa=/^(?:0|[1-9]\d*)$/,ca=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xr=/($^)/,ha=/['\n\r\u2028\u2029\\]/g,Hr="\\ud800-\\udfff",da="\\u0300-\\u036f",pa="\\ufe20-\\ufe2f",ga="\\u20d0-\\u20ff",co=da+pa+ga,ho="\\u2700-\\u27bf",po="a-z\\xdf-\\xf6\\xf8-\\xff",_a="\\xac\\xb1\\xd7\\xf7",ma="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",va="\\u2000-\\u206f",ba=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",go="A-Z\\xc0-\\xd6\\xd8-\\xde",_o="\\ufe0e\\ufe0f",mo=_a+ma+va+ba,Hi="['’]",ya="["+Hr+"]",vo="["+mo+"]",Vr="["+co+"]",bo="\\d+",wa="["+ho+"]",yo="["+po+"]",wo="[^"+Hr+mo+bo+ho+po+go+"]",Vi="\\ud83c[\\udffb-\\udfff]",Ca="(?:"+Vr+"|"+Vi+")",Co="[^"+Hr+"]",qi="(?:\\ud83c[\\udde6-\\uddff]){2}",Gi="[\\ud800-\\udbff][\\udc00-\\udfff]",nr="["+go+"]",So="\\u200d",ko="(?:"+yo+"|"+wo+")",Sa="(?:"+nr+"|"+wo+")",Eo="(?:"+Hi+"(?:d|ll|m|re|s|t|ve))?",Oo="(?:"+Hi+"(?:D|LL|M|RE|S|T|VE))?",Io=Ca+"?",To="["+_o+"]?",ka="(?:"+So+"(?:"+[Co,qi,Gi].join("|")+")"+To+Io+")*",Ea="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Oa="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ao=To+Io+ka,Ia="(?:"+[wa,qi,Gi].join("|")+")"+Ao,Ta="(?:"+[Co+Vr+"?",Vr,qi,Gi,ya].join("|")+")",Aa=RegExp(Hi,"g"),Da=RegExp(Vr,"g"),ji=RegExp(Vi+"(?="+Vi+")|"+Ta+Ao,"g"),Ra=RegExp([nr+"?"+yo+"+"+Eo+"(?="+[vo,nr,"$"].join("|")+")",Sa+"+"+Oo+"(?="+[vo,nr+ko,"$"].join("|")+")",nr+"?"+ko+"+"+Eo,nr+"+"+Oo,Oa,Ea,bo,Ia].join("|"),"g"),Pa=RegExp("["+So+Hr+co+_o+"]"),La=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ma=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ba=-1,Qe={};Qe[St]=Qe[tr]=Qe[dn]=Qe[zn]=Qe[Bi]=Qe[Fi]=Qe[zi]=Qe[Ui]=Qe[Ni]=!0,Qe[lt]=Qe[ft]=Qe[Ct]=Qe[At]=Qe[Rt]=Qe[cn]=Qe[te]=Qe[ct]=Qe[pt]=Qe[Bn]=Qe[zt]=Qe[Fn]=Qe[Ut]=Qe[hn]=Qe[Dt]=!1;var Ye={};Ye[lt]=Ye[ft]=Ye[Ct]=Ye[Rt]=Ye[At]=Ye[cn]=Ye[St]=Ye[tr]=Ye[dn]=Ye[zn]=Ye[Bi]=Ye[pt]=Ye[Bn]=Ye[zt]=Ye[Fn]=Ye[Ut]=Ye[hn]=Ye[$]=Ye[Fi]=Ye[zi]=Ye[Ui]=Ye[Ni]=!0,Ye[te]=Ye[ct]=Ye[Dt]=!1;var Fa={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},za={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ua={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Na={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Wa=parseFloat,xa=parseInt,Do=typeof _r=="object"&&_r&&_r.Object===Object&&_r,Ha=typeof self=="object"&&self&&self.Object===Object&&self,mt=Do||Ha||Function("return this")(),Ji=r&&!r.nodeType&&r,Un=Ji&&!0&&s&&!s.nodeType&&s,Ro=Un&&Un.exports===Ji,Ki=Ro&&Do.process,Kt=function(){try{var T=Un&&Un.require&&Un.require("util").types;return T||Ki&&Ki.binding&&Ki.binding("util")}catch{}}(),Po=Kt&&Kt.isArrayBuffer,Lo=Kt&&Kt.isDate,Mo=Kt&&Kt.isMap,Bo=Kt&&Kt.isRegExp,Fo=Kt&&Kt.isSet,zo=Kt&&Kt.isTypedArray;function Nt(T,F,B){switch(B.length){case 0:return T.call(F);case 1:return T.call(F,B[0]);case 2:return T.call(F,B[0],B[1]);case 3:return T.call(F,B[0],B[1],B[2])}return T.apply(F,B)}function Va(T,F,B,se){for(var me=-1,Me=T==null?0:T.length;++me<Me;){var ht=T[me];F(se,ht,B(ht),T)}return se}function Yt(T,F){for(var B=-1,se=T==null?0:T.length;++B<se&&F(T[B],B,T)!==!1;);return T}function qa(T,F){for(var B=T==null?0:T.length;B--&&F(T[B],B,T)!==!1;);return T}function Uo(T,F){for(var B=-1,se=T==null?0:T.length;++B<se;)if(!F(T[B],B,T))return!1;return!0}function En(T,F){for(var B=-1,se=T==null?0:T.length,me=0,Me=[];++B<se;){var ht=T[B];F(ht,B,T)&&(Me[me++]=ht)}return Me}function qr(T,F){var B=T==null?0:T.length;return!!B&&rr(T,F,0)>-1}function Yi(T,F,B){for(var se=-1,me=T==null?0:T.length;++se<me;)if(B(F,T[se]))return!0;return!1}function et(T,F){for(var B=-1,se=T==null?0:T.length,me=Array(se);++B<se;)me[B]=F(T[B],B,T);return me}function On(T,F){for(var B=-1,se=F.length,me=T.length;++B<se;)T[me+B]=F[B];return T}function Zi(T,F,B,se){var me=-1,Me=T==null?0:T.length;for(se&&Me&&(B=T[++me]);++me<Me;)B=F(B,T[me],me,T);return B}function Ga(T,F,B,se){var me=T==null?0:T.length;for(se&&me&&(B=T[--me]);me--;)B=F(B,T[me],me,T);return B}function Xi(T,F){for(var B=-1,se=T==null?0:T.length;++B<se;)if(F(T[B],B,T))return!0;return!1}var ja=Qi("length");function Ja(T){return T.split("")}function Ka(T){return T.match(na)||[]}function No(T,F,B){var se;return B(T,function(me,Me,ht){if(F(me,Me,ht))return se=Me,!1}),se}function Gr(T,F,B,se){for(var me=T.length,Me=B+(se?1:-1);se?Me--:++Me<me;)if(F(T[Me],Me,T))return Me;return-1}function rr(T,F,B){return F===F?o9(T,F,B):Gr(T,Wo,B)}function Ya(T,F,B,se){for(var me=B-1,Me=T.length;++me<Me;)if(se(T[me],F))return me;return-1}function Wo(T){return T!==T}function xo(T,F){var B=T==null?0:T.length;return B?el(T,F)/B:Ae}function Qi(T){return function(F){return F==null?t:F[T]}}function $i(T){return function(F){return T==null?t:T[F]}}function Ho(T,F,B,se,me){return me(T,function(Me,ht,Ve){B=se?(se=!1,Me):F(B,Me,ht,Ve)}),B}function Za(T,F){var B=T.length;for(T.sort(F);B--;)T[B]=T[B].value;return T}function el(T,F){for(var B,se=-1,me=T.length;++se<me;){var Me=F(T[se]);Me!==t&&(B=B===t?Me:B+Me)}return B}function tl(T,F){for(var B=-1,se=Array(T);++B<T;)se[B]=F(B);return se}function Xa(T,F){return et(F,function(B){return[B,T[B]]})}function Vo(T){return T&&T.slice(0,Jo(T)+1).replace(xi,"")}function Wt(T){return function(F){return T(F)}}function nl(T,F){return et(F,function(B){return T[B]})}function Sr(T,F){return T.has(F)}function qo(T,F){for(var B=-1,se=T.length;++B<se&&rr(F,T[B],0)>-1;);return B}function Go(T,F){for(var B=T.length;B--&&rr(F,T[B],0)>-1;);return B}function Qa(T,F){for(var B=T.length,se=0;B--;)T[B]===F&&++se;return se}var $a=$i(Fa),e9=$i(za);function t9(T){return"\\"+Na[T]}function n9(T,F){return T==null?t:T[F]}function ir(T){return Pa.test(T)}function r9(T){return La.test(T)}function i9(T){for(var F,B=[];!(F=T.next()).done;)B.push(F.value);return B}function rl(T){var F=-1,B=Array(T.size);return T.forEach(function(se,me){B[++F]=[me,se]}),B}function jo(T,F){return function(B){return T(F(B))}}function In(T,F){for(var B=-1,se=T.length,me=0,Me=[];++B<se;){var ht=T[B];(ht===F||ht===g)&&(T[B]=g,Me[me++]=B)}return Me}function jr(T){var F=-1,B=Array(T.size);return T.forEach(function(se){B[++F]=se}),B}function l9(T){var F=-1,B=Array(T.size);return T.forEach(function(se){B[++F]=[se,se]}),B}function o9(T,F,B){for(var se=B-1,me=T.length;++se<me;)if(T[se]===F)return se;return-1}function s9(T,F,B){for(var se=B+1;se--;)if(T[se]===F)return se;return se}function lr(T){return ir(T)?a9(T):ja(T)}function rn(T){return ir(T)?f9(T):Ja(T)}function Jo(T){for(var F=T.length;F--&&Qu.test(T.charAt(F)););return F}var u9=$i(Ua);function a9(T){for(var F=ji.lastIndex=0;ji.test(T);)++F;return F}function f9(T){return T.match(ji)||[]}function c9(T){return T.match(Ra)||[]}var h9=function T(F){F=F==null?mt:or.defaults(mt.Object(),F,or.pick(mt,Ma));var B=F.Array,se=F.Date,me=F.Error,Me=F.Function,ht=F.Math,Ve=F.Object,il=F.RegExp,d9=F.String,Zt=F.TypeError,Jr=B.prototype,p9=Me.prototype,sr=Ve.prototype,Kr=F["__core-js_shared__"],Yr=p9.toString,ze=sr.hasOwnProperty,g9=0,Ko=function(){var e=/[^.]+$/.exec(Kr&&Kr.keys&&Kr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Zr=sr.toString,_9=Yr.call(Ve),m9=mt._,v9=il("^"+Yr.call(ze).replace(Wi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xr=Ro?F.Buffer:t,Tn=F.Symbol,Qr=F.Uint8Array,Yo=Xr?Xr.allocUnsafe:t,$r=jo(Ve.getPrototypeOf,Ve),Zo=Ve.create,Xo=sr.propertyIsEnumerable,ei=Jr.splice,Qo=Tn?Tn.isConcatSpreadable:t,kr=Tn?Tn.iterator:t,Nn=Tn?Tn.toStringTag:t,ti=function(){try{var e=qn(Ve,"defineProperty");return e({},"",{}),e}catch{}}(),b9=F.clearTimeout!==mt.clearTimeout&&F.clearTimeout,y9=se&&se.now!==mt.Date.now&&se.now,w9=F.setTimeout!==mt.setTimeout&&F.setTimeout,ni=ht.ceil,ri=ht.floor,ll=Ve.getOwnPropertySymbols,C9=Xr?Xr.isBuffer:t,$o=F.isFinite,S9=Jr.join,k9=jo(Ve.keys,Ve),dt=ht.max,bt=ht.min,E9=se.now,O9=F.parseInt,es=ht.random,I9=Jr.reverse,ol=qn(F,"DataView"),Er=qn(F,"Map"),sl=qn(F,"Promise"),ur=qn(F,"Set"),Or=qn(F,"WeakMap"),Ir=qn(Ve,"create"),ii=Or&&new Or,ar={},T9=Gn(ol),A9=Gn(Er),D9=Gn(sl),R9=Gn(ur),P9=Gn(Or),li=Tn?Tn.prototype:t,Tr=li?li.valueOf:t,ts=li?li.toString:t;function b(e){if(rt(e)&&!ve(e)&&!(e instanceof Ie)){if(e instanceof Xt)return e;if(ze.call(e,"__wrapped__"))return n0(e)}return new Xt(e)}var fr=function(){function e(){}return function(n){if(!tt(n))return{};if(Zo)return Zo(n);e.prototype=n;var l=new e;return e.prototype=t,l}}();function oi(){}function Xt(e,n){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=t}b.templateSettings={escape:ju,evaluate:Ju,interpolate:ao,variable:"",imports:{_:b}},b.prototype=oi.prototype,b.prototype.constructor=b,Xt.prototype=fr(oi.prototype),Xt.prototype.constructor=Xt;function Ie(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=be,this.__views__=[]}function L9(){var e=new Ie(this.__wrapped__);return e.__actions__=Pt(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Pt(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Pt(this.__views__),e}function M9(){if(this.__filtered__){var e=new Ie(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function B9(){var e=this.__wrapped__.value(),n=this.__dir__,l=ve(e),h=n<0,_=l?e.length:0,y=Kf(0,_,this.__views__),w=y.start,E=y.end,D=E-w,q=h?E:w-1,G=this.__iteratees__,X=G.length,ie=0,fe=bt(D,this.__takeCount__);if(!l||!h&&_==D&&fe==D)return Es(e,this.__actions__);var de=[];e:for(;D--&&ie<fe;){q+=n;for(var Ce=-1,pe=e[q];++Ce<X;){var Ee=G[Ce],Te=Ee.iteratee,Vt=Ee.type,Ot=Te(pe);if(Vt==oe)pe=Ot;else if(!Ot){if(Vt==Q)continue e;break e}}de[ie++]=pe}return de}Ie.prototype=fr(oi.prototype),Ie.prototype.constructor=Ie;function Wn(e){var n=-1,l=e==null?0:e.length;for(this.clear();++n<l;){var h=e[n];this.set(h[0],h[1])}}function F9(){this.__data__=Ir?Ir(null):{},this.size=0}function z9(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}function U9(e){var n=this.__data__;if(Ir){var l=n[e];return l===c?t:l}return ze.call(n,e)?n[e]:t}function N9(e){var n=this.__data__;return Ir?n[e]!==t:ze.call(n,e)}function W9(e,n){var l=this.__data__;return this.size+=this.has(e)?0:1,l[e]=Ir&&n===t?c:n,this}Wn.prototype.clear=F9,Wn.prototype.delete=z9,Wn.prototype.get=U9,Wn.prototype.has=N9,Wn.prototype.set=W9;function pn(e){var n=-1,l=e==null?0:e.length;for(this.clear();++n<l;){var h=e[n];this.set(h[0],h[1])}}function x9(){this.__data__=[],this.size=0}function H9(e){var n=this.__data__,l=si(n,e);if(l<0)return!1;var h=n.length-1;return l==h?n.pop():ei.call(n,l,1),--this.size,!0}function V9(e){var n=this.__data__,l=si(n,e);return l<0?t:n[l][1]}function q9(e){return si(this.__data__,e)>-1}function G9(e,n){var l=this.__data__,h=si(l,e);return h<0?(++this.size,l.push([e,n])):l[h][1]=n,this}pn.prototype.clear=x9,pn.prototype.delete=H9,pn.prototype.get=V9,pn.prototype.has=q9,pn.prototype.set=G9;function gn(e){var n=-1,l=e==null?0:e.length;for(this.clear();++n<l;){var h=e[n];this.set(h[0],h[1])}}function j9(){this.size=0,this.__data__={hash:new Wn,map:new(Er||pn),string:new Wn}}function J9(e){var n=bi(this,e).delete(e);return this.size-=n?1:0,n}function K9(e){return bi(this,e).get(e)}function Y9(e){return bi(this,e).has(e)}function Z9(e,n){var l=bi(this,e),h=l.size;return l.set(e,n),this.size+=l.size==h?0:1,this}gn.prototype.clear=j9,gn.prototype.delete=J9,gn.prototype.get=K9,gn.prototype.has=Y9,gn.prototype.set=Z9;function xn(e){var n=-1,l=e==null?0:e.length;for(this.__data__=new gn;++n<l;)this.add(e[n])}function X9(e){return this.__data__.set(e,c),this}function Q9(e){return this.__data__.has(e)}xn.prototype.add=xn.prototype.push=X9,xn.prototype.has=Q9;function ln(e){var n=this.__data__=new pn(e);this.size=n.size}function $9(){this.__data__=new pn,this.size=0}function ef(e){var n=this.__data__,l=n.delete(e);return this.size=n.size,l}function tf(e){return this.__data__.get(e)}function nf(e){return this.__data__.has(e)}function rf(e,n){var l=this.__data__;if(l instanceof pn){var h=l.__data__;if(!Er||h.length<o-1)return h.push([e,n]),this.size=++l.size,this;l=this.__data__=new gn(h)}return l.set(e,n),this.size=l.size,this}ln.prototype.clear=$9,ln.prototype.delete=ef,ln.prototype.get=tf,ln.prototype.has=nf,ln.prototype.set=rf;function ns(e,n){var l=ve(e),h=!l&&jn(e),_=!l&&!h&&Ln(e),y=!l&&!h&&!_&&pr(e),w=l||h||_||y,E=w?tl(e.length,d9):[],D=E.length;for(var q in e)(n||ze.call(e,q))&&!(w&&(q=="length"||_&&(q=="offset"||q=="parent")||y&&(q=="buffer"||q=="byteLength"||q=="byteOffset")||bn(q,D)))&&E.push(q);return E}function rs(e){var n=e.length;return n?e[vl(0,n-1)]:t}function lf(e,n){return yi(Pt(e),Hn(n,0,e.length))}function of(e){return yi(Pt(e))}function ul(e,n,l){(l!==t&&!on(e[n],l)||l===t&&!(n in e))&&_n(e,n,l)}function Ar(e,n,l){var h=e[n];(!(ze.call(e,n)&&on(h,l))||l===t&&!(n in e))&&_n(e,n,l)}function si(e,n){for(var l=e.length;l--;)if(on(e[l][0],n))return l;return-1}function sf(e,n,l,h){return An(e,function(_,y,w){n(h,_,l(_),w)}),h}function is(e,n){return e&&an(n,gt(n),e)}function uf(e,n){return e&&an(n,Mt(n),e)}function _n(e,n,l){n=="__proto__"&&ti?ti(e,n,{configurable:!0,enumerable:!0,value:l,writable:!0}):e[n]=l}function al(e,n){for(var l=-1,h=n.length,_=B(h),y=e==null;++l<h;)_[l]=y?t:Vl(e,n[l]);return _}function Hn(e,n,l){return e===e&&(l!==t&&(e=e<=l?e:l),n!==t&&(e=e>=n?e:n)),e}function Qt(e,n,l,h,_,y){var w,E=n&p,D=n&m,q=n&v;if(l&&(w=_?l(e,h,_,y):l(e)),w!==t)return w;if(!tt(e))return e;var G=ve(e);if(G){if(w=Zf(e),!E)return Pt(e,w)}else{var X=yt(e),ie=X==ct||X==Xe;if(Ln(e))return Ts(e,E);if(X==zt||X==lt||ie&&!_){if(w=D||ie?{}:Js(e),!E)return D?Nf(e,uf(w,e)):Uf(e,is(w,e))}else{if(!Ye[X])return _?e:{};w=Xf(e,X,E)}}y||(y=new ln);var fe=y.get(e);if(fe)return fe;y.set(e,w),C0(e)?e.forEach(function(pe){w.add(Qt(pe,n,l,pe,e,y))}):y0(e)&&e.forEach(function(pe,Ee){w.set(Ee,Qt(pe,n,l,Ee,e,y))});var de=q?D?Al:Tl:D?Mt:gt,Ce=G?t:de(e);return Yt(Ce||e,function(pe,Ee){Ce&&(Ee=pe,pe=e[Ee]),Ar(w,Ee,Qt(pe,n,l,Ee,e,y))}),w}function af(e){var n=gt(e);return function(l){return ls(l,e,n)}}function ls(e,n,l){var h=l.length;if(e==null)return!h;for(e=Ve(e);h--;){var _=l[h],y=n[_],w=e[_];if(w===t&&!(_ in e)||!y(w))return!1}return!0}function os(e,n,l){if(typeof e!="function")throw new Zt(u);return Fr(function(){e.apply(t,l)},n)}function Dr(e,n,l,h){var _=-1,y=qr,w=!0,E=e.length,D=[],q=n.length;if(!E)return D;l&&(n=et(n,Wt(l))),h?(y=Yi,w=!1):n.length>=o&&(y=Sr,w=!1,n=new xn(n));e:for(;++_<E;){var G=e[_],X=l==null?G:l(G);if(G=h||G!==0?G:0,w&&X===X){for(var ie=q;ie--;)if(n[ie]===X)continue e;D.push(G)}else y(n,X,h)||D.push(G)}return D}var An=Ls(un),ss=Ls(cl,!0);function ff(e,n){var l=!0;return An(e,function(h,_,y){return l=!!n(h,_,y),l}),l}function ui(e,n,l){for(var h=-1,_=e.length;++h<_;){var y=e[h],w=n(y);if(w!=null&&(E===t?w===w&&!Ht(w):l(w,E)))var E=w,D=y}return D}function cf(e,n,l,h){var _=e.length;for(l=ye(l),l<0&&(l=-l>_?0:_+l),h=h===t||h>_?_:ye(h),h<0&&(h+=_),h=l>h?0:k0(h);l<h;)e[l++]=n;return e}function us(e,n){var l=[];return An(e,function(h,_,y){n(h,_,y)&&l.push(h)}),l}function vt(e,n,l,h,_){var y=-1,w=e.length;for(l||(l=$f),_||(_=[]);++y<w;){var E=e[y];n>0&&l(E)?n>1?vt(E,n-1,l,h,_):On(_,E):h||(_[_.length]=E)}return _}var fl=Ms(),as=Ms(!0);function un(e,n){return e&&fl(e,n,gt)}function cl(e,n){return e&&as(e,n,gt)}function ai(e,n){return En(n,function(l){return yn(e[l])})}function Vn(e,n){n=Rn(n,e);for(var l=0,h=n.length;e!=null&&l<h;)e=e[fn(n[l++])];return l&&l==h?e:t}function fs(e,n,l){var h=n(e);return ve(e)?h:On(h,l(e))}function kt(e){return e==null?e===t?_e:$n:Nn&&Nn in Ve(e)?Jf(e):oc(e)}function hl(e,n){return e>n}function hf(e,n){return e!=null&&ze.call(e,n)}function df(e,n){return e!=null&&n in Ve(e)}function pf(e,n,l){return e>=bt(n,l)&&e<dt(n,l)}function dl(e,n,l){for(var h=l?Yi:qr,_=e[0].length,y=e.length,w=y,E=B(y),D=1/0,q=[];w--;){var G=e[w];w&&n&&(G=et(G,Wt(n))),D=bt(G.length,D),E[w]=!l&&(n||_>=120&&G.length>=120)?new xn(w&&G):t}G=e[0];var X=-1,ie=E[0];e:for(;++X<_&&q.length<D;){var fe=G[X],de=n?n(fe):fe;if(fe=l||fe!==0?fe:0,!(ie?Sr(ie,de):h(q,de,l))){for(w=y;--w;){var Ce=E[w];if(!(Ce?Sr(Ce,de):h(e[w],de,l)))continue e}ie&&ie.push(de),q.push(fe)}}return q}function gf(e,n,l,h){return un(e,function(_,y,w){n(h,l(_),y,w)}),h}function Rr(e,n,l){n=Rn(n,e),e=Xs(e,n);var h=e==null?e:e[fn(en(n))];return h==null?t:Nt(h,e,l)}function cs(e){return rt(e)&&kt(e)==lt}function _f(e){return rt(e)&&kt(e)==Ct}function mf(e){return rt(e)&&kt(e)==cn}function Pr(e,n,l,h,_){return e===n?!0:e==null||n==null||!rt(e)&&!rt(n)?e!==e&&n!==n:vf(e,n,l,h,Pr,_)}function vf(e,n,l,h,_,y){var w=ve(e),E=ve(n),D=w?ft:yt(e),q=E?ft:yt(n);D=D==lt?zt:D,q=q==lt?zt:q;var G=D==zt,X=q==zt,ie=D==q;if(ie&&Ln(e)){if(!Ln(n))return!1;w=!0,G=!1}if(ie&&!G)return y||(y=new ln),w||pr(e)?qs(e,n,l,h,_,y):Gf(e,n,D,l,h,_,y);if(!(l&P)){var fe=G&&ze.call(e,"__wrapped__"),de=X&&ze.call(n,"__wrapped__");if(fe||de){var Ce=fe?e.value():e,pe=de?n.value():n;return y||(y=new ln),_(Ce,pe,l,h,y)}}return ie?(y||(y=new ln),jf(e,n,l,h,_,y)):!1}function bf(e){return rt(e)&&yt(e)==pt}function pl(e,n,l,h){var _=l.length,y=_,w=!h;if(e==null)return!y;for(e=Ve(e);_--;){var E=l[_];if(w&&E[2]?E[1]!==e[E[0]]:!(E[0]in e))return!1}for(;++_<y;){E=l[_];var D=E[0],q=e[D],G=E[1];if(w&&E[2]){if(q===t&&!(D in e))return!1}else{var X=new ln;if(h)var ie=h(q,G,D,e,n,X);if(!(ie===t?Pr(G,q,P|O,h,X):ie))return!1}}return!0}function hs(e){if(!tt(e)||tc(e))return!1;var n=yn(e)?v9:ua;return n.test(Gn(e))}function yf(e){return rt(e)&&kt(e)==Fn}function wf(e){return rt(e)&&yt(e)==Ut}function Cf(e){return rt(e)&&Oi(e.length)&&!!Qe[kt(e)]}function ds(e){return typeof e=="function"?e:e==null?Bt:typeof e=="object"?ve(e)?_s(e[0],e[1]):gs(e):B0(e)}function gl(e){if(!Br(e))return k9(e);var n=[];for(var l in Ve(e))ze.call(e,l)&&l!="constructor"&&n.push(l);return n}function Sf(e){if(!tt(e))return lc(e);var n=Br(e),l=[];for(var h in e)h=="constructor"&&(n||!ze.call(e,h))||l.push(h);return l}function _l(e,n){return e<n}function ps(e,n){var l=-1,h=Lt(e)?B(e.length):[];return An(e,function(_,y,w){h[++l]=n(_,y,w)}),h}function gs(e){var n=Rl(e);return n.length==1&&n[0][2]?Ys(n[0][0],n[0][1]):function(l){return l===e||pl(l,e,n)}}function _s(e,n){return Ll(e)&&Ks(n)?Ys(fn(e),n):function(l){var h=Vl(l,e);return h===t&&h===n?ql(l,e):Pr(n,h,P|O)}}function fi(e,n,l,h,_){e!==n&&fl(n,function(y,w){if(_||(_=new ln),tt(y))kf(e,n,w,l,fi,h,_);else{var E=h?h(Bl(e,w),y,w+"",e,n,_):t;E===t&&(E=y),ul(e,w,E)}},Mt)}function kf(e,n,l,h,_,y,w){var E=Bl(e,l),D=Bl(n,l),q=w.get(D);if(q){ul(e,l,q);return}var G=y?y(E,D,l+"",e,n,w):t,X=G===t;if(X){var ie=ve(D),fe=!ie&&Ln(D),de=!ie&&!fe&&pr(D);G=D,ie||fe||de?ve(E)?G=E:ot(E)?G=Pt(E):fe?(X=!1,G=Ts(D,!0)):de?(X=!1,G=As(D,!0)):G=[]:zr(D)||jn(D)?(G=E,jn(E)?G=E0(E):(!tt(E)||yn(E))&&(G=Js(D))):X=!1}X&&(w.set(D,G),_(G,D,h,y,w),w.delete(D)),ul(e,l,G)}function ms(e,n){var l=e.length;if(l)return n+=n<0?l:0,bn(n,l)?e[n]:t}function vs(e,n,l){n.length?n=et(n,function(y){return ve(y)?function(w){return Vn(w,y.length===1?y[0]:y)}:y}):n=[Bt];var h=-1;n=et(n,Wt(he()));var _=ps(e,function(y,w,E){var D=et(n,function(q){return q(y)});return{criteria:D,index:++h,value:y}});return Za(_,function(y,w){return zf(y,w,l)})}function Ef(e,n){return bs(e,n,function(l,h){return ql(e,h)})}function bs(e,n,l){for(var h=-1,_=n.length,y={};++h<_;){var w=n[h],E=Vn(e,w);l(E,w)&&Lr(y,Rn(w,e),E)}return y}function Of(e){return function(n){return Vn(n,e)}}function ml(e,n,l,h){var _=h?Ya:rr,y=-1,w=n.length,E=e;for(e===n&&(n=Pt(n)),l&&(E=et(e,Wt(l)));++y<w;)for(var D=0,q=n[y],G=l?l(q):q;(D=_(E,G,D,h))>-1;)E!==e&&ei.call(E,D,1),ei.call(e,D,1);return e}function ys(e,n){for(var l=e?n.length:0,h=l-1;l--;){var _=n[l];if(l==h||_!==y){var y=_;bn(_)?ei.call(e,_,1):wl(e,_)}}return e}function vl(e,n){return e+ri(es()*(n-e+1))}function If(e,n,l,h){for(var _=-1,y=dt(ni((n-e)/(l||1)),0),w=B(y);y--;)w[h?y:++_]=e,e+=l;return w}function bl(e,n){var l="";if(!e||n<1||n>Ke)return l;do n%2&&(l+=e),n=ri(n/2),n&&(e+=e);while(n);return l}function Se(e,n){return Fl(Zs(e,n,Bt),e+"")}function Tf(e){return rs(gr(e))}function Af(e,n){var l=gr(e);return yi(l,Hn(n,0,l.length))}function Lr(e,n,l,h){if(!tt(e))return e;n=Rn(n,e);for(var _=-1,y=n.length,w=y-1,E=e;E!=null&&++_<y;){var D=fn(n[_]),q=l;if(D==="__proto__"||D==="constructor"||D==="prototype")return e;if(_!=w){var G=E[D];q=h?h(G,D,E):t,q===t&&(q=tt(G)?G:bn(n[_+1])?[]:{})}Ar(E,D,q),E=E[D]}return e}var ws=ii?function(e,n){return ii.set(e,n),e}:Bt,Df=ti?function(e,n){return ti(e,"toString",{configurable:!0,enumerable:!1,value:jl(n),writable:!0})}:Bt;function Rf(e){return yi(gr(e))}function $t(e,n,l){var h=-1,_=e.length;n<0&&(n=-n>_?0:_+n),l=l>_?_:l,l<0&&(l+=_),_=n>l?0:l-n>>>0,n>>>=0;for(var y=B(_);++h<_;)y[h]=e[h+n];return y}function Pf(e,n){var l;return An(e,function(h,_,y){return l=n(h,_,y),!l}),!!l}function ci(e,n,l){var h=0,_=e==null?h:e.length;if(typeof n=="number"&&n===n&&_<=De){for(;h<_;){var y=h+_>>>1,w=e[y];w!==null&&!Ht(w)&&(l?w<=n:w<n)?h=y+1:_=y}return _}return yl(e,n,Bt,l)}function yl(e,n,l,h){var _=0,y=e==null?0:e.length;if(y===0)return 0;n=l(n);for(var w=n!==n,E=n===null,D=Ht(n),q=n===t;_<y;){var G=ri((_+y)/2),X=l(e[G]),ie=X!==t,fe=X===null,de=X===X,Ce=Ht(X);if(w)var pe=h||de;else q?pe=de&&(h||ie):E?pe=de&&ie&&(h||!fe):D?pe=de&&ie&&!fe&&(h||!Ce):fe||Ce?pe=!1:pe=h?X<=n:X<n;pe?_=G+1:y=G}return bt(y,ce)}function Cs(e,n){for(var l=-1,h=e.length,_=0,y=[];++l<h;){var w=e[l],E=n?n(w):w;if(!l||!on(E,D)){var D=E;y[_++]=w===0?0:w}}return y}function Ss(e){return typeof e=="number"?e:Ht(e)?Ae:+e}function xt(e){if(typeof e=="string")return e;if(ve(e))return et(e,xt)+"";if(Ht(e))return ts?ts.call(e):"";var n=e+"";return n=="0"&&1/e==-ke?"-0":n}function Dn(e,n,l){var h=-1,_=qr,y=e.length,w=!0,E=[],D=E;if(l)w=!1,_=Yi;else if(y>=o){var q=n?null:Vf(e);if(q)return jr(q);w=!1,_=Sr,D=new xn}else D=n?[]:E;e:for(;++h<y;){var G=e[h],X=n?n(G):G;if(G=l||G!==0?G:0,w&&X===X){for(var ie=D.length;ie--;)if(D[ie]===X)continue e;n&&D.push(X),E.push(G)}else _(D,X,l)||(D!==E&&D.push(X),E.push(G))}return E}function wl(e,n){return n=Rn(n,e),e=Xs(e,n),e==null||delete e[fn(en(n))]}function ks(e,n,l,h){return Lr(e,n,l(Vn(e,n)),h)}function hi(e,n,l,h){for(var _=e.length,y=h?_:-1;(h?y--:++y<_)&&n(e[y],y,e););return l?$t(e,h?0:y,h?y+1:_):$t(e,h?y+1:0,h?_:y)}function Es(e,n){var l=e;return l instanceof Ie&&(l=l.value()),Zi(n,function(h,_){return _.func.apply(_.thisArg,On([h],_.args))},l)}function Cl(e,n,l){var h=e.length;if(h<2)return h?Dn(e[0]):[];for(var _=-1,y=B(h);++_<h;)for(var w=e[_],E=-1;++E<h;)E!=_&&(y[_]=Dr(y[_]||w,e[E],n,l));return Dn(vt(y,1),n,l)}function Os(e,n,l){for(var h=-1,_=e.length,y=n.length,w={};++h<_;){var E=h<y?n[h]:t;l(w,e[h],E)}return w}function Sl(e){return ot(e)?e:[]}function kl(e){return typeof e=="function"?e:Bt}function Rn(e,n){return ve(e)?e:Ll(e,n)?[e]:t0(Fe(e))}var Lf=Se;function Pn(e,n,l){var h=e.length;return l=l===t?h:l,!n&&l>=h?e:$t(e,n,l)}var Is=b9||function(e){return mt.clearTimeout(e)};function Ts(e,n){if(n)return e.slice();var l=e.length,h=Yo?Yo(l):new e.constructor(l);return e.copy(h),h}function El(e){var n=new e.constructor(e.byteLength);return new Qr(n).set(new Qr(e)),n}function Mf(e,n){var l=n?El(e.buffer):e.buffer;return new e.constructor(l,e.byteOffset,e.byteLength)}function Bf(e){var n=new e.constructor(e.source,fo.exec(e));return n.lastIndex=e.lastIndex,n}function Ff(e){return Tr?Ve(Tr.call(e)):{}}function As(e,n){var l=n?El(e.buffer):e.buffer;return new e.constructor(l,e.byteOffset,e.length)}function Ds(e,n){if(e!==n){var l=e!==t,h=e===null,_=e===e,y=Ht(e),w=n!==t,E=n===null,D=n===n,q=Ht(n);if(!E&&!q&&!y&&e>n||y&&w&&D&&!E&&!q||h&&w&&D||!l&&D||!_)return 1;if(!h&&!y&&!q&&e<n||q&&l&&_&&!h&&!y||E&&l&&_||!w&&_||!D)return-1}return 0}function zf(e,n,l){for(var h=-1,_=e.criteria,y=n.criteria,w=_.length,E=l.length;++h<w;){var D=Ds(_[h],y[h]);if(D){if(h>=E)return D;var q=l[h];return D*(q=="desc"?-1:1)}}return e.index-n.index}function Rs(e,n,l,h){for(var _=-1,y=e.length,w=l.length,E=-1,D=n.length,q=dt(y-w,0),G=B(D+q),X=!h;++E<D;)G[E]=n[E];for(;++_<w;)(X||_<y)&&(G[l[_]]=e[_]);for(;q--;)G[E++]=e[_++];return G}function Ps(e,n,l,h){for(var _=-1,y=e.length,w=-1,E=l.length,D=-1,q=n.length,G=dt(y-E,0),X=B(G+q),ie=!h;++_<G;)X[_]=e[_];for(var fe=_;++D<q;)X[fe+D]=n[D];for(;++w<E;)(ie||_<y)&&(X[fe+l[w]]=e[_++]);return X}function Pt(e,n){var l=-1,h=e.length;for(n||(n=B(h));++l<h;)n[l]=e[l];return n}function an(e,n,l,h){var _=!l;l||(l={});for(var y=-1,w=n.length;++y<w;){var E=n[y],D=h?h(l[E],e[E],E,l,e):t;D===t&&(D=e[E]),_?_n(l,E,D):Ar(l,E,D)}return l}function Uf(e,n){return an(e,Pl(e),n)}function Nf(e,n){return an(e,Gs(e),n)}function di(e,n){return function(l,h){var _=ve(l)?Va:sf,y=n?n():{};return _(l,e,he(h,2),y)}}function cr(e){return Se(function(n,l){var h=-1,_=l.length,y=_>1?l[_-1]:t,w=_>2?l[2]:t;for(y=e.length>3&&typeof y=="function"?(_--,y):t,w&&Et(l[0],l[1],w)&&(y=_<3?t:y,_=1),n=Ve(n);++h<_;){var E=l[h];E&&e(n,E,h,y)}return n})}function Ls(e,n){return function(l,h){if(l==null)return l;if(!Lt(l))return e(l,h);for(var _=l.length,y=n?_:-1,w=Ve(l);(n?y--:++y<_)&&h(w[y],y,w)!==!1;);return l}}function Ms(e){return function(n,l,h){for(var _=-1,y=Ve(n),w=h(n),E=w.length;E--;){var D=w[e?E:++_];if(l(y[D],D,y)===!1)break}return n}}function Wf(e,n,l){var h=n&I,_=Mr(e);function y(){var w=this&&this!==mt&&this instanceof y?_:e;return w.apply(h?l:this,arguments)}return y}function Bs(e){return function(n){n=Fe(n);var l=ir(n)?rn(n):t,h=l?l[0]:n.charAt(0),_=l?Pn(l,1).join(""):n.slice(1);return h[e]()+_}}function hr(e){return function(n){return Zi(L0(P0(n).replace(Aa,"")),e,"")}}function Mr(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var l=fr(e.prototype),h=e.apply(l,n);return tt(h)?h:l}}function xf(e,n,l){var h=Mr(e);function _(){for(var y=arguments.length,w=B(y),E=y,D=dr(_);E--;)w[E]=arguments[E];var q=y<3&&w[0]!==D&&w[y-1]!==D?[]:In(w,D);if(y-=q.length,y<l)return Ws(e,n,pi,_.placeholder,t,w,q,t,t,l-y);var G=this&&this!==mt&&this instanceof _?h:e;return Nt(G,this,w)}return _}function Fs(e){return function(n,l,h){var _=Ve(n);if(!Lt(n)){var y=he(l,3);n=gt(n),l=function(E){return y(_[E],E,_)}}var w=e(n,l,h);return w>-1?_[y?n[w]:w]:t}}function zs(e){return vn(function(n){var l=n.length,h=l,_=Xt.prototype.thru;for(e&&n.reverse();h--;){var y=n[h];if(typeof y!="function")throw new Zt(u);if(_&&!w&&vi(y)=="wrapper")var w=new Xt([],!0)}for(h=w?h:l;++h<l;){y=n[h];var E=vi(y),D=E=="wrapper"?Dl(y):t;D&&Ml(D[0])&&D[1]==(R|x|ee|j)&&!D[4].length&&D[9]==1?w=w[vi(D[0])].apply(w,D[3]):w=y.length==1&&Ml(y)?w[E]():w.thru(y)}return function(){var q=arguments,G=q[0];if(w&&q.length==1&&ve(G))return w.plant(G).value();for(var X=0,ie=l?n[X].apply(this,q):G;++X<l;)ie=n[X].call(this,ie);return ie}})}function pi(e,n,l,h,_,y,w,E,D,q){var G=n&R,X=n&I,ie=n&A,fe=n&(x|M),de=n&Z,Ce=ie?t:Mr(e);function pe(){for(var Ee=arguments.length,Te=B(Ee),Vt=Ee;Vt--;)Te[Vt]=arguments[Vt];if(fe)var Ot=dr(pe),qt=Qa(Te,Ot);if(h&&(Te=Rs(Te,h,_,fe)),y&&(Te=Ps(Te,y,w,fe)),Ee-=qt,fe&&Ee<q){var st=In(Te,Ot);return Ws(e,n,pi,pe.placeholder,l,Te,st,E,D,q-Ee)}var sn=X?l:this,Cn=ie?sn[e]:e;return Ee=Te.length,E?Te=sc(Te,E):de&&Ee>1&&Te.reverse(),G&&D<Ee&&(Te.length=D),this&&this!==mt&&this instanceof pe&&(Cn=Ce||Mr(Cn)),Cn.apply(sn,Te)}return pe}function Us(e,n){return function(l,h){return gf(l,e,n(h),{})}}function gi(e,n){return function(l,h){var _;if(l===t&&h===t)return n;if(l!==t&&(_=l),h!==t){if(_===t)return h;typeof l=="string"||typeof h=="string"?(l=xt(l),h=xt(h)):(l=Ss(l),h=Ss(h)),_=e(l,h)}return _}}function Ol(e){return vn(function(n){return n=et(n,Wt(he())),Se(function(l){var h=this;return e(n,function(_){return Nt(_,h,l)})})})}function _i(e,n){n=n===t?" ":xt(n);var l=n.length;if(l<2)return l?bl(n,e):n;var h=bl(n,ni(e/lr(n)));return ir(n)?Pn(rn(h),0,e).join(""):h.slice(0,e)}function Hf(e,n,l,h){var _=n&I,y=Mr(e);function w(){for(var E=-1,D=arguments.length,q=-1,G=h.length,X=B(G+D),ie=this&&this!==mt&&this instanceof w?y:e;++q<G;)X[q]=h[q];for(;D--;)X[q++]=arguments[++E];return Nt(ie,_?l:this,X)}return w}function Ns(e){return function(n,l,h){return h&&typeof h!="number"&&Et(n,l,h)&&(l=h=t),n=wn(n),l===t?(l=n,n=0):l=wn(l),h=h===t?n<l?1:-1:wn(h),If(n,l,h,e)}}function mi(e){return function(n,l){return typeof n=="string"&&typeof l=="string"||(n=tn(n),l=tn(l)),e(n,l)}}function Ws(e,n,l,h,_,y,w,E,D,q){var G=n&x,X=G?w:t,ie=G?t:w,fe=G?y:t,de=G?t:y;n|=G?ee:H,n&=~(G?H:ee),n&z||(n&=~(I|A));var Ce=[e,n,_,fe,X,de,ie,E,D,q],pe=l.apply(t,Ce);return Ml(e)&&Qs(pe,Ce),pe.placeholder=h,$s(pe,e,n)}function Il(e){var n=ht[e];return function(l,h){if(l=tn(l),h=h==null?0:bt(ye(h),292),h&&$o(l)){var _=(Fe(l)+"e").split("e"),y=n(_[0]+"e"+(+_[1]+h));return _=(Fe(y)+"e").split("e"),+(_[0]+"e"+(+_[1]-h))}return n(l)}}var Vf=ur&&1/jr(new ur([,-0]))[1]==ke?function(e){return new ur(e)}:Yl;function xs(e){return function(n){var l=yt(n);return l==pt?rl(n):l==Ut?l9(n):Xa(n,e(n))}}function mn(e,n,l,h,_,y,w,E){var D=n&A;if(!D&&typeof e!="function")throw new Zt(u);var q=h?h.length:0;if(q||(n&=~(ee|H),h=_=t),w=w===t?w:dt(ye(w),0),E=E===t?E:ye(E),q-=_?_.length:0,n&H){var G=h,X=_;h=_=t}var ie=D?t:Dl(e),fe=[e,n,l,h,_,G,X,y,w,E];if(ie&&ic(fe,ie),e=fe[0],n=fe[1],l=fe[2],h=fe[3],_=fe[4],E=fe[9]=fe[9]===t?D?0:e.length:dt(fe[9]-q,0),!E&&n&(x|M)&&(n&=~(x|M)),!n||n==I)var de=Wf(e,n,l);else n==x||n==M?de=xf(e,n,E):(n==ee||n==(I|ee))&&!_.length?de=Hf(e,n,l,h):de=pi.apply(t,fe);var Ce=ie?ws:Qs;return $s(Ce(de,fe),e,n)}function Hs(e,n,l,h){return e===t||on(e,sr[l])&&!ze.call(h,l)?n:e}function Vs(e,n,l,h,_,y){return tt(e)&&tt(n)&&(y.set(n,e),fi(e,n,t,Vs,y),y.delete(n)),e}function qf(e){return zr(e)?t:e}function qs(e,n,l,h,_,y){var w=l&P,E=e.length,D=n.length;if(E!=D&&!(w&&D>E))return!1;var q=y.get(e),G=y.get(n);if(q&&G)return q==n&&G==e;var X=-1,ie=!0,fe=l&O?new xn:t;for(y.set(e,n),y.set(n,e);++X<E;){var de=e[X],Ce=n[X];if(h)var pe=w?h(Ce,de,X,n,e,y):h(de,Ce,X,e,n,y);if(pe!==t){if(pe)continue;ie=!1;break}if(fe){if(!Xi(n,function(Ee,Te){if(!Sr(fe,Te)&&(de===Ee||_(de,Ee,l,h,y)))return fe.push(Te)})){ie=!1;break}}else if(!(de===Ce||_(de,Ce,l,h,y))){ie=!1;break}}return y.delete(e),y.delete(n),ie}function Gf(e,n,l,h,_,y,w){switch(l){case Rt:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case Ct:return!(e.byteLength!=n.byteLength||!y(new Qr(e),new Qr(n)));case At:case cn:case Bn:return on(+e,+n);case te:return e.name==n.name&&e.message==n.message;case Fn:case hn:return e==n+"";case pt:var E=rl;case Ut:var D=h&P;if(E||(E=jr),e.size!=n.size&&!D)return!1;var q=w.get(e);if(q)return q==n;h|=O,w.set(e,n);var G=qs(E(e),E(n),h,_,y,w);return w.delete(e),G;case $:if(Tr)return Tr.call(e)==Tr.call(n)}return!1}function jf(e,n,l,h,_,y){var w=l&P,E=Tl(e),D=E.length,q=Tl(n),G=q.length;if(D!=G&&!w)return!1;for(var X=D;X--;){var ie=E[X];if(!(w?ie in n:ze.call(n,ie)))return!1}var fe=y.get(e),de=y.get(n);if(fe&&de)return fe==n&&de==e;var Ce=!0;y.set(e,n),y.set(n,e);for(var pe=w;++X<D;){ie=E[X];var Ee=e[ie],Te=n[ie];if(h)var Vt=w?h(Te,Ee,ie,n,e,y):h(Ee,Te,ie,e,n,y);if(!(Vt===t?Ee===Te||_(Ee,Te,l,h,y):Vt)){Ce=!1;break}pe||(pe=ie=="constructor")}if(Ce&&!pe){var Ot=e.constructor,qt=n.constructor;Ot!=qt&&"constructor"in e&&"constructor"in n&&!(typeof Ot=="function"&&Ot instanceof Ot&&typeof qt=="function"&&qt instanceof qt)&&(Ce=!1)}return y.delete(e),y.delete(n),Ce}function vn(e){return Fl(Zs(e,t,l0),e+"")}function Tl(e){return fs(e,gt,Pl)}function Al(e){return fs(e,Mt,Gs)}var Dl=ii?function(e){return ii.get(e)}:Yl;function vi(e){for(var n=e.name+"",l=ar[n],h=ze.call(ar,n)?l.length:0;h--;){var _=l[h],y=_.func;if(y==null||y==e)return _.name}return n}function dr(e){var n=ze.call(b,"placeholder")?b:e;return n.placeholder}function he(){var e=b.iteratee||Jl;return e=e===Jl?ds:e,arguments.length?e(arguments[0],arguments[1]):e}function bi(e,n){var l=e.__data__;return ec(n)?l[typeof n=="string"?"string":"hash"]:l.map}function Rl(e){for(var n=gt(e),l=n.length;l--;){var h=n[l],_=e[h];n[l]=[h,_,Ks(_)]}return n}function qn(e,n){var l=n9(e,n);return hs(l)?l:t}function Jf(e){var n=ze.call(e,Nn),l=e[Nn];try{e[Nn]=t;var h=!0}catch{}var _=Zr.call(e);return h&&(n?e[Nn]=l:delete e[Nn]),_}var Pl=ll?function(e){return e==null?[]:(e=Ve(e),En(ll(e),function(n){return Xo.call(e,n)}))}:Zl,Gs=ll?function(e){for(var n=[];e;)On(n,Pl(e)),e=$r(e);return n}:Zl,yt=kt;(ol&&yt(new ol(new ArrayBuffer(1)))!=Rt||Er&&yt(new Er)!=pt||sl&&yt(sl.resolve())!=Wr||ur&&yt(new ur)!=Ut||Or&&yt(new Or)!=Dt)&&(yt=function(e){var n=kt(e),l=n==zt?e.constructor:t,h=l?Gn(l):"";if(h)switch(h){case T9:return Rt;case A9:return pt;case D9:return Wr;case R9:return Ut;case P9:return Dt}return n});function Kf(e,n,l){for(var h=-1,_=l.length;++h<_;){var y=l[h],w=y.size;switch(y.type){case"drop":e+=w;break;case"dropRight":n-=w;break;case"take":n=bt(n,e+w);break;case"takeRight":e=dt(e,n-w);break}}return{start:e,end:n}}function Yf(e){var n=e.match(ea);return n?n[1].split(ta):[]}function js(e,n,l){n=Rn(n,e);for(var h=-1,_=n.length,y=!1;++h<_;){var w=fn(n[h]);if(!(y=e!=null&&l(e,w)))break;e=e[w]}return y||++h!=_?y:(_=e==null?0:e.length,!!_&&Oi(_)&&bn(w,_)&&(ve(e)||jn(e)))}function Zf(e){var n=e.length,l=new e.constructor(n);return n&&typeof e[0]=="string"&&ze.call(e,"index")&&(l.index=e.index,l.input=e.input),l}function Js(e){return typeof e.constructor=="function"&&!Br(e)?fr($r(e)):{}}function Xf(e,n,l){var h=e.constructor;switch(n){case Ct:return El(e);case At:case cn:return new h(+e);case Rt:return Mf(e,l);case St:case tr:case dn:case zn:case Bi:case Fi:case zi:case Ui:case Ni:return As(e,l);case pt:return new h;case Bn:case hn:return new h(e);case Fn:return Bf(e);case Ut:return new h;case $:return Ff(e)}}function Qf(e,n){var l=n.length;if(!l)return e;var h=l-1;return n[h]=(l>1?"& ":"")+n[h],n=n.join(l>2?", ":" "),e.replace($u,`{
/* [wrapped with `+n+`] */
`)}function $f(e){return ve(e)||jn(e)||!!(Qo&&e&&e[Qo])}function bn(e,n){var l=typeof e;return n=n??Ke,!!n&&(l=="number"||l!="symbol"&&fa.test(e))&&e>-1&&e%1==0&&e<n}function Et(e,n,l){if(!tt(l))return!1;var h=typeof n;return(h=="number"?Lt(l)&&bn(n,l.length):h=="string"&&n in l)?on(l[n],e):!1}function Ll(e,n){if(ve(e))return!1;var l=typeof e;return l=="number"||l=="symbol"||l=="boolean"||e==null||Ht(e)?!0:Yu.test(e)||!Ku.test(e)||n!=null&&e in Ve(n)}function ec(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function Ml(e){var n=vi(e),l=b[n];if(typeof l!="function"||!(n in Ie.prototype))return!1;if(e===l)return!0;var h=Dl(l);return!!h&&e===h[0]}function tc(e){return!!Ko&&Ko in e}var nc=Kr?yn:Xl;function Br(e){var n=e&&e.constructor,l=typeof n=="function"&&n.prototype||sr;return e===l}function Ks(e){return e===e&&!tt(e)}function Ys(e,n){return function(l){return l==null?!1:l[e]===n&&(n!==t||e in Ve(l))}}function rc(e){var n=ki(e,function(h){return l.size===d&&l.clear(),h}),l=n.cache;return n}function ic(e,n){var l=e[1],h=n[1],_=l|h,y=_<(I|A|R),w=h==R&&l==x||h==R&&l==j&&e[7].length<=n[8]||h==(R|j)&&n[7].length<=n[8]&&l==x;if(!(y||w))return e;h&I&&(e[2]=n[2],_|=l&I?0:z);var E=n[3];if(E){var D=e[3];e[3]=D?Rs(D,E,n[4]):E,e[4]=D?In(e[3],g):n[4]}return E=n[5],E&&(D=e[5],e[5]=D?Ps(D,E,n[6]):E,e[6]=D?In(e[5],g):n[6]),E=n[7],E&&(e[7]=E),h&R&&(e[8]=e[8]==null?n[8]:bt(e[8],n[8])),e[9]==null&&(e[9]=n[9]),e[0]=n[0],e[1]=_,e}function lc(e){var n=[];if(e!=null)for(var l in Ve(e))n.push(l);return n}function oc(e){return Zr.call(e)}function Zs(e,n,l){return n=dt(n===t?e.length-1:n,0),function(){for(var h=arguments,_=-1,y=dt(h.length-n,0),w=B(y);++_<y;)w[_]=h[n+_];_=-1;for(var E=B(n+1);++_<n;)E[_]=h[_];return E[n]=l(w),Nt(e,this,E)}}function Xs(e,n){return n.length<2?e:Vn(e,$t(n,0,-1))}function sc(e,n){for(var l=e.length,h=bt(n.length,l),_=Pt(e);h--;){var y=n[h];e[h]=bn(y,l)?_[y]:t}return e}function Bl(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}var Qs=e0(ws),Fr=w9||function(e,n){return mt.setTimeout(e,n)},Fl=e0(Df);function $s(e,n,l){var h=n+"";return Fl(e,Qf(h,uc(Yf(h),l)))}function e0(e){var n=0,l=0;return function(){var h=E9(),_=ge-(h-l);if(l=h,_>0){if(++n>=V)return arguments[0]}else n=0;return e.apply(t,arguments)}}function yi(e,n){var l=-1,h=e.length,_=h-1;for(n=n===t?h:n;++l<n;){var y=vl(l,_),w=e[y];e[y]=e[l],e[l]=w}return e.length=n,e}var t0=rc(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Zu,function(l,h,_,y){n.push(_?y.replace(ia,"$1"):h||l)}),n});function fn(e){if(typeof e=="string"||Ht(e))return e;var n=e+"";return n=="0"&&1/e==-ke?"-0":n}function Gn(e){if(e!=null){try{return Yr.call(e)}catch{}try{return e+""}catch{}}return""}function uc(e,n){return Yt(Ze,function(l){var h="_."+l[0];n&l[1]&&!qr(e,h)&&e.push(h)}),e.sort()}function n0(e){if(e instanceof Ie)return e.clone();var n=new Xt(e.__wrapped__,e.__chain__);return n.__actions__=Pt(e.__actions__),n.__index__=e.__index__,n.__values__=e.__values__,n}function ac(e,n,l){(l?Et(e,n,l):n===t)?n=1:n=dt(ye(n),0);var h=e==null?0:e.length;if(!h||n<1)return[];for(var _=0,y=0,w=B(ni(h/n));_<h;)w[y++]=$t(e,_,_+=n);return w}function fc(e){for(var n=-1,l=e==null?0:e.length,h=0,_=[];++n<l;){var y=e[n];y&&(_[h++]=y)}return _}function cc(){var e=arguments.length;if(!e)return[];for(var n=B(e-1),l=arguments[0],h=e;h--;)n[h-1]=arguments[h];return On(ve(l)?Pt(l):[l],vt(n,1))}var hc=Se(function(e,n){return ot(e)?Dr(e,vt(n,1,ot,!0)):[]}),dc=Se(function(e,n){var l=en(n);return ot(l)&&(l=t),ot(e)?Dr(e,vt(n,1,ot,!0),he(l,2)):[]}),gc=Se(function(e,n){var l=en(n);return ot(l)&&(l=t),ot(e)?Dr(e,vt(n,1,ot,!0),t,l):[]});function _c(e,n,l){var h=e==null?0:e.length;return h?(n=l||n===t?1:ye(n),$t(e,n<0?0:n,h)):[]}function mc(e,n,l){var h=e==null?0:e.length;return h?(n=l||n===t?1:ye(n),n=h-n,$t(e,0,n<0?0:n)):[]}function vc(e,n){return e&&e.length?hi(e,he(n,3),!0,!0):[]}function bc(e,n){return e&&e.length?hi(e,he(n,3),!0):[]}function yc(e,n,l,h){var _=e==null?0:e.length;return _?(l&&typeof l!="number"&&Et(e,n,l)&&(l=0,h=_),cf(e,n,l,h)):[]}function r0(e,n,l){var h=e==null?0:e.length;if(!h)return-1;var _=l==null?0:ye(l);return _<0&&(_=dt(h+_,0)),Gr(e,he(n,3),_)}function i0(e,n,l){var h=e==null?0:e.length;if(!h)return-1;var _=h-1;return l!==t&&(_=ye(l),_=l<0?dt(h+_,0):bt(_,h-1)),Gr(e,he(n,3),_,!0)}function l0(e){var n=e==null?0:e.length;return n?vt(e,1):[]}function wc(e){var n=e==null?0:e.length;return n?vt(e,ke):[]}function Cc(e,n){var l=e==null?0:e.length;return l?(n=n===t?1:ye(n),vt(e,n)):[]}function Sc(e){for(var n=-1,l=e==null?0:e.length,h={};++n<l;){var _=e[n];h[_[0]]=_[1]}return h}function o0(e){return e&&e.length?e[0]:t}function kc(e,n,l){var h=e==null?0:e.length;if(!h)return-1;var _=l==null?0:ye(l);return _<0&&(_=dt(h+_,0)),rr(e,n,_)}function Ec(e){var n=e==null?0:e.length;return n?$t(e,0,-1):[]}var Oc=Se(function(e){var n=et(e,Sl);return n.length&&n[0]===e[0]?dl(n):[]}),Ic=Se(function(e){var n=en(e),l=et(e,Sl);return n===en(l)?n=t:l.pop(),l.length&&l[0]===e[0]?dl(l,he(n,2)):[]}),Tc=Se(function(e){var n=en(e),l=et(e,Sl);return n=typeof n=="function"?n:t,n&&l.pop(),l.length&&l[0]===e[0]?dl(l,t,n):[]});function Ac(e,n){return e==null?"":S9.call(e,n)}function en(e){var n=e==null?0:e.length;return n?e[n-1]:t}function Dc(e,n,l){var h=e==null?0:e.length;if(!h)return-1;var _=h;return l!==t&&(_=ye(l),_=_<0?dt(h+_,0):bt(_,h-1)),n===n?s9(e,n,_):Gr(e,Wo,_,!0)}function Rc(e,n){return e&&e.length?ms(e,ye(n)):t}var Pc=Se(s0);function s0(e,n){return e&&e.length&&n&&n.length?ml(e,n):e}function Lc(e,n,l){return e&&e.length&&n&&n.length?ml(e,n,he(l,2)):e}function Mc(e,n,l){return e&&e.length&&n&&n.length?ml(e,n,t,l):e}var Bc=vn(function(e,n){var l=e==null?0:e.length,h=al(e,n);return ys(e,et(n,function(_){return bn(_,l)?+_:_}).sort(Ds)),h});function Fc(e,n){var l=[];if(!(e&&e.length))return l;var h=-1,_=[],y=e.length;for(n=he(n,3);++h<y;){var w=e[h];n(w,h,e)&&(l.push(w),_.push(h))}return ys(e,_),l}function zl(e){return e==null?e:I9.call(e)}function zc(e,n,l){var h=e==null?0:e.length;return h?(l&&typeof l!="number"&&Et(e,n,l)?(n=0,l=h):(n=n==null?0:ye(n),l=l===t?h:ye(l)),$t(e,n,l)):[]}function Uc(e,n){return ci(e,n)}function Nc(e,n,l){return yl(e,n,he(l,2))}function Wc(e,n){var l=e==null?0:e.length;if(l){var h=ci(e,n);if(h<l&&on(e[h],n))return h}return-1}function xc(e,n){return ci(e,n,!0)}function Hc(e,n,l){return yl(e,n,he(l,2),!0)}function Vc(e,n){var l=e==null?0:e.length;if(l){var h=ci(e,n,!0)-1;if(on(e[h],n))return h}return-1}function qc(e){return e&&e.length?Cs(e):[]}function Gc(e,n){return e&&e.length?Cs(e,he(n,2)):[]}function jc(e){var n=e==null?0:e.length;return n?$t(e,1,n):[]}function Jc(e,n,l){return e&&e.length?(n=l||n===t?1:ye(n),$t(e,0,n<0?0:n)):[]}function Kc(e,n,l){var h=e==null?0:e.length;return h?(n=l||n===t?1:ye(n),n=h-n,$t(e,n<0?0:n,h)):[]}function Yc(e,n){return e&&e.length?hi(e,he(n,3),!1,!0):[]}function Zc(e,n){return e&&e.length?hi(e,he(n,3)):[]}var Xc=Se(function(e){return Dn(vt(e,1,ot,!0))}),Qc=Se(function(e){var n=en(e);return ot(n)&&(n=t),Dn(vt(e,1,ot,!0),he(n,2))}),$c=Se(function(e){var n=en(e);return n=typeof n=="function"?n:t,Dn(vt(e,1,ot,!0),t,n)});function eh(e){return e&&e.length?Dn(e):[]}function th(e,n){return e&&e.length?Dn(e,he(n,2)):[]}function nh(e,n){return n=typeof n=="function"?n:t,e&&e.length?Dn(e,t,n):[]}function Ul(e){if(!(e&&e.length))return[];var n=0;return e=En(e,function(l){if(ot(l))return n=dt(l.length,n),!0}),tl(n,function(l){return et(e,Qi(l))})}function u0(e,n){if(!(e&&e.length))return[];var l=Ul(e);return n==null?l:et(l,function(h){return Nt(n,t,h)})}var rh=Se(function(e,n){return ot(e)?Dr(e,n):[]}),ih=Se(function(e){return Cl(En(e,ot))}),lh=Se(function(e){var n=en(e);return ot(n)&&(n=t),Cl(En(e,ot),he(n,2))}),oh=Se(function(e){var n=en(e);return n=typeof n=="function"?n:t,Cl(En(e,ot),t,n)}),sh=Se(Ul);function uh(e,n){return Os(e||[],n||[],Ar)}function ah(e,n){return Os(e||[],n||[],Lr)}var fh=Se(function(e){var n=e.length,l=n>1?e[n-1]:t;return l=typeof l=="function"?(e.pop(),l):t,u0(e,l)});function a0(e){var n=b(e);return n.__chain__=!0,n}function ch(e,n){return n(e),e}function wi(e,n){return n(e)}var hh=vn(function(e){var n=e.length,l=n?e[0]:0,h=this.__wrapped__,_=function(y){return al(y,e)};return n>1||this.__actions__.length||!(h instanceof Ie)||!bn(l)?this.thru(_):(h=h.slice(l,+l+(n?1:0)),h.__actions__.push({func:wi,args:[_],thisArg:t}),new Xt(h,this.__chain__).thru(function(y){return n&&!y.length&&y.push(t),y}))});function dh(){return a0(this)}function ph(){return new Xt(this.value(),this.__chain__)}function gh(){this.__values__===t&&(this.__values__=S0(this.value()));var e=this.__index__>=this.__values__.length,n=e?t:this.__values__[this.__index__++];return{done:e,value:n}}function _h(){return this}function mh(e){for(var n,l=this;l instanceof oi;){var h=n0(l);h.__index__=0,h.__values__=t,n?_.__wrapped__=h:n=h;var _=h;l=l.__wrapped__}return _.__wrapped__=e,n}function vh(){var e=this.__wrapped__;if(e instanceof Ie){var n=e;return this.__actions__.length&&(n=new Ie(this)),n=n.reverse(),n.__actions__.push({func:wi,args:[zl],thisArg:t}),new Xt(n,this.__chain__)}return this.thru(zl)}function bh(){return Es(this.__wrapped__,this.__actions__)}var yh=di(function(e,n,l){ze.call(e,l)?++e[l]:_n(e,l,1)});function wh(e,n,l){var h=ve(e)?Uo:ff;return l&&Et(e,n,l)&&(n=t),h(e,he(n,3))}function Ch(e,n){var l=ve(e)?En:us;return l(e,he(n,3))}var Sh=Fs(r0),kh=Fs(i0);function Eh(e,n){return vt(Ci(e,n),1)}function Oh(e,n){return vt(Ci(e,n),ke)}function Ih(e,n,l){return l=l===t?1:ye(l),vt(Ci(e,n),l)}function f0(e,n){var l=ve(e)?Yt:An;return l(e,he(n,3))}function c0(e,n){var l=ve(e)?qa:ss;return l(e,he(n,3))}var Th=di(function(e,n,l){ze.call(e,l)?e[l].push(n):_n(e,l,[n])});function Ah(e,n,l,h){e=Lt(e)?e:gr(e),l=l&&!h?ye(l):0;var _=e.length;return l<0&&(l=dt(_+l,0)),Ii(e)?l<=_&&e.indexOf(n,l)>-1:!!_&&rr(e,n,l)>-1}var Dh=Se(function(e,n,l){var h=-1,_=typeof n=="function",y=Lt(e)?B(e.length):[];return An(e,function(w){y[++h]=_?Nt(n,w,l):Rr(w,n,l)}),y}),Rh=di(function(e,n,l){_n(e,l,n)});function Ci(e,n){var l=ve(e)?et:ps;return l(e,he(n,3))}function Ph(e,n,l,h){return e==null?[]:(ve(n)||(n=n==null?[]:[n]),l=h?t:l,ve(l)||(l=l==null?[]:[l]),vs(e,n,l))}var Lh=di(function(e,n,l){e[l?0:1].push(n)},function(){return[[],[]]});function Mh(e,n,l){var h=ve(e)?Zi:Ho,_=arguments.length<3;return h(e,he(n,4),l,_,An)}function Bh(e,n,l){var h=ve(e)?Ga:Ho,_=arguments.length<3;return h(e,he(n,4),l,_,ss)}function Fh(e,n){var l=ve(e)?En:us;return l(e,Ei(he(n,3)))}function zh(e){var n=ve(e)?rs:Tf;return n(e)}function Uh(e,n,l){(l?Et(e,n,l):n===t)?n=1:n=ye(n);var h=ve(e)?lf:Af;return h(e,n)}function Nh(e){var n=ve(e)?of:Rf;return n(e)}function Wh(e){if(e==null)return 0;if(Lt(e))return Ii(e)?lr(e):e.length;var n=yt(e);return n==pt||n==Ut?e.size:gl(e).length}function xh(e,n,l){var h=ve(e)?Xi:Pf;return l&&Et(e,n,l)&&(n=t),h(e,he(n,3))}var Hh=Se(function(e,n){if(e==null)return[];var l=n.length;return l>1&&Et(e,n[0],n[1])?n=[]:l>2&&Et(n[0],n[1],n[2])&&(n=[n[0]]),vs(e,vt(n,1),[])}),Si=y9||function(){return mt.Date.now()};function Vh(e,n){if(typeof n!="function")throw new Zt(u);return e=ye(e),function(){if(--e<1)return n.apply(this,arguments)}}function h0(e,n,l){return n=l?t:n,n=e&&n==null?e.length:n,mn(e,R,t,t,t,t,n)}function d0(e,n){var l;if(typeof n!="function")throw new Zt(u);return e=ye(e),function(){return--e>0&&(l=n.apply(this,arguments)),e<=1&&(n=t),l}}var Nl=Se(function(e,n,l){var h=I;if(l.length){var _=In(l,dr(Nl));h|=ee}return mn(e,h,n,l,_)}),p0=Se(function(e,n,l){var h=I|A;if(l.length){var _=In(l,dr(p0));h|=ee}return mn(n,h,e,l,_)});function g0(e,n,l){n=l?t:n;var h=mn(e,x,t,t,t,t,t,n);return h.placeholder=g0.placeholder,h}function _0(e,n,l){n=l?t:n;var h=mn(e,M,t,t,t,t,t,n);return h.placeholder=_0.placeholder,h}function m0(e,n,l){var h,_,y,w,E,D,q=0,G=!1,X=!1,ie=!0;if(typeof e!="function")throw new Zt(u);n=tn(n)||0,tt(l)&&(G=!!l.leading,X="maxWait"in l,y=X?dt(tn(l.maxWait)||0,n):y,ie="trailing"in l?!!l.trailing:ie);function fe(st){var sn=h,Cn=_;return h=_=t,q=st,w=e.apply(Cn,sn),w}function de(st){return q=st,E=Fr(Ee,n),G?fe(st):w}function Ce(st){var sn=st-D,Cn=st-q,F0=n-sn;return X?bt(F0,y-Cn):F0}function pe(st){var sn=st-D,Cn=st-q;return D===t||sn>=n||sn<0||X&&Cn>=y}function Ee(){var st=Si();if(pe(st))return Te(st);E=Fr(Ee,Ce(st))}function Te(st){return E=t,ie&&h?fe(st):(h=_=t,w)}function Vt(){E!==t&&Is(E),q=0,h=D=_=E=t}function Ot(){return E===t?w:Te(Si())}function qt(){var st=Si(),sn=pe(st);if(h=arguments,_=this,D=st,sn){if(E===t)return de(D);if(X)return Is(E),E=Fr(Ee,n),fe(D)}return E===t&&(E=Fr(Ee,n)),w}return qt.cancel=Vt,qt.flush=Ot,qt}var qh=Se(function(e,n){return os(e,1,n)}),Gh=Se(function(e,n,l){return os(e,tn(n)||0,l)});function jh(e){return mn(e,Z)}function ki(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new Zt(u);var l=function(){var h=arguments,_=n?n.apply(this,h):h[0],y=l.cache;if(y.has(_))return y.get(_);var w=e.apply(this,h);return l.cache=y.set(_,w)||y,w};return l.cache=new(ki.Cache||gn),l}ki.Cache=gn;function Ei(e){if(typeof e!="function")throw new Zt(u);return function(){var n=arguments;switch(n.length){case 0:return!e.call(this);case 1:return!e.call(this,n[0]);case 2:return!e.call(this,n[0],n[1]);case 3:return!e.call(this,n[0],n[1],n[2])}return!e.apply(this,n)}}function Jh(e){return d0(2,e)}var Kh=Lf(function(e,n){n=n.length==1&&ve(n[0])?et(n[0],Wt(he())):et(vt(n,1),Wt(he()));var l=n.length;return Se(function(h){for(var _=-1,y=bt(h.length,l);++_<y;)h[_]=n[_].call(this,h[_]);return Nt(e,this,h)})}),Wl=Se(function(e,n){var l=In(n,dr(Wl));return mn(e,ee,t,n,l)}),v0=Se(function(e,n){var l=In(n,dr(v0));return mn(e,H,t,n,l)}),Yh=vn(function(e,n){return mn(e,j,t,t,t,n)});function Zh(e,n){if(typeof e!="function")throw new Zt(u);return n=n===t?n:ye(n),Se(e,n)}function Xh(e,n){if(typeof e!="function")throw new Zt(u);return n=n==null?0:dt(ye(n),0),Se(function(l){var h=l[n],_=Pn(l,0,n);return h&&On(_,h),Nt(e,this,_)})}function Qh(e,n,l){var h=!0,_=!0;if(typeof e!="function")throw new Zt(u);return tt(l)&&(h="leading"in l?!!l.leading:h,_="trailing"in l?!!l.trailing:_),m0(e,n,{leading:h,maxWait:n,trailing:_})}function $h(e){return h0(e,1)}function ed(e,n){return Wl(kl(n),e)}function td(){if(!arguments.length)return[];var e=arguments[0];return ve(e)?e:[e]}function nd(e){return Qt(e,v)}function rd(e,n){return n=typeof n=="function"?n:t,Qt(e,v,n)}function id(e){return Qt(e,p|v)}function ld(e,n){return n=typeof n=="function"?n:t,Qt(e,p|v,n)}function od(e,n){return n==null||ls(e,n,gt(n))}function on(e,n){return e===n||e!==e&&n!==n}var sd=mi(hl),ud=mi(function(e,n){return e>=n}),jn=cs(function(){return arguments}())?cs:function(e){return rt(e)&&ze.call(e,"callee")&&!Xo.call(e,"callee")},ve=B.isArray,ad=Po?Wt(Po):_f;function Lt(e){return e!=null&&Oi(e.length)&&!yn(e)}function ot(e){return rt(e)&&Lt(e)}function fd(e){return e===!0||e===!1||rt(e)&&kt(e)==At}var Ln=C9||Xl,cd=Lo?Wt(Lo):mf;function hd(e){return rt(e)&&e.nodeType===1&&!zr(e)}function dd(e){if(e==null)return!0;if(Lt(e)&&(ve(e)||typeof e=="string"||typeof e.splice=="function"||Ln(e)||pr(e)||jn(e)))return!e.length;var n=yt(e);if(n==pt||n==Ut)return!e.size;if(Br(e))return!gl(e).length;for(var l in e)if(ze.call(e,l))return!1;return!0}function pd(e,n){return Pr(e,n)}function gd(e,n,l){l=typeof l=="function"?l:t;var h=l?l(e,n):t;return h===t?Pr(e,n,t,l):!!h}function xl(e){if(!rt(e))return!1;var n=kt(e);return n==te||n==Qn||typeof e.message=="string"&&typeof e.name=="string"&&!zr(e)}function _d(e){return typeof e=="number"&&$o(e)}function yn(e){if(!tt(e))return!1;var n=kt(e);return n==ct||n==Xe||n==Tt||n==er}function b0(e){return typeof e=="number"&&e==ye(e)}function Oi(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Ke}function tt(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}function rt(e){return e!=null&&typeof e=="object"}var y0=Mo?Wt(Mo):bf;function md(e,n){return e===n||pl(e,n,Rl(n))}function vd(e,n,l){return l=typeof l=="function"?l:t,pl(e,n,Rl(n),l)}function bd(e){return w0(e)&&e!=+e}function yd(e){if(nc(e))throw new me(a);return hs(e)}function wd(e){return e===null}function Cd(e){return e==null}function w0(e){return typeof e=="number"||rt(e)&&kt(e)==Bn}function zr(e){if(!rt(e)||kt(e)!=zt)return!1;var n=$r(e);if(n===null)return!0;var l=ze.call(n,"constructor")&&n.constructor;return typeof l=="function"&&l instanceof l&&Yr.call(l)==_9}var Hl=Bo?Wt(Bo):yf;function Sd(e){return b0(e)&&e>=-Ke&&e<=Ke}var C0=Fo?Wt(Fo):wf;function Ii(e){return typeof e=="string"||!ve(e)&&rt(e)&&kt(e)==hn}function Ht(e){return typeof e=="symbol"||rt(e)&&kt(e)==$}var pr=zo?Wt(zo):Cf;function kd(e){return e===t}function Ed(e){return rt(e)&&yt(e)==Dt}function Od(e){return rt(e)&&kt(e)==kn}var Id=mi(_l),Td=mi(function(e,n){return e<=n});function S0(e){if(!e)return[];if(Lt(e))return Ii(e)?rn(e):Pt(e);if(kr&&e[kr])return i9(e[kr]());var n=yt(e),l=n==pt?rl:n==Ut?jr:gr;return l(e)}function wn(e){if(!e)return e===0?e:0;if(e=tn(e),e===ke||e===-ke){var n=e<0?-1:1;return n*it}return e===e?e:0}function ye(e){var n=wn(e),l=n%1;return n===n?l?n-l:n:0}function k0(e){return e?Hn(ye(e),0,be):0}function tn(e){if(typeof e=="number")return e;if(Ht(e))return Ae;if(tt(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=tt(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Vo(e);var l=sa.test(e);return l||aa.test(e)?xa(e.slice(2),l?2:8):oa.test(e)?Ae:+e}function E0(e){return an(e,Mt(e))}function Ad(e){return e?Hn(ye(e),-Ke,Ke):e===0?e:0}function Fe(e){return e==null?"":xt(e)}var Dd=cr(function(e,n){if(Br(n)||Lt(n)){an(n,gt(n),e);return}for(var l in n)ze.call(n,l)&&Ar(e,l,n[l])}),O0=cr(function(e,n){an(n,Mt(n),e)}),Ti=cr(function(e,n,l,h){an(n,Mt(n),e,h)}),Rd=cr(function(e,n,l,h){an(n,gt(n),e,h)}),Pd=vn(al);function Ld(e,n){var l=fr(e);return n==null?l:is(l,n)}var Md=Se(function(e,n){e=Ve(e);var l=-1,h=n.length,_=h>2?n[2]:t;for(_&&Et(n[0],n[1],_)&&(h=1);++l<h;)for(var y=n[l],w=Mt(y),E=-1,D=w.length;++E<D;){var q=w[E],G=e[q];(G===t||on(G,sr[q])&&!ze.call(e,q))&&(e[q]=y[q])}return e}),Bd=Se(function(e){return e.push(t,Vs),Nt(I0,t,e)});function Fd(e,n){return No(e,he(n,3),un)}function zd(e,n){return No(e,he(n,3),cl)}function Ud(e,n){return e==null?e:fl(e,he(n,3),Mt)}function Nd(e,n){return e==null?e:as(e,he(n,3),Mt)}function Wd(e,n){return e&&un(e,he(n,3))}function xd(e,n){return e&&cl(e,he(n,3))}function Hd(e){return e==null?[]:ai(e,gt(e))}function Vd(e){return e==null?[]:ai(e,Mt(e))}function Vl(e,n,l){var h=e==null?t:Vn(e,n);return h===t?l:h}function qd(e,n){return e!=null&&js(e,n,hf)}function ql(e,n){return e!=null&&js(e,n,df)}var Gd=Us(function(e,n,l){n!=null&&typeof n.toString!="function"&&(n=Zr.call(n)),e[n]=l},jl(Bt)),jd=Us(function(e,n,l){n!=null&&typeof n.toString!="function"&&(n=Zr.call(n)),ze.call(e,n)?e[n].push(l):e[n]=[l]},he),Jd=Se(Rr);function gt(e){return Lt(e)?ns(e):gl(e)}function Mt(e){return Lt(e)?ns(e,!0):Sf(e)}function Kd(e,n){var l={};return n=he(n,3),un(e,function(h,_,y){_n(l,n(h,_,y),h)}),l}function Yd(e,n){var l={};return n=he(n,3),un(e,function(h,_,y){_n(l,_,n(h,_,y))}),l}var Zd=cr(function(e,n,l){fi(e,n,l)}),I0=cr(function(e,n,l,h){fi(e,n,l,h)}),Xd=vn(function(e,n){var l={};if(e==null)return l;var h=!1;n=et(n,function(y){return y=Rn(y,e),h||(h=y.length>1),y}),an(e,Al(e),l),h&&(l=Qt(l,p|m|v,qf));for(var _=n.length;_--;)wl(l,n[_]);return l});function Qd(e,n){return T0(e,Ei(he(n)))}var $d=vn(function(e,n){return e==null?{}:Ef(e,n)});function T0(e,n){if(e==null)return{};var l=et(Al(e),function(h){return[h]});return n=he(n),bs(e,l,function(h,_){return n(h,_[0])})}function ep(e,n,l){n=Rn(n,e);var h=-1,_=n.length;for(_||(_=1,e=t);++h<_;){var y=e==null?t:e[fn(n[h])];y===t&&(h=_,y=l),e=yn(y)?y.call(e):y}return e}function tp(e,n,l){return e==null?e:Lr(e,n,l)}function np(e,n,l,h){return h=typeof h=="function"?h:t,e==null?e:Lr(e,n,l,h)}var A0=xs(gt),D0=xs(Mt);function rp(e,n,l){var h=ve(e),_=h||Ln(e)||pr(e);if(n=he(n,4),l==null){var y=e&&e.constructor;_?l=h?new y:[]:tt(e)?l=yn(y)?fr($r(e)):{}:l={}}return(_?Yt:un)(e,function(w,E,D){return n(l,w,E,D)}),l}function ip(e,n){return e==null?!0:wl(e,n)}function lp(e,n,l){return e==null?e:ks(e,n,kl(l))}function op(e,n,l,h){return h=typeof h=="function"?h:t,e==null?e:ks(e,n,kl(l),h)}function gr(e){return e==null?[]:nl(e,gt(e))}function sp(e){return e==null?[]:nl(e,Mt(e))}function up(e,n,l){return l===t&&(l=n,n=t),l!==t&&(l=tn(l),l=l===l?l:0),n!==t&&(n=tn(n),n=n===n?n:0),Hn(tn(e),n,l)}function ap(e,n,l){return n=wn(n),l===t?(l=n,n=0):l=wn(l),e=tn(e),pf(e,n,l)}function fp(e,n,l){if(l&&typeof l!="boolean"&&Et(e,n,l)&&(n=l=t),l===t&&(typeof n=="boolean"?(l=n,n=t):typeof e=="boolean"&&(l=e,e=t)),e===t&&n===t?(e=0,n=1):(e=wn(e),n===t?(n=e,e=0):n=wn(n)),e>n){var h=e;e=n,n=h}if(l||e%1||n%1){var _=es();return bt(e+_*(n-e+Wa("1e-"+((_+"").length-1))),n)}return vl(e,n)}var cp=hr(function(e,n,l){return n=n.toLowerCase(),e+(l?R0(n):n)});function R0(e){return Gl(Fe(e).toLowerCase())}function P0(e){return e=Fe(e),e&&e.replace(ca,$a).replace(Da,"")}function hp(e,n,l){e=Fe(e),n=xt(n);var h=e.length;l=l===t?h:Hn(ye(l),0,h);var _=l;return l-=n.length,l>=0&&e.slice(l,_)==n}function dp(e){return e=Fe(e),e&&Gu.test(e)?e.replace(uo,e9):e}function pp(e){return e=Fe(e),e&&Xu.test(e)?e.replace(Wi,"\\$&"):e}var gp=hr(function(e,n,l){return e+(l?"-":"")+n.toLowerCase()}),_p=hr(function(e,n,l){return e+(l?" ":"")+n.toLowerCase()}),mp=Bs("toLowerCase");function vp(e,n,l){e=Fe(e),n=ye(n);var h=n?lr(e):0;if(!n||h>=n)return e;var _=(n-h)/2;return _i(ri(_),l)+e+_i(ni(_),l)}function bp(e,n,l){e=Fe(e),n=ye(n);var h=n?lr(e):0;return n&&h<n?e+_i(n-h,l):e}function yp(e,n,l){e=Fe(e),n=ye(n);var h=n?lr(e):0;return n&&h<n?_i(n-h,l)+e:e}function wp(e,n,l){return l||n==null?n=0:n&&(n=+n),O9(Fe(e).replace(xi,""),n||0)}function Cp(e,n,l){return(l?Et(e,n,l):n===t)?n=1:n=ye(n),bl(Fe(e),n)}function Sp(){var e=arguments,n=Fe(e[0]);return e.length<3?n:n.replace(e[1],e[2])}var kp=hr(function(e,n,l){return e+(l?"_":"")+n.toLowerCase()});function Ep(e,n,l){return l&&typeof l!="number"&&Et(e,n,l)&&(n=l=t),l=l===t?be:l>>>0,l?(e=Fe(e),e&&(typeof n=="string"||n!=null&&!Hl(n))&&(n=xt(n),!n&&ir(e))?Pn(rn(e),0,l):e.split(n,l)):[]}var Op=hr(function(e,n,l){return e+(l?" ":"")+Gl(n)});function Ip(e,n,l){return e=Fe(e),l=l==null?0:Hn(ye(l),0,e.length),n=xt(n),e.slice(l,l+n.length)==n}function Tp(e,n,l){var h=b.templateSettings;l&&Et(e,n,l)&&(n=t),e=Fe(e),n=Ti({},n,h,Hs);var _=Ti({},n.imports,h.imports,Hs),y=gt(_),w=nl(_,y),E,D,q=0,G=n.interpolate||xr,X="__p += '",ie=il((n.escape||xr).source+"|"+G.source+"|"+(G===ao?la:xr).source+"|"+(n.evaluate||xr).source+"|$","g"),fe="//# sourceURL="+(ze.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ba+"]")+`
`;e.replace(ie,function(pe,Ee,Te,Vt,Ot,qt){return Te||(Te=Vt),X+=e.slice(q,qt).replace(ha,t9),Ee&&(E=!0,X+=`' +
__e(`+Ee+`) +
'`),Ot&&(D=!0,X+=`';
`+Ot+`;
__p += '`),Te&&(X+=`' +
((__t = (`+Te+`)) == null ? '' : __t) +
'`),q=qt+pe.length,pe}),X+=`';
`;var de=ze.call(n,"variable")&&n.variable;if(!de)X=`with (obj) {
`+X+`
}
`;else if(ra.test(de))throw new me(f);X=(D?X.replace(xu,""):X).replace(Hu,"$1").replace(Vu,"$1;"),X="function("+(de||"obj")+`) {
`+(de?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(E?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+X+`return __p
}`;var Ce=M0(function(){return Me(y,fe+"return "+X).apply(t,w)});if(Ce.source=X,xl(Ce))throw Ce;return Ce}function Ap(e){return Fe(e).toLowerCase()}function Dp(e){return Fe(e).toUpperCase()}function Rp(e,n,l){if(e=Fe(e),e&&(l||n===t))return Vo(e);if(!e||!(n=xt(n)))return e;var h=rn(e),_=rn(n),y=qo(h,_),w=Go(h,_)+1;return Pn(h,y,w).join("")}function Pp(e,n,l){if(e=Fe(e),e&&(l||n===t))return e.slice(0,Jo(e)+1);if(!e||!(n=xt(n)))return e;var h=rn(e),_=Go(h,rn(n))+1;return Pn(h,0,_).join("")}function Lp(e,n,l){if(e=Fe(e),e&&(l||n===t))return e.replace(xi,"");if(!e||!(n=xt(n)))return e;var h=rn(e),_=qo(h,rn(n));return Pn(h,_).join("")}function Mp(e,n){var l=Y,h=K;if(tt(n)){var _="separator"in n?n.separator:_;l="length"in n?ye(n.length):l,h="omission"in n?xt(n.omission):h}e=Fe(e);var y=e.length;if(ir(e)){var w=rn(e);y=w.length}if(l>=y)return e;var E=l-lr(h);if(E<1)return h;var D=w?Pn(w,0,E).join(""):e.slice(0,E);if(_===t)return D+h;if(w&&(E+=D.length-E),Hl(_)){if(e.slice(E).search(_)){var q,G=D;for(_.global||(_=il(_.source,Fe(fo.exec(_))+"g")),_.lastIndex=0;q=_.exec(G);)var X=q.index;D=D.slice(0,X===t?E:X)}}else if(e.indexOf(xt(_),E)!=E){var ie=D.lastIndexOf(_);ie>-1&&(D=D.slice(0,ie))}return D+h}function Bp(e){return e=Fe(e),e&&qu.test(e)?e.replace(so,u9):e}var Fp=hr(function(e,n,l){return e+(l?" ":"")+n.toUpperCase()}),Gl=Bs("toUpperCase");function L0(e,n,l){return e=Fe(e),n=l?t:n,n===t?r9(e)?c9(e):Ka(e):e.match(n)||[]}var M0=Se(function(e,n){try{return Nt(e,t,n)}catch(l){return xl(l)?l:new me(l)}}),zp=vn(function(e,n){return Yt(n,function(l){l=fn(l),_n(e,l,Nl(e[l],e))}),e});function Up(e){var n=e==null?0:e.length,l=he();return e=n?et(e,function(h){if(typeof h[1]!="function")throw new Zt(u);return[l(h[0]),h[1]]}):[],Se(function(h){for(var _=-1;++_<n;){var y=e[_];if(Nt(y[0],this,h))return Nt(y[1],this,h)}})}function Np(e){return af(Qt(e,p))}function jl(e){return function(){return e}}function Wp(e,n){return e==null||e!==e?n:e}var xp=zs(),Hp=zs(!0);function Bt(e){return e}function Jl(e){return ds(typeof e=="function"?e:Qt(e,p))}function Vp(e){return gs(Qt(e,p))}function qp(e,n){return _s(e,Qt(n,p))}var Gp=Se(function(e,n){return function(l){return Rr(l,e,n)}}),jp=Se(function(e,n){return function(l){return Rr(e,l,n)}});function Kl(e,n,l){var h=gt(n),_=ai(n,h);l==null&&!(tt(n)&&(_.length||!h.length))&&(l=n,n=e,e=this,_=ai(n,gt(n)));var y=!(tt(l)&&"chain"in l)||!!l.chain,w=yn(e);return Yt(_,function(E){var D=n[E];e[E]=D,w&&(e.prototype[E]=function(){var q=this.__chain__;if(y||q){var G=e(this.__wrapped__),X=G.__actions__=Pt(this.__actions__);return X.push({func:D,args:arguments,thisArg:e}),G.__chain__=q,G}return D.apply(e,On([this.value()],arguments))})}),e}function Jp(){return mt._===this&&(mt._=m9),this}function Yl(){}function Kp(e){return e=ye(e),Se(function(n){return ms(n,e)})}var Yp=Ol(et),Zp=Ol(Uo),Xp=Ol(Xi);function B0(e){return Ll(e)?Qi(fn(e)):Of(e)}function Qp(e){return function(n){return e==null?t:Vn(e,n)}}var $p=Ns(),e1=Ns(!0);function Zl(){return[]}function Xl(){return!1}function t1(){return{}}function n1(){return""}function r1(){return!0}function i1(e,n){if(e=ye(e),e<1||e>Ke)return[];var l=be,h=bt(e,be);n=he(n),e-=be;for(var _=tl(h,n);++l<e;)n(l);return _}function l1(e){return ve(e)?et(e,fn):Ht(e)?[e]:Pt(t0(Fe(e)))}function o1(e){var n=++g9;return Fe(e)+n}var s1=gi(function(e,n){return e+n},0),u1=Il("ceil"),a1=gi(function(e,n){return e/n},1),f1=Il("floor");function c1(e){return e&&e.length?ui(e,Bt,hl):t}function h1(e,n){return e&&e.length?ui(e,he(n,2),hl):t}function d1(e){return xo(e,Bt)}function p1(e,n){return xo(e,he(n,2))}function g1(e){return e&&e.length?ui(e,Bt,_l):t}function _1(e,n){return e&&e.length?ui(e,he(n,2),_l):t}var m1=gi(function(e,n){return e*n},1),v1=Il("round"),b1=gi(function(e,n){return e-n},0);function y1(e){return e&&e.length?el(e,Bt):0}function w1(e,n){return e&&e.length?el(e,he(n,2)):0}return b.after=Vh,b.ary=h0,b.assign=Dd,b.assignIn=O0,b.assignInWith=Ti,b.assignWith=Rd,b.at=Pd,b.before=d0,b.bind=Nl,b.bindAll=zp,b.bindKey=p0,b.castArray=td,b.chain=a0,b.chunk=ac,b.compact=fc,b.concat=cc,b.cond=Up,b.conforms=Np,b.constant=jl,b.countBy=yh,b.create=Ld,b.curry=g0,b.curryRight=_0,b.debounce=m0,b.defaults=Md,b.defaultsDeep=Bd,b.defer=qh,b.delay=Gh,b.difference=hc,b.differenceBy=dc,b.differenceWith=gc,b.drop=_c,b.dropRight=mc,b.dropRightWhile=vc,b.dropWhile=bc,b.fill=yc,b.filter=Ch,b.flatMap=Eh,b.flatMapDeep=Oh,b.flatMapDepth=Ih,b.flatten=l0,b.flattenDeep=wc,b.flattenDepth=Cc,b.flip=jh,b.flow=xp,b.flowRight=Hp,b.fromPairs=Sc,b.functions=Hd,b.functionsIn=Vd,b.groupBy=Th,b.initial=Ec,b.intersection=Oc,b.intersectionBy=Ic,b.intersectionWith=Tc,b.invert=Gd,b.invertBy=jd,b.invokeMap=Dh,b.iteratee=Jl,b.keyBy=Rh,b.keys=gt,b.keysIn=Mt,b.map=Ci,b.mapKeys=Kd,b.mapValues=Yd,b.matches=Vp,b.matchesProperty=qp,b.memoize=ki,b.merge=Zd,b.mergeWith=I0,b.method=Gp,b.methodOf=jp,b.mixin=Kl,b.negate=Ei,b.nthArg=Kp,b.omit=Xd,b.omitBy=Qd,b.once=Jh,b.orderBy=Ph,b.over=Yp,b.overArgs=Kh,b.overEvery=Zp,b.overSome=Xp,b.partial=Wl,b.partialRight=v0,b.partition=Lh,b.pick=$d,b.pickBy=T0,b.property=B0,b.propertyOf=Qp,b.pull=Pc,b.pullAll=s0,b.pullAllBy=Lc,b.pullAllWith=Mc,b.pullAt=Bc,b.range=$p,b.rangeRight=e1,b.rearg=Yh,b.reject=Fh,b.remove=Fc,b.rest=Zh,b.reverse=zl,b.sampleSize=Uh,b.set=tp,b.setWith=np,b.shuffle=Nh,b.slice=zc,b.sortBy=Hh,b.sortedUniq=qc,b.sortedUniqBy=Gc,b.split=Ep,b.spread=Xh,b.tail=jc,b.take=Jc,b.takeRight=Kc,b.takeRightWhile=Yc,b.takeWhile=Zc,b.tap=ch,b.throttle=Qh,b.thru=wi,b.toArray=S0,b.toPairs=A0,b.toPairsIn=D0,b.toPath=l1,b.toPlainObject=E0,b.transform=rp,b.unary=$h,b.union=Xc,b.unionBy=Qc,b.unionWith=$c,b.uniq=eh,b.uniqBy=th,b.uniqWith=nh,b.unset=ip,b.unzip=Ul,b.unzipWith=u0,b.update=lp,b.updateWith=op,b.values=gr,b.valuesIn=sp,b.without=rh,b.words=L0,b.wrap=ed,b.xor=ih,b.xorBy=lh,b.xorWith=oh,b.zip=sh,b.zipObject=uh,b.zipObjectDeep=ah,b.zipWith=fh,b.entries=A0,b.entriesIn=D0,b.extend=O0,b.extendWith=Ti,Kl(b,b),b.add=s1,b.attempt=M0,b.camelCase=cp,b.capitalize=R0,b.ceil=u1,b.clamp=up,b.clone=nd,b.cloneDeep=id,b.cloneDeepWith=ld,b.cloneWith=rd,b.conformsTo=od,b.deburr=P0,b.defaultTo=Wp,b.divide=a1,b.endsWith=hp,b.eq=on,b.escape=dp,b.escapeRegExp=pp,b.every=wh,b.find=Sh,b.findIndex=r0,b.findKey=Fd,b.findLast=kh,b.findLastIndex=i0,b.findLastKey=zd,b.floor=f1,b.forEach=f0,b.forEachRight=c0,b.forIn=Ud,b.forInRight=Nd,b.forOwn=Wd,b.forOwnRight=xd,b.get=Vl,b.gt=sd,b.gte=ud,b.has=qd,b.hasIn=ql,b.head=o0,b.identity=Bt,b.includes=Ah,b.indexOf=kc,b.inRange=ap,b.invoke=Jd,b.isArguments=jn,b.isArray=ve,b.isArrayBuffer=ad,b.isArrayLike=Lt,b.isArrayLikeObject=ot,b.isBoolean=fd,b.isBuffer=Ln,b.isDate=cd,b.isElement=hd,b.isEmpty=dd,b.isEqual=pd,b.isEqualWith=gd,b.isError=xl,b.isFinite=_d,b.isFunction=yn,b.isInteger=b0,b.isLength=Oi,b.isMap=y0,b.isMatch=md,b.isMatchWith=vd,b.isNaN=bd,b.isNative=yd,b.isNil=Cd,b.isNull=wd,b.isNumber=w0,b.isObject=tt,b.isObjectLike=rt,b.isPlainObject=zr,b.isRegExp=Hl,b.isSafeInteger=Sd,b.isSet=C0,b.isString=Ii,b.isSymbol=Ht,b.isTypedArray=pr,b.isUndefined=kd,b.isWeakMap=Ed,b.isWeakSet=Od,b.join=Ac,b.kebabCase=gp,b.last=en,b.lastIndexOf=Dc,b.lowerCase=_p,b.lowerFirst=mp,b.lt=Id,b.lte=Td,b.max=c1,b.maxBy=h1,b.mean=d1,b.meanBy=p1,b.min=g1,b.minBy=_1,b.stubArray=Zl,b.stubFalse=Xl,b.stubObject=t1,b.stubString=n1,b.stubTrue=r1,b.multiply=m1,b.nth=Rc,b.noConflict=Jp,b.noop=Yl,b.now=Si,b.pad=vp,b.padEnd=bp,b.padStart=yp,b.parseInt=wp,b.random=fp,b.reduce=Mh,b.reduceRight=Bh,b.repeat=Cp,b.replace=Sp,b.result=ep,b.round=v1,b.runInContext=T,b.sample=zh,b.size=Wh,b.snakeCase=kp,b.some=xh,b.sortedIndex=Uc,b.sortedIndexBy=Nc,b.sortedIndexOf=Wc,b.sortedLastIndex=xc,b.sortedLastIndexBy=Hc,b.sortedLastIndexOf=Vc,b.startCase=Op,b.startsWith=Ip,b.subtract=b1,b.sum=y1,b.sumBy=w1,b.template=Tp,b.times=i1,b.toFinite=wn,b.toInteger=ye,b.toLength=k0,b.toLower=Ap,b.toNumber=tn,b.toSafeInteger=Ad,b.toString=Fe,b.toUpper=Dp,b.trim=Rp,b.trimEnd=Pp,b.trimStart=Lp,b.truncate=Mp,b.unescape=Bp,b.uniqueId=o1,b.upperCase=Fp,b.upperFirst=Gl,b.each=f0,b.eachRight=c0,b.first=o0,Kl(b,function(){var e={};return un(b,function(n,l){ze.call(b.prototype,l)||(e[l]=n)}),e}(),{chain:!1}),b.VERSION=i,Yt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){b[e].placeholder=b}),Yt(["drop","take"],function(e,n){Ie.prototype[e]=function(l){l=l===t?1:dt(ye(l),0);var h=this.__filtered__&&!n?new Ie(this):this.clone();return h.__filtered__?h.__takeCount__=bt(l,h.__takeCount__):h.__views__.push({size:bt(l,be),type:e+(h.__dir__<0?"Right":"")}),h},Ie.prototype[e+"Right"]=function(l){return this.reverse()[e](l).reverse()}}),Yt(["filter","map","takeWhile"],function(e,n){var l=n+1,h=l==Q||l==$e;Ie.prototype[e]=function(_){var y=this.clone();return y.__iteratees__.push({iteratee:he(_,3),type:l}),y.__filtered__=y.__filtered__||h,y}}),Yt(["head","last"],function(e,n){var l="take"+(n?"Right":"");Ie.prototype[e]=function(){return this[l](1).value()[0]}}),Yt(["initial","tail"],function(e,n){var l="drop"+(n?"":"Right");Ie.prototype[e]=function(){return this.__filtered__?new Ie(this):this[l](1)}}),Ie.prototype.compact=function(){return this.filter(Bt)},Ie.prototype.find=function(e){return this.filter(e).head()},Ie.prototype.findLast=function(e){return this.reverse().find(e)},Ie.prototype.invokeMap=Se(function(e,n){return typeof e=="function"?new Ie(this):this.map(function(l){return Rr(l,e,n)})}),Ie.prototype.reject=function(e){return this.filter(Ei(he(e)))},Ie.prototype.slice=function(e,n){e=ye(e);var l=this;return l.__filtered__&&(e>0||n<0)?new Ie(l):(e<0?l=l.takeRight(-e):e&&(l=l.drop(e)),n!==t&&(n=ye(n),l=n<0?l.dropRight(-n):l.take(n-e)),l)},Ie.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ie.prototype.toArray=function(){return this.take(be)},un(Ie.prototype,function(e,n){var l=/^(?:filter|find|map|reject)|While$/.test(n),h=/^(?:head|last)$/.test(n),_=b[h?"take"+(n=="last"?"Right":""):n],y=h||/^find/.test(n);_&&(b.prototype[n]=function(){var w=this.__wrapped__,E=h?[1]:arguments,D=w instanceof Ie,q=E[0],G=D||ve(w),X=function(Ee){var Te=_.apply(b,On([Ee],E));return h&&ie?Te[0]:Te};G&&l&&typeof q=="function"&&q.length!=1&&(D=G=!1);var ie=this.__chain__,fe=!!this.__actions__.length,de=y&&!ie,Ce=D&&!fe;if(!y&&G){w=Ce?w:new Ie(this);var pe=e.apply(w,E);return pe.__actions__.push({func:wi,args:[X],thisArg:t}),new Xt(pe,ie)}return de&&Ce?e.apply(this,E):(pe=this.thru(X),de?h?pe.value()[0]:pe.value():pe)})}),Yt(["pop","push","shift","sort","splice","unshift"],function(e){var n=Jr[e],l=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",h=/^(?:pop|shift)$/.test(e);b.prototype[e]=function(){var _=arguments;if(h&&!this.__chain__){var y=this.value();return n.apply(ve(y)?y:[],_)}return this[l](function(w){return n.apply(ve(w)?w:[],_)})}}),un(Ie.prototype,function(e,n){var l=b[n];if(l){var h=l.name+"";ze.call(ar,h)||(ar[h]=[]),ar[h].push({name:n,func:l})}}),ar[pi(t,A).name]=[{name:"wrapper",func:t}],Ie.prototype.clone=L9,Ie.prototype.reverse=M9,Ie.prototype.value=B9,b.prototype.at=hh,b.prototype.chain=dh,b.prototype.commit=ph,b.prototype.next=gh,b.prototype.plant=mh,b.prototype.reverse=vh,b.prototype.toJSON=b.prototype.valueOf=b.prototype.value=bh,b.prototype.first=b.prototype.head,kr&&(b.prototype[kr]=_h),b},or=h9();Un?((Un.exports=or)._=or,Ji._=or):mt._=or}).call(_r)})(Ri,Ri.exports);var eg=Ri.exports;const Mu=lo(eg);function V0(s){let r,t,i,o;function a(c){s[12](c)}function u(c){s[13](c)}let f={};return s[3]!==void 0&&(f.profile=s[3]),s[2]!==void 0&&(f.selected=s[2]),r=new Z1({props:f}),Oe.push(()=>at(r,"profile",a)),Oe.push(()=>at(r,"selected",u)),{c(){qe(r.$$.fragment)},l(c){Ge(r.$$.fragment,c)},m(c,d){je(r,c,d),o=!0},p(c,d){const g={};!t&&d&8&&(t=!0,g.profile=c[3],ut(()=>t=!1)),!i&&d&4&&(i=!0,g.selected=c[2],ut(()=>i=!1)),r.$set(g)},i(c){o||(le(r.$$.fragment,c),o=!0)},o(c){ae(r.$$.fragment,c),o=!1},d(c){Je(r,c)}}}function tg(s){let r,t,i,o,a=s[3]&&V0(s);function u(c){s[14](c)}let f={em:s[0],OnLongPress:s[4]};return s[1]!==void 0&&(f.status=s[1]),t=new $1({props:f}),Oe.push(()=>at(t,"status",u)),t.$on("click",s[6]),t.$on("mute",s[5]),{c(){a&&a.c(),r=ne(),qe(t.$$.fragment)},l(c){a&&a.l(c),r=re(c),Ge(t.$$.fragment,c)},m(c,d){a&&a.m(c,d),W(c,r,d),je(t,c,d),o=!0},p(c,[d]){c[3]?a?(a.p(c,d),d&8&&le(a,1)):(a=V0(c),a.c(),le(a,1),a.m(r.parentNode,r)):a&&(Gt(),ae(a,1,1,()=>{a=null}),jt());const g={};d&1&&(g.em=c[0]),!i&&d&2&&(i=!0,g.status=c[1],ut(()=>i=!1)),t.$set(g)},i(c){o||(le(a),le(t.$$.fragment,c),o=!0)},o(c){ae(a),ae(t.$$.fragment,c),o=!1},d(c){c&&S(r),a&&a.d(c),Je(t,c)}}}function ng(s,r,t){let i,o,a;Be(s,Li,K=>t(20,i=K)),Be(s,Mi,K=>t(10,o=K)),Be(s,yr,K=>t(11,a=K));let{abonent:u,em:f,operator:c}=r;const{groupBy:d,find:g}=Mu,p=wr(u+f+c);let m,v,P,O="inactive",I=!1,A={video:{display:"none",srcObject:""},audio:{paused:!0,src:""}},z={video:{display:"none",srcObject:""},audio:{muted:!0,srcObject:""}},x={em:f,abonent:u,type:"user"};Ft(async()=>{t(9,m=new G1(x,p,i)),t(9,m.OnOpenDataChannel=()=>{console.log("OnOpenDataChannel")},m),t(9,m.GetRemoteAudio=()=>z.audio.srcObject,m),t(9,m.SetRemoteAudio=K=>{z.audio.srcObject=K},m),t(9,m.SendToComponent=H,m),t(9,m.SetLocalVideo=K=>{A.video.srcObject=K},m),t(9,m.SetRemoteVideo=K=>{z.video.srcObject=K,z.video.display="block",t(1,O="talk"),A.audio.paused=!0},m)});function M(){}function ee(){t(1,O="talk"),R()}function H(K){if(K.operators&&K.operators[f]){let V=d(K.operators[f],"status");try{V&&V.offer?O!=="call"&&O!=="wait"&&t(1,O="active"):V.busy?O!=="call"&&t(1,O="busy"):V.close&&O!=="wait"&&(A.video.display="none",z.video.display="none",A.audio.paused=!0,z.audio.muted=!0,t(1,O="inactive"))}catch(ge){console.log(ge)}}K.operator&&K.operator.em===m.em&&t(1,O="active"),K.desc&&K.cand,K.func==="mute"&&(A.audio.paused=!0,z.audio.muted=!0,A.video.display="none",z.video.display="none",t(1,O="inactive")),K.func==="talk"&&(t(1,O="talk"),clearInterval(P),A.audio.paused=!0,z.audio.muted=!1),K.func==="redirect"&&(t(1,O="call"),A.audio.paused=!0,z.audio.muted=!0,z.video.srcObject=null,z.video.display="none"),K.status==="wait"&&t(1,O="wait")}async function R(){try{if(!window.AudioContext){window.AudioContext=window.AudioContext||window.webkitAudioContext;let K=new AudioContext;t(9,m.localSoundSrc=K.createMediaElementSource(m.localSound),m),m.localSoundSrc.connect(K.destination)}}catch{console.log("Web Audio API is not supported in this browser")}switch(O){case"inactive":break;case"wait":t(1,O="inactive"),m.SendCheck();break;case"active":let K=function(){m.Call(),t(1,O="call"),z.video.srcObject=null};localStorage.getItem("kolmit_abonent"),K();break;case"call":t(1,O="inactive"),A.audio.paused=!0,A.video.display="none",clearInterval(P),m.Hangup();break;case"talk":t(1,O="inactive"),z.audio.muted=!0,A.video.display="none",z.video.display="none",m.Hangup();break;case"muted":t(1,O="inactive");break;case"busy":m.Call(),t(1,O="wait");break;default:return}}function j(K){I=K,t(3,I)}function Z(K){v=K,t(2,v)}function Y(K){O=K,t(1,O)}return s.$$set=K=>{"abonent"in K&&t(7,u=K.abonent),"em"in K&&t(0,f=K.em),"operator"in K&&t(8,c=K.operator)},s.$$.update=()=>{if(s.$$.dirty&2048&&a&&H(a),s.$$.dirty&512&&m&&!m.em&&console.log(),s.$$.dirty&1027&&O){let K=g(o[0].staff,{email:f});K&&(K.status=O)}},[f,O,v,I,M,ee,R,u,c,m,o,a,j,Z,Y]}class rg extends xe{constructor(r){super(),He(this,r,ng,tg,We,{abonent:7,em:0,operator:8})}}function ig(s){let r,t,i,o;const a=s[4].default,u=Jn(a,s,s[3],null);return{c(){r=U("div"),u&&u.c(),this.h()},l(f){r=N(f,"DIV",{style:!0});var c=J(r);u&&u.l(c),c.forEach(S),this.h()},h(){k(r,"position","relative"),k(r,"right","0px"),k(r,"top","70px")},m(f,c){W(f,r,c),u&&u.m(r,null),t=!0,i||(o=ue(r,"click",s[0]),i=!0)},p(f,[c]){u&&u.p&&(!t||c&8)&&Kn(u,a,f,f[3],t?Zn(a,f[3],c,null):Yn(f[3]),null)},i(f){t||(le(u,f),t=!0)},o(f){ae(u,f),t=!1},d(f){f&&S(r),u&&u.d(f),i=!1,o()}}}function lg(s,r,t){let{$$slots:i={},$$scope:o}=r,{status:a}=r,{operator:u}=r;async function f(){document.querySelector("[src*='"+u+"']").contentWindow.document.querySelector(".callButton"),await new Promise(function(g,p){window.rtc.DC&&(window.rtc.DC.SendRedirect({operator:u},g),window.rtc.OnMessage({func:"mute"}))}),t(1,a="mute")}return s.$$set=c=>{"status"in c&&t(1,a=c.status),"operator"in c&&t(2,u=c.operator),"$$scope"in c&&t(3,o=c.$$scope)},[f,a,u,o,i]}class og extends xe{constructor(r){super(),He(this,r,lg,ig,We,{status:1,operator:2})}}function sg(s){let r,t,i,o,a,u;const f=s[6].default,c=Jn(f,s,s[5],null);return{c(){r=U("div"),c&&c.c(),t=ne(),i=U("input"),this.h()},l(d){r=N(d,"DIV",{style:!0});var g=J(r);c&&c.l(g),t=re(g),i=N(g,"INPUT",{class:!0,accept:!0,id:!0,name:!0,type:!0,style:!0}),g.forEach(S),this.h()},h(){C(i,"class","file-upload"),C(i,"accept","*,*"),C(i,"id","file"),C(i,"name","file"),C(i,"type","file"),k(i,"display","none"),k(r,"position","relative"),k(r,"right","0px"),k(r,"top","70px")},m(d,g){W(d,r,g),c&&c.m(r,null),L(r,t),L(r,i),s[7](i),o=!0,a||(u=[ue(i,"change",s[3]),ue(i,"change",s[8]),ue(r,"click",s[2])],a=!0)},p(d,[g]){c&&c.p&&(!o||g&32)&&Kn(c,f,d,d[5],o?Zn(f,d[5],g,null):Yn(d[5]),null)},i(d){o||(le(c,d),o=!0)},o(d){ae(c,d),o=!1},d(d){d&&S(r),c&&c.d(d),s[7](null),a=!1,Jt(u)}}}function ug(s,r,t){let{$$slots:i={},$$scope:o}=r,a,{operator:u}=r,f,c=globalThis;function d(v){let P=new PointerEvent("click",{bubbles:!1,cancelable:!0,view:c});document.getElementById("file").dispatchEvent(P)}async function g(v){try{let P=document.querySelector("[src*='"+u+"']"),I=await new Promise(function(A,z){let x=new FileReader;P.contentWindow.user?(x.onload=M=>{P.contentWindow.user.DC.SendFile(M.target.result,file.name)},x.readAsArrayBuffer(v.target.files[0])):(x.onload=M=>{c.rtc.DC.SendFile(M.target.result,file.name)},x.readAsArrayBuffer(v.target.files[0]))})}catch{}}function p(v){Oe[v?"unshift":"push"](()=>{f=v,t(1,f)})}function m(){a=this.files,t(0,a)}return s.$$set=v=>{"operator"in v&&t(4,u=v.operator),"$$scope"in v&&t(5,o=v.$$scope)},[a,f,d,g,u,o,i,p,m]}class ag extends xe{constructor(r){super(),He(this,r,ug,sg,We,{operator:4})}}const Bu=""+new URL("../assets/operator.7238a518.svg",import.meta.url).href;function q0(s){let r,t,i,o,a,u,f,c,d,g,p,m,v,P,O,I,A=s[1]&&G0(s);a=new rg({props:{em:s[0].email,operator:s[3].em,abonent:s[0].abonent}});let z=s[1]&&j0(s),x=s[15]&&fg(s),M=s[13]==="talk"&&s[14]==="active"&&s[0].email!==s[3].email&&K0(s),ee=(s[14]==="talk"||s[13]==="talk"&&s[0].email===s[3].email)&&Y0(s);return{c(){r=U("div"),t=U("video"),i=ne(),A&&A.c(),o=ne(),qe(a.$$.fragment),u=ne(),z&&z.c(),f=ne(),c=U("div"),x&&x.c(),d=ne(),g=U("textarea"),p=ne(),m=U("div"),M&&M.c(),v=ne(),ee&&ee.c(),this.h()},l(H){r=N(H,"DIV",{class:!0,style:!0});var R=J(r);t=N(R,"VIDEO",{id:!0,class:!0,poster:!0,style:!0}),J(t).forEach(S),i=re(R),A&&A.l(R),o=re(R),Ge(a.$$.fragment,R),u=re(R),z&&z.l(R),R.forEach(S),f=re(H),c=N(H,"DIV",{style:!0});var j=J(c);x&&x.l(j),d=re(j),g=N(j,"TEXTAREA",{type:!0,rows:!0,class:!0,placeholder:!0,style:!0}),J(g).forEach(S),j.forEach(S),p=re(H),m=N(H,"DIV",{style:!0});var Z=J(m);M&&M.l(Z),v=re(Z),ee&&ee.l(Z),Z.forEach(S),this.h()},h(){C(t,"id","localVideo"),C(t,"class","user_pic is-rounded"),C(t,"poster",s[4]),t.autoplay=!0,t.playsInline=!0,t.muted=!0,k(t,"display","block"),k(t,"position","absolute"),k(t,"top","0px"),k(t,"width","100px"),k(t,"height","100px"),C(r,"class","user_pic_div"),k(r,"position","relative"),k(r,"width","100px"),k(r,"height","100px"),C(g,"type","text"),C(g,"rows","3"),C(g,"class","user_desc svelte-1s97yno"),C(g,"placeholder",s[8]),g.readOnly=s[10],k(g,"width","85%"),k(g,"overflow","auto"),k(g,"max-height","100px"),k(g,"resize","none"),k(c,"flex","1"),k(c,"margin-left","10px"),k(m,"display","flex"),k(m,"flex-flow","row nowrap"),k(m,"align-items","flex-start"),k(m,"flex-direction","column")},m(H,R){W(H,r,R),L(r,t),L(r,i),A&&A.m(r,null),L(r,o),je(a,r,null),L(r,u),z&&z.m(r,null),W(H,f,R),W(H,c,R),x&&x.m(c,null),L(c,d),L(c,g),nt(g,s[0].desc),W(H,p,R),W(H,m,R),M&&M.m(m,null),L(m,v),ee&&ee.m(m,null),P=!0,O||(I=[ue(t,"click",s[16]),ue(g,"change",s[18]),ue(g,"input",s[26])],O=!0)},p(H,R){(!P||R[0]&16)&&C(t,"poster",H[4]),H[1]?A?A.p(H,R):(A=G0(H),A.c(),A.m(r,o)):A&&(A.d(1),A=null);const j={};R[0]&1&&(j.em=H[0].email),R[0]&8&&(j.operator=H[3].em),R[0]&1&&(j.abonent=H[0].abonent),a.$set(j),H[1]?z?z.p(H,R):(z=j0(H),z.c(),z.m(r,null)):z&&(z.d(1),z=null),H[15]&&x.p(H,R),(!P||R[0]&256)&&C(g,"placeholder",H[8]),(!P||R[0]&1024)&&(g.readOnly=H[10]),R[0]&1&&nt(g,H[0].desc),H[13]==="talk"&&H[14]==="active"&&H[0].email!==H[3].email?M?(M.p(H,R),R[0]&8201&&le(M,1)):(M=K0(H),M.c(),le(M,1),M.m(m,v)):M&&(Gt(),ae(M,1,1,()=>{M=null}),jt()),H[14]==="talk"||H[13]==="talk"&&H[0].email===H[3].email?ee?(ee.p(H,R),R[0]&8201&&le(ee,1)):(ee=Y0(H),ee.c(),le(ee,1),ee.m(m,null)):ee&&(Gt(),ae(ee,1,1,()=>{ee=null}),jt())},i(H){P||(le(a.$$.fragment,H),le(M),le(ee),P=!0)},o(H){ae(a.$$.fragment,H),ae(M),ae(ee),P=!1},d(H){H&&(S(r),S(f),S(c),S(p),S(m)),A&&A.d(),Je(a),z&&z.d(),x&&x.d(),M&&M.d(),ee&&ee.d(),O=!1,Jt(I)}}}function G0(s){let r,t,i;return{c(){r=U("input"),this.h()},l(o){r=N(o,"INPUT",{class:!0,accept:!0,id:!0,name:!0,type:!0,style:!0}),this.h()},h(){C(r,"class","file-upload svelte-1s97yno"),C(r,"accept","image/png, image/jpeg"),C(r,"id","avatar"),C(r,"name","avatar"),C(r,"type","file"),k(r,"display","none")},m(o,a){W(o,r,a),s[22](r),t||(i=[ue(r,"change",s[17]),ue(r,"change",s[23])],t=!0)},p:we,d(o){o&&S(r),s[22](null),t=!1,Jt(i)}}}function j0(s){let r,t=s[2].admin.email===s[3].email&&s[3].email!==s[0].email&&s[0].role==="operator"&&J0(s);return{c(){t&&t.c(),r=Re()},l(i){t&&t.l(i),r=Re()},m(i,o){t&&t.m(i,o),W(i,r,o)},p(i,o){i[2].admin.email===i[3].email&&i[3].email!==i[0].email&&i[0].role==="operator"?t?t.p(i,o):(t=J0(i),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(i){i&&S(r),t&&t.d(i)}}}function J0(s){let r,t,i,o,a,u;return{c(){r=Pe("svg"),t=Pe("glyph"),i=Pe("g"),o=Pe("path"),this.h()},l(f){r=Le(f,"svg",{height:!0,width:!0,style:!0});var c=J(r);t=Le(c,"glyph",{"glyph-name":!0,unicode:!0,"horiz-adv-x":!0}),J(t).forEach(S),i=Le(c,"g",{class:!0});var d=J(i);o=Le(d,"path",{d:!0,transform:!0,style:!0}),J(o).forEach(S),d.forEach(S),c.forEach(S),this.h()},h(){C(t,"glyph-name","minus-circle"),C(t,"unicode",""),C(t,"horiz-adv-x","50"),C(o,"d","M500.2 62.5c-241.8 0-437.7 195.89999999999998-437.7 437.3 0 241.8 195.89999999999998 437.7 437.7 437.7 241.40000000000003 0 437.3-195.89999999999998 437.3-437.7 0-241.40000000000003-195.89999999999998-437.3-437.3-437.3z m301.59999999999997 466.5c-0.6999999999999318 9-2.199999999999932 19.100000000000023-4.699999999999932 30.299999999999955h-593.9000000000001c-2.499999999999943-11.199999999999932-4.299999999999926-21.699999999999932-5.0999999999999375-31.399999999999977-0.6999999999999886-9.699999999999932-1.0999999999999943-19.799999999999955-1.0999999999999943-30.299999999999955 0-9 0.4000000000000057-18 1.0999999999999943-26.700000000000045 0.700000000000017-9 2.5-19.099999999999966 5.099999999999994-30.299999999999955h593.9000000000001c2.4999999999998863 11.199999999999989 3.9999999999998863 21.599999999999966 4.699999999999818 31.399999999999977 1.1000000000000227 9.699999999999989 1.400000000000091 19.80000000000001 1.400000000000091 30.30000000000001 0.09999999999990905 9.099999999999966-0.3000000000000682 17.69999999999999-1.400000000000091 26.69999999999999z"),C(o,"transform","scale(.03)"),k(o,"fill","lightgrey"),k(o,"stroke","black"),k(o,"stroke-width","20px"),C(i,"class","currentLayer"),C(r,"height","30"),C(r,"width","30"),k(r,"position","absolute"),k(r,"bottom","-15px"),k(r,"left","-9px")},m(f,c){W(f,r,c),L(r,t),L(r,i),L(i,o),a||(u=ue(r,"click",function(){Cr(s[19](s[0]))&&s[19](s[0]).apply(this,arguments)}),a=!0)},p(f,c){s=f},d(f){f&&S(r),a=!1,u()}}}function fg(s){let r,t,i,o,a;return{c(){r=U("input"),t=ne(),i=U("input"),this.h()},l(u){r=N(u,"INPUT",{type:!0,class:!0,placeholder:!0,style:!0}),t=re(u),i=N(u,"INPUT",{type:!0,class:!0,placeholder:!0,style:!0}),this.h()},h(){C(r,"type","text"),C(r,"class","user_name svelte-1s97yno"),C(r,"placeholder",s[6]),r.readOnly=s[10],k(r,"width","80%"),C(i,"type","text"),C(i,"class","user_email svelte-1s97yno"),C(i,"placeholder",s[7]),i.readOnly=s[11],k(i,"width","100%"),k(i,"max-height","100px")},m(u,f){W(u,r,f),nt(r,s[0].name),W(u,t,f),W(u,i,f),nt(i,s[0].email),o||(a=[ue(r,"change",s[18]),ue(r,"input",s[24]),ue(i,"change",s[18]),ue(i,"input",s[25])],o=!0)},p(u,f){f[0]&64&&C(r,"placeholder",u[6]),f[0]&1024&&(r.readOnly=u[10]),f[0]&1&&r.value!==u[0].name&&nt(r,u[0].name),f[0]&128&&C(i,"placeholder",u[7]),f[0]&2048&&(i.readOnly=u[11]),f[0]&1&&i.value!==u[0].email&&nt(i,u[0].email)},d(u){u&&(S(r),S(t),S(i)),o=!1,Jt(a)}}}function K0(s){let r,t,i;function o(u){s[27](u)}let a={operator:s[0].email,$$slots:{default:[cg]},$$scope:{ctx:s}};return s[13]!==void 0&&(a.$statust=s[13]),r=new og({props:a}),Oe.push(()=>at(r,"$statust",o)),{c(){qe(r.$$.fragment)},l(u){Ge(r.$$.fragment,u)},m(u,f){je(r,u,f),i=!0},p(u,f){const c={};f[0]&1&&(c.operator=u[0].email),f[1]&16&&(c.$$scope={dirty:f,ctx:u}),!t&&f[0]&8192&&(t=!0,c.$statust=u[13],ut(()=>t=!1)),r.$set(c)},i(u){i||(le(r.$$.fragment,u),i=!0)},o(u){ae(r.$$.fragment,u),i=!1},d(u){Je(r,u)}}}function cg(s){let r,t;return{c(){r=U("img"),this.h()},l(i){r=N(i,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){wt(r.src,t="./src/routes/assets/call-forward.svg")||C(r,"src",t),C(r,"alt","call-forward"),C(r,"width","30px"),C(r,"height","30px")},m(i,o){W(i,r,o)},p:we,d(i){i&&S(r)}}}function Y0(s){let r,t;return r=new ag({props:{$statust:s[13],operator:s[0].email,$$slots:{default:[hg]},$$scope:{ctx:s}}}),{c(){qe(r.$$.fragment)},l(i){Ge(r.$$.fragment,i)},m(i,o){je(r,i,o),t=!0},p(i,o){const a={};o[0]&8192&&(a.$statust=i[13]),o[0]&1&&(a.operator=i[0].email),o[1]&16&&(a.$$scope={dirty:o,ctx:i}),r.$set(a)},i(i){t||(le(r.$$.fragment,i),t=!0)},o(i){ae(r.$$.fragment,i),t=!1},d(i){Je(r,i)}}}function hg(s){let r,t;return{c(){r=U("img"),this.h()},l(i){r=N(i,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){wt(r.src,t="./src/routes/assets/file-transfer.svg")||C(r,"src",t),C(r,"alt","file-transfer"),C(r,"width","30px"),C(r,"height","30px")},m(i,o){W(i,r,o)},p:we,d(i){i&&S(r)}}}function dg(s){let r,t,i=s[0].email!==s[3].em&&q0(s);return{c(){r=U("div"),i&&i.c(),this.h()},l(o){r=N(o,"DIV",{style:!0});var a=J(r);i&&i.l(a),a.forEach(S),this.h()},h(){k(r,"display","flex"),k(r,"flex-wrap","nowrap"),k(r,"justify-content","space-between"),k(r,"padding-bottom","20px")},m(o,a){W(o,r,a),i&&i.m(r,null),s[28](r),t=!0},p(o,a){o[0].email!==o[3].em?i?(i.p(o,a),a[0]&9&&le(i,1)):(i=q0(o),i.c(),le(i,1),i.m(r,null)):i&&(Gt(),ae(i,1,1,()=>{i=null}),jt())},i(o){t||(le(i),t=!0)},o(o){ae(i),t=!1},d(o){o&&S(r),i&&i.d(),s[28](null)}}}function pg(s,r,t){let i,o,a,u,f;Be(s,Sn,ce=>t(31,i=ce)),Be(s,eo,ce=>t(32,o=ce)),Be(s,Ur,ce=>t(21,a=ce)),Be(s,Ou,ce=>t(33,u=ce)),Be(s,Di,ce=>t(13,f=ce));let{operator:c}=r,{id:d}=r,{dep:g}=r,{user:p}=r,m,v,P,O,I,A,z=u;z&&(P=z["input operator name"][i],O=z["input operator email"][i],I=z["input description"][i]);let x=Bu;p.picture.medium&&(x=p.picture.medium);let{edited_display:M}=r,ee=!0,H=!0;p.abonent=c.abonent,p.email=p.email?p.email:"";const R=ce=>ce?ce.replace(/^([a-z])/,(De,Ze)=>Ze.toUpperCase()):"";p.name=R(p.name);let j;Ft(()=>{});function Z(ce){let De=new MouseEvent("click",{bubbles:!1,cancelable:!0,view:window});A&&A.dispatchEvent(De)}let Y,K;function V(ce){try{oo(ce.target.files[0],function(De,Ze){De.type==="error"?console.error("Error loading image "):(Y=De.width,K=De.height,t(0,p.picture={medium:De.toDataURL()},p),ge())},{orientation:!0,maxWidth:100,maxHeight:100,minWidth:50,minHeight:50,canvas:!0})}catch(De){console.log(De)}}async function ge(ce){let De={};De.proj="kolmit",De.func="changeoper",De.abonent=c.abonent,De.em=c.email,De.dep_id=g.id,De.data=p,De.lang=i,fetch("/api/operator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:De})})}async function Q(ce){let De=g.staff[d];if(De&&confirm("Delete "+De.name)){let Ze={};Ze.proj="kolmit",Ze.func="remoper",Ze.em=c.email,Ze.id=De.id,Ze.dep=g.id,Ze.lang=i,Ze.abonent=c.abonent;const ft=await(await fetch("/operator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:Ze})})).json();t(2,g.staff=ft.dep.staff,g)}}function oe(ce){Oe[ce?"unshift":"push"](()=>{A=ce,t(9,A)})}function $e(){m=this.files,t(5,m)}function ke(){p.name=this.value,t(0,p)}function Ke(){p.email=this.value,t(0,p)}function it(){p.desc=this.value,t(0,p)}function Ae(ce){f=ce,Di.set(f)}function be(ce){Oe[ce?"unshift":"push"](()=>{j=ce,t(12,j)})}return s.$$set=ce=>{"operator"in ce&&t(3,c=ce.operator),"id"in ce&&t(20,d=ce.id),"dep"in ce&&t(2,g=ce.dep),"user"in ce&&t(0,p=ce.user),"edited_display"in ce&&t(1,M=ce.edited_display)},s.$$.update=()=>{s.$$.dirty[0]&2097154&&a&&(t(1,M=a),t(10,ee=!M),t(11,H=!M)),s.$$.dirty[0]&25&&p.email&&c.em===p.email&&(console.log(c.em+" "+p.email),Mn(eo,o=x,o))},[p,M,g,c,x,m,P,O,I,A,ee,H,j,f,v,z,Z,V,ge,Q,d,a,oe,$e,ke,Ke,it,Ae,be]}class Fu extends xe{constructor(r){super(),He(this,r,pg,dg,We,{operator:3,id:20,dep:2,user:0,edited_display:1},null,[-1,-1])}}function Z0(s,r,t){const i=s.slice();return i[30]=r[t],i[31]=r,i[32]=t,i}function X0(s){let r,t,i,o,a,u=s[1]&&Q0(s);return{c(){r=U("button"),t=U("input"),i=ne(),u&&u.c(),this.h()},l(f){r=N(f,"BUTTON",{class:!0,owner:!0});var c=J(r);t=N(c,"INPUT",{type:!0,style:!0,placeholder:!0,class:!0}),i=re(c),u&&u.l(c),c.forEach(S),this.h()},h(){C(t,"type","text"),t.readOnly=s[10],k(t,"border-width","0px"),C(t,"placeholder","input dep name"),C(t,"class","svelte-wxdsc0"),C(r,"class","collapsible svelte-wxdsc0"),C(r,"owner",s[2])},m(f,c){W(f,r,c),L(r,t),nt(t,s[0].alias),L(r,i),u&&u.m(r,null),s[17](r),o||(a=[ue(t,"change",function(){Cr(s[13]({dep:s[0]}))&&s[13]({dep:s[0]}).apply(this,arguments)}),ue(t,"click",s[12]),ue(t,"input",s[16]),ue(r,"click",s[14])],o=!0)},p(f,c){s=f,c[0]&1024&&(t.readOnly=s[10]),c[0]&1&&t.value!==s[0].alias&&nt(t,s[0].alias),s[1]?u?u.p(s,c):(u=Q0(s),u.c(),u.m(r,null)):u&&(u.d(1),u=null),c[0]&4&&C(r,"owner",s[2])},d(f){f&&S(r),u&&u.d(),s[17](null),o=!1,Jt(a)}}}function Q0(s){let r,t=s[3].email===s[3].abonent&&$0(s);return{c(){t&&t.c(),r=Re()},l(i){t&&t.l(i),r=Re()},m(i,o){t&&t.m(i,o),W(i,r,o)},p(i,o){i[3].email===i[3].abonent?t?t.p(i,o):(t=$0(i),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(i){i&&S(r),t&&t.d(i)}}}function $0(s){let r,t,i,o,a,u;return{c(){r=Pe("svg"),t=Pe("glyph"),i=Pe("g"),o=Pe("path"),this.h()},l(f){r=Le(f,"svg",{height:!0,width:!0,style:!0});var c=J(r);t=Le(c,"glyph",{"glyph-name":!0,unicode:!0,"horiz-adv-x":!0}),J(t).forEach(S),i=Le(c,"g",{class:!0});var d=J(i);o=Le(d,"path",{d:!0,transform:!0,style:!0}),J(o).forEach(S),d.forEach(S),c.forEach(S),this.h()},h(){C(t,"glyph-name","minus-circle"),C(t,"unicode",""),C(t,"horiz-adv-x","50"),C(o,"d","M500.2 62.5c-241.8 0-437.7 195.89999999999998-437.7 437.3 0 241.8 195.89999999999998 437.7 437.7 437.7 241.40000000000003 0 437.3-195.89999999999998 437.3-437.7 0-241.40000000000003-195.89999999999998-437.3-437.3-437.3z m301.59999999999997 466.5c-0.6999999999999318 9-2.199999999999932 19.100000000000023-4.699999999999932 30.299999999999955h-593.9000000000001c-2.499999999999943-11.199999999999932-4.299999999999926-21.699999999999932-5.0999999999999375-31.399999999999977-0.6999999999999886-9.699999999999932-1.0999999999999943-19.799999999999955-1.0999999999999943-30.299999999999955 0-9 0.4000000000000057-18 1.0999999999999943-26.700000000000045 0.700000000000017-9 2.5-19.099999999999966 5.099999999999994-30.299999999999955h593.9000000000001c2.4999999999998863 11.199999999999989 3.9999999999998863 21.599999999999966 4.699999999999818 31.399999999999977 1.1000000000000227 9.699999999999989 1.400000000000091 19.80000000000001 1.400000000000091 30.30000000000001 0.09999999999990905 9.099999999999966-0.3000000000000682 17.69999999999999-1.400000000000091 26.69999999999999z"),C(o,"transform","scale(.03)"),k(o,"fill","lightgrey"),k(o,"stroke","black"),k(o,"stroke-width","20px"),C(i,"class","currentLayer"),C(r,"height","30"),C(r,"width","30"),k(r,"position","relative"),k(r,"float","right")},m(f,c){W(f,r,c),L(r,t),L(r,i),L(i,o),a||(u=ue(r,"click",function(){Cr(s[6](s[0].id))&&s[6](s[0].id).apply(this,arguments)}),a=!0)},p(f,c){s=f},d(f){f&&S(r),a=!1,u()}}}function eu(s){let r,t,i,o,a,u;function f(p){s[18](p)}function c(p){s[19](p)}function d(p){s[20](p)}let g={id:s[0].admin.id,operator:s[3],update:s[4],readonly:s[10]};return s[9]!==void 0&&(g.status=s[9]),s[0]!==void 0&&(g.dep=s[0]),s[0].admin!==void 0&&(g.user=s[0].admin),t=new Fu({props:g}),Oe.push(()=>at(t,"status",f)),Oe.push(()=>at(t,"dep",c)),Oe.push(()=>at(t,"user",d)),{c(){r=U("div"),qe(t.$$.fragment)},l(p){r=N(p,"DIV",{});var m=J(r);Ge(t.$$.fragment,m),m.forEach(S)},m(p,m){W(p,r,m),je(t,r,null),u=!0},p(p,m){const v={};m[0]&1&&(v.id=p[0].admin.id),m[0]&8&&(v.operator=p[3]),m[0]&16&&(v.update=p[4]),m[0]&1024&&(v.readonly=p[10]),!i&&m[0]&512&&(i=!0,v.status=p[9],ut(()=>i=!1)),!o&&m[0]&1&&(o=!0,v.dep=p[0],ut(()=>o=!1)),!a&&m[0]&1&&(a=!0,v.user=p[0].admin,ut(()=>a=!1)),t.$set(v)},i(p){u||(le(t.$$.fragment,p),u=!0)},o(p){ae(t.$$.fragment,p),u=!1},d(p){p&&S(r),Je(t)}}}function tu(s){let r,t,i=_t(s[0].staff),o=[];for(let u=0;u<i.length;u+=1)o[u]=nu(Z0(s,i,u));const a=u=>ae(o[u],1,1,()=>{o[u]=null});return{c(){for(let u=0;u<o.length;u+=1)o[u].c();r=Re()},l(u){for(let f=0;f<o.length;f+=1)o[f].l(u);r=Re()},m(u,f){for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(u,f);W(u,r,f),t=!0},p(u,f){if(f[0]&1561){i=_t(u[0].staff);let c;for(c=0;c<i.length;c+=1){const d=Z0(u,i,c);o[c]?(o[c].p(d,f),le(o[c],1)):(o[c]=nu(d),o[c].c(),le(o[c],1),o[c].m(r.parentNode,r))}for(Gt(),c=i.length;c<o.length;c+=1)a(c);jt()}},i(u){if(!t){for(let f=0;f<i.length;f+=1)le(o[f]);t=!0}},o(u){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)ae(o[f]);t=!1},d(u){u&&S(r),Xn(o,u)}}}function nu(s){let r,t,i,o,a,u;function f(p){s[21](p)}function c(p){s[22](p)}function d(p){s[23](p,s[30],s[31],s[32])}let g={operator:s[3],update:s[4],readonly:s[10]};return s[9]!==void 0&&(g.status=s[9]),s[0]!==void 0&&(g.dep=s[0]),s[30]!==void 0&&(g.user=s[30]),r=new Fu({props:g}),Oe.push(()=>at(r,"status",f)),Oe.push(()=>at(r,"dep",c)),Oe.push(()=>at(r,"user",d)),{c(){qe(r.$$.fragment),a=ne()},l(p){Ge(r.$$.fragment,p),a=re(p)},m(p,m){je(r,p,m),W(p,a,m),u=!0},p(p,m){s=p;const v={};m[0]&8&&(v.operator=s[3]),m[0]&16&&(v.update=s[4]),m[0]&1024&&(v.readonly=s[10]),!t&&m[0]&512&&(t=!0,v.status=s[9],ut(()=>t=!1)),!i&&m[0]&1&&(i=!0,v.dep=s[0],ut(()=>i=!1)),!o&&m[0]&1&&(o=!0,v.user=s[30],ut(()=>o=!1)),r.$set(v)},i(p){u||(le(r.$$.fragment,p),u=!0)},o(p){ae(r.$$.fragment,p),u=!1},d(p){p&&S(a),Je(r,p)}}}function ru(s){let r,t,i,o,a,u,f,c;return{c(){r=U("div"),t=Pe("svg"),i=Pe("title"),o=Ue("add-user"),a=Pe("glyph"),u=Pe("path"),this.h()},l(d){r=N(d,"DIV",{class:!0,style:!0});var g=J(r);t=Le(g,"svg",{style:!0});var p=J(t);i=Le(p,"title",{});var m=J(i);o=Ne(m,"add-user"),m.forEach(S),a=Le(p,"glyph",{"glyph-name":!0,unicode:!0,"horiz-adv-x":!0}),J(a).forEach(S),u=Le(p,"path",{d:!0,transform:!0,style:!0}),J(u).forEach(S),p.forEach(S),g.forEach(S),this.h()},h(){C(a,"glyph-name","contact-add"),C(a,"unicode",""),C(a,"horiz-adv-x","50"),C(u,"d","M134.1 761.6c-14.5 0-26.39999999999999-11.899999999999977-26.39999999999999-26.399999999999977v-523.5c0-14.500000000000057 11.899999999999991-26.400000000000034 26.39999999999999-26.400000000000034h639.8c14.5 0 26.399999999999977 11.899999999999977 26.399999999999977 26.399999999999977v239.40000000000003c15.800000000000068 2.3999999999999773 30.90000000000009 6.2999999999999545 45.40000000000009 11.899999999999977v-288.7c0-14.5-11.900000000000091-26.400000000000006-26.40000000000009-26.400000000000006h-730.4c-14.499999999999972 0-26.399999999999977 11.900000000000006-26.399999999999977 26.400000000000006v598.7c0 14.399999999999977 11.900000000000006 26.299999999999955 26.400000000000006 26.299999999999955h479.30000000000007c-7.400000000000091-11.899999999999977-13.700000000000045-24.59999999999991-18.700000000000045-37.69999999999993h-415.4z m164.70000000000002-245h-19.400000000000034c-41.69999999999999 0-75.39999999999998 33.799999999999955-75.39999999999998 75.39999999999998v21c0 13.100000000000023 10.699999999999989 23.799999999999955 23.80000000000001 23.799999999999955h251.7c13.100000000000023 0 23.899999999999977-10.699999999999932 23.899999999999977-23.799999999999955v-21c0-41.60000000000002-33.799999999999955-75.39999999999998-75.39999999999998-75.39999999999998h-19.600000000000023c-10.099999999999966 0-18.299999999999955-8.100000000000023-18.299999999999955-18.30000000000001 0-3.8000000000000114 1.5-7.300000000000011 4.199999999999989-10 11.300000000000011-11 20.899999999999977-25.80000000000001 27.69999999999999-41.80000000000001 1.5 1.1000000000000227 2.8999999999999773 1.8000000000000114 4.5 1.8000000000000114 10.899999999999977 0 23.80000000000001-24.19999999999999 23.80000000000001-40.80000000000001 0-16.399999999999977-1.5-29.80000000000001-12.300000000000011-29.80000000000001-1.3000000000000114 0-2.8000000000000114 0.30000000000001137-4 0.6000000000000227-0.8000000000000114-44.69999999999999-12.100000000000023-100.40000000000003-80.30000000000001-100.40000000000003-71.19999999999999 0-79.5 55.60000000000002-80.19999999999999 100.20000000000005-1-0.20000000000004547-2-0.4000000000000341-2.8999999999999773-0.4000000000000341-11 0-12.5 13.400000000000034-12.5 29.80000000000001 0 16.5 12.899999999999977 40.80000000000001 23.799999999999955 40.80000000000001 1.3000000000000114 0 2.6000000000000227-0.4000000000000341 3.8000000000000114-1.1000000000000227 6.800000000000011 15.699999999999989 16.19999999999999 30.30000000000001 27.30000000000001 41 2.8000000000000114 2.6000000000000227 4.199999999999989 6.300000000000011 4.199999999999989 10-0.19999999999998863 10.199999999999989-8.399999999999977 18.400000000000034-18.399999999999977 18.400000000000034z m381.2-189.3c0-9.699999999999989-7.899999999999977-17.80000000000001-17.799999999999955-17.80000000000001h-211.00000000000006c6 13.600000000000023 10.300000000000011 30.100000000000023 12.199999999999989 50.60000000000002 4.600000000000023 2.8999999999999773 7.900000000000034 7.399999999999977 10.700000000000045 12.799999999999955h188.10000000000002c9.699999999999932 0 17.799999999999955-7.899999999999977 17.799999999999955-17.599999999999966v-28z m-2.1000000000000227 151.09999999999997c1.1000000000000227-2.3999999999999773 2.1000000000000227-5 2.1000000000000227-7.699999999999989v-28c0-9.699999999999989-7.899999999999977-17.80000000000001-17.799999999999955-17.80000000000001h-183.80000000000007c-5 18.900000000000034-17.099999999999966 38.700000000000045-34.299999999999955 43.900000000000034l-1.6000000000000227 2.8000000000000114v16.69999999999999h213.20000000000005c7.2999999999999545-3.6999999999999886 14.699999999999932-7 22.199999999999932-9.900000000000034z m-125 125.10000000000002c8.899999999999977-23.299999999999955 21.5-44.5 37.39999999999998-63.200000000000045h-71.69999999999993c9.399999999999977 15 15.100000000000023 32.700000000000045 15.100000000000023 51.60000000000002v11.5h19.199999999999932v0.10000000000002274z m332.20000000000005-55.39999999999998c-30.700000000000045-31.100000000000023-73.10000000000002-50.60000000000002-119.70000000000005-52.400000000000034h-6.2999999999999545c-49.700000000000045 0-94 19.900000000000034-126.5 52.400000000000034-32.10000000000002 32.10000000000002-52.39999999999998 76.79999999999995-52.39999999999998 126 0 25.299999999999955 5.399999999999977 49.299999999999955 14.899999999999977 71 9 20.699999999999932 21.699999999999932 39.69999999999993 37.5 55.60000000000002 32.5 32.09999999999991 76.79999999999995 52 126.5 52 98.39999999999998 0 178.39999999999998-80 178.39999999999998-178.4000000000001 0-49.39999999999998-19.899999999999977-94.09999999999991-52.39999999999998-126.19999999999993z m-41.60000000000002 152.19999999999993h-58.700000000000045v58.30000000000007h-52v-58.30000000000007h-58.299999999999955v-52.39999999999998h58.299999999999955v-58.299999999999955h52v58.299999999999955h58.700000000000045v52.39999999999998z"),C(u,"transform","scale(.04)"),k(u,"fill","grey"),k(t,"position","relative"),k(t,"left","45%"),k(t,"height","40, width=40"),C(r,"class","add_oper"),k(r,"display",s[8])},m(d,g){W(d,r,g),L(r,t),L(t,i),L(i,o),L(t,a),L(t,u),f||(c=ue(r,"click",s[5]),f=!0)},p(d,g){g[0]&256&&k(r,"display",d[8])},d(d){d&&S(r),f=!1,c()}}}function gg(s){let r,t,i,o,a,u=s[0].id!=="0"&&X0(s),f=s[0].admin&&eu(s),c=s[0].staff&&tu(s),d=s[1]&&ru(s);return{c(){u&&u.c(),r=ne(),t=U("div"),f&&f.c(),i=ne(),c&&c.c(),o=ne(),d&&d.c(),this.h()},l(g){u&&u.l(g),r=re(g),t=N(g,"DIV",{class:!0,style:!0});var p=J(t);f&&f.l(p),i=re(p),c&&c.l(p),o=re(p),d&&d.l(p),p.forEach(S),this.h()},h(){C(t,"class","content svelte-wxdsc0"),k(t,"max-height","0px")},m(g,p){u&&u.m(g,p),W(g,r,p),W(g,t,p),f&&f.m(t,null),L(t,i),c&&c.m(t,null),L(t,o),d&&d.m(t,null),s[24](t),a=!0},p(g,p){g[0].id!=="0"?u?u.p(g,p):(u=X0(g),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null),g[0].admin?f?(f.p(g,p),p[0]&1&&le(f,1)):(f=eu(g),f.c(),le(f,1),f.m(t,i)):f&&(Gt(),ae(f,1,1,()=>{f=null}),jt()),g[0].staff?c?(c.p(g,p),p[0]&1&&le(c,1)):(c=tu(g),c.c(),le(c,1),c.m(t,o)):c&&(Gt(),ae(c,1,1,()=>{c=null}),jt()),g[1]?d?d.p(g,p):(d=ru(g),d.c(),d.m(t,null)):d&&(d.d(1),d=null)},i(g){a||(le(f),le(c),a=!0)},o(g){ae(f),ae(c),a=!1},d(g){g&&(S(r),S(t)),u&&u.d(g),f&&f.d(),c&&c.d(),d&&d.d(),s[24](null)}}}function _g(s,r,t){let i,o,a;Be(s,Sn,Q=>t(25,i=Q)),Be(s,Ur,Q=>t(15,o=Q)),Be(s,Di,Q=>t(26,a=Q)),Be(s,Li,Q=>t(27,Q));let{dep:u}=r,{owner:f}=r,{operator:c}=r,d,g="none",p=a,m=!1,v;Ft(()=>{u.id==="0"&&t(11,v.style.maxHeight=200+v.scrollHeight+"px",v);let Q=document.getElementsByClassName("add_oper");for(let oe in Q)m||(Q[oe].scrollIntoView&&Q[oe].scrollIntoView(!1),M(new Event("expand")))});let{update:P}=r,{edited_display:O}=r;function I(Q){O&&(u.admin.email===f||!c.abonent)&&(Q.currentTarget.readOnly=!1)}async function A(Q){let oe={};oe.proj="kolmit",oe.func="changedep",oe.abonent=c.abonent,oe.em=c.email,oe.dep=u;let ke=await(await fetch("/api/operator",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:oe})})).json();t(0,u=ke.dep),console.log(ke.rows.affectedRows)}async function z(Q){let oe={};oe.proj="kolmit",oe.func="addoper",oe.abonent=c.abonent,oe.em=c.email,oe.lang=i,oe.dep_id=u.id;let ke=await(await fetch("/api/operator/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:oe})})).json();t(0,u=ke.dep),t(11,v.style.maxHeight=200+v.scrollHeight+"px",v)}let{RemoveDep:x}=r;function M(Q){v&&Q.type!=="expand"&&(v.style.maxHeight=="0px"?t(11,v.style.maxHeight=v.scrollHeight+"px",v):t(11,v.style.maxHeight="0px",v)),console.log(v.style.maxHeight)}function ee(){u.alias=this.value,t(0,u)}function H(Q){Oe[Q?"unshift":"push"](()=>{d=Q,t(7,d)})}function R(Q){p=Q,t(9,p)}function j(Q){u=Q,t(0,u)}function Z(Q){s.$$.not_equal(u.admin,Q)&&(u.admin=Q,t(0,u))}function Y(Q){p=Q,t(9,p)}function K(Q){u=Q,t(0,u)}function V(Q,oe,$e,ke){$e[ke]=Q,t(0,u)}function ge(Q){Oe[Q?"unshift":"push"](()=>{v=Q,t(11,v)})}return s.$$set=Q=>{"dep"in Q&&t(0,u=Q.dep),"owner"in Q&&t(2,f=Q.owner),"operator"in Q&&t(3,c=Q.operator),"update"in Q&&t(4,P=Q.update),"edited_display"in Q&&t(1,O=Q.edited_display),"RemoveDep"in Q&&t(6,x=Q.RemoveDep)},s.$$.update=()=>{s.$$.dirty[0]&32770&&o&&(t(1,O=o),t(10,m=!O)),s.$$.dirty[0]&11&&O&&(!c.abonent&&u.id==="0"||!c.abonent&&!u.admin||c.abonent&&c.email===u.admin.email)&&t(8,g="block")},[u,O,f,c,P,z,x,d,g,p,m,v,I,A,M,o,ee,H,R,j,Z,Y,K,V,ge]}class mg extends xe{constructor(r){super(),He(this,r,_g,gg,We,{dep:0,owner:2,operator:3,update:4,edited_display:1,AddOper:5,RemoveDep:6},null,[-1,-1])}get AddOper(){return this.$$.ctx[5]}}function iu(s,r,t){const i=s.slice();return i[21]=r[t],i[22]=r,i[23]=t,i}function lu(s){let r,t,i,o,a,u,f;function c(m){s[8](m,s[21],s[22],s[23])}function d(m){s[9](m)}function g(m){s[10](m)}let p={owner:s[21].admin.email,operator:s[0],update:s[2],RemoveDep:s[6]};return s[21]!==void 0&&(p.dep=s[21]),s[1]!==void 0&&(p.tarif=s[1]),s[4]!==void 0&&(p.edited_display=s[4]),i=new mg({props:p}),Oe.push(()=>at(i,"dep",c)),Oe.push(()=>at(i,"tarif",d)),Oe.push(()=>at(i,"edited_display",g)),{c(){r=U("br"),t=ne(),qe(i.$$.fragment),this.h()},l(m){r=N(m,"BR",{class:!0}),t=re(m),Ge(i.$$.fragment,m),this.h()},h(){C(r,"class","svelte-1iqzrvs")},m(m,v){W(m,r,v),W(m,t,v),je(i,m,v),f=!0},p(m,v){s=m;const P={};v&4&&(P.owner=s[21].admin.email),v&1&&(P.operator=s[0]),v&4&&(P.update=s[2]),!o&&v&4&&(o=!0,P.dep=s[21],ut(()=>o=!1)),!a&&v&2&&(a=!0,P.tarif=s[1],ut(()=>a=!1)),!u&&v&16&&(u=!0,P.edited_display=s[4],ut(()=>u=!1)),i.$set(P)},i(m){f||(le(i.$$.fragment,m),f=!0)},o(m){ae(i.$$.fragment,m),f=!1},d(m){m&&(S(r),S(t)),Je(i,m)}}}function ou(s){let r,t=s[0].role==="admin"&&su(s);return{c(){t&&t.c(),r=Re()},l(i){t&&t.l(i),r=Re()},m(i,o){t&&t.m(i,o),W(i,r,o)},p(i,o){i[0].role==="admin"?t?t.p(i,o):(t=su(i),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(i){i&&S(r),t&&t.d(i)}}}function su(s){let r,t,i,o,a,u,f;return{c(){r=Pe("svg"),t=Pe("title"),i=Ue("Add Dep"),o=Pe("glyph"),a=Pe("path"),this.h()},l(c){r=Le(c,"svg",{class:!0,height:!0,width:!0,style:!0});var d=J(r);t=Le(d,"title",{class:!0});var g=J(t);i=Ne(g,"Add Dep"),g.forEach(S),o=Le(d,"glyph",{"glyph-name":!0,unicode:!0,"horiz-adv-x":!0,class:!0}),J(o).forEach(S),a=Le(d,"path",{d:!0,transform:!0,style:!0,class:!0}),J(a).forEach(S),d.forEach(S),this.h()},h(){C(t,"class","svelte-1iqzrvs"),C(o,"glyph-name","plus-circle"),C(o,"unicode",""),C(o,"horiz-adv-x","50"),C(o,"class","svelte-1iqzrvs"),C(a,"d","M500.2 62.5c-241.8 0-437.7 195.89999999999998-437.7 437.3 0 241.8 195.89999999999998 437.7 437.7 437.7 241.40000000000003 0 437.3-195.89999999999998 437.3-437.7 0-241.40000000000003-195.89999999999998-437.3-437.3-437.3z m301.59999999999997 466.5c-0.6999999999999318 9-2.199999999999932 19.100000000000023-4.699999999999932 30.299999999999955h-237.70000000000005v237.80000000000007c-11.199999999999932 2.5-21.600000000000023 4.2999999999999545-31.399999999999977 5.100000000000023-9.700000000000045 0.6999999999999318-19.80000000000001 1.099999999999909-30.30000000000001 1.099999999999909-9 0-17.69999999999999-0.39999999999997726-26.69999999999999-1.099999999999909-9-0.7000000000000455-19.100000000000023-2.5-30.30000000000001-5.100000000000023v-237.70000000000005h-237.5c-2.5-11.199999999999932-4.299999999999983-21.699999999999932-5.099999999999994-31.399999999999977-0.6999999999999886-9.700000000000045-1.0999999999999943-19.80000000000001-1.0999999999999943-30.30000000000001 0-9 0.4000000000000057-17.69999999999999 1.0999999999999943-26.69999999999999 0.700000000000017-9 2.5-19.100000000000023 5.099999999999994-30.30000000000001h237.40000000000003v-237.5c11.199999999999989-2.5 21.599999999999966-4 31.399999999999977-4.699999999999989 9.699999999999989-1.0999999999999943 19.80000000000001-1.4000000000000057 30.30000000000001-1.4000000000000057 9 0 17.999999999999943 0.4000000000000057 26.69999999999999 1.4000000000000057 9 0.6999999999999886 19.100000000000023 2.1999999999999886 30.299999999999955 4.699999999999989v237.40000000000003h237.80000000000007c2.5 11.199999999999989 4 21.599999999999966 4.699999999999932 31.399999999999977 1.1000000000000227 9.699999999999989 1.400000000000091 19.80000000000001 1.400000000000091 30.30000000000001 0.09999999999990905 9.099999999999966-0.3000000000000682 18.099999999999966-1.400000000000091 26.69999999999999z"),C(a,"transform","scale(.04)"),k(a,"fill","lightgrey"),C(a,"class","svelte-1iqzrvs"),C(r,"class","add_dep svelte-1iqzrvs"),C(r,"height","50"),C(r,"width","50"),k(r,"float","right")},m(c,d){W(c,r,d),L(r,t),L(t,i),L(r,o),L(r,a),u||(f=ue(r,"click",s[5]),u=!0)},p:we,d(c){c&&S(r),u=!1,f()}}}function vg(s){let r,t,i,o,a,u,f=_t(s[2]),c=[];for(let p=0;p<f.length;p+=1)c[p]=lu(iu(s,f,p));const d=p=>ae(c[p],1,1,()=>{c[p]=null});let g=s[4]&&ou(s);return{c(){r=U("div"),t=U("div");for(let p=0;p<c.length;p+=1)c[p].c();i=ne(),g&&g.c(),o=ne(),a=U("div"),this.h()},l(p){r=N(p,"DIV",{style:!0,class:!0});var m=J(r);t=N(m,"DIV",{class:!0,style:!0});var v=J(t);for(let P=0;P<c.length;P+=1)c[P].l(v);i=re(v),g&&g.l(v),o=re(v),a=N(v,"DIV",{class:!0,style:!0}),J(a).forEach(S),v.forEach(S),m.forEach(S),this.h()},h(){C(a,"class","empty svelte-1iqzrvs"),k(a,"height","400px"),C(t,"class","deps_div svelte-1iqzrvs"),k(t,"height","100vh"),k(t,"overflow-y","scroll"),k(r,"display",s[3]),C(r,"class","svelte-1iqzrvs")},m(p,m){W(p,r,m),L(r,t);for(let v=0;v<c.length;v+=1)c[v]&&c[v].m(t,null);L(t,i),g&&g.m(t,null),L(t,o),L(t,a),u=!0},p(p,[m]){if(m&87){f=_t(p[2]);let v;for(v=0;v<f.length;v+=1){const P=iu(p,f,v);c[v]?(c[v].p(P,m),le(c[v],1)):(c[v]=lu(P),c[v].c(),le(c[v],1),c[v].m(t,i))}for(Gt(),v=f.length;v<c.length;v+=1)d(v);jt()}p[4]?g?g.p(p,m):(g=ou(p),g.c(),g.m(t,o)):g&&(g.d(1),g=null),(!u||m&8)&&k(r,"display",p[3])},i(p){if(!u){for(let m=0;m<f.length;m+=1)le(c[m]);u=!0}},o(p){c=c.filter(Boolean);for(let m=0;m<c.length;m+=1)ae(c[m]);u=!1},d(p){p&&S(r),Xn(c,p),g&&g.d()}}}function bg(s,r,t){let i,o,a,u;Be(s,io,R=>t(12,i=R)),Be(s,yr,R=>t(13,o=R)),Be(s,Mi,R=>t(14,a=R)),Be(s,Sn,R=>t(15,u=R));const{forEach:f,findIndex:c}=Mu;let{operator:d}=r,{view:g}=r,p="none",m,v=u,P=a;async function O(R){fetch(`/api/user?abonent=${R.abonent}&em=${R.em}&type=${R.type}`).then(j=>j.json()).then(j=>{Array.isArray(j.resp)?j.resp.map(Z=>{Mn(yr,o=Z,o)}):Mn(yr,o=j.resp,o),O(R)}).catch(j=>(console.log(j),[]))}Ft(async()=>{O({type:"user",abonent:d.abonent,em:d.em})});let I=!1,{tarif:A}=r;async function z(){if(d.role==="admin"){let R={};R.proj="kolmit",R.func="adddep",R.em=d.email,R.lang=v,R.abonent=d.abonent,R.id=m;const K=(await(await fetch(i+"/api/operator",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:R})})).json()).dep;t(2,P[R.id]=K,P)}}async function x(R){let j=c(P,{id:R});if(confirm("Delete Dep "+(P[j].alias?P[j].alias:"")+"?")){let Z={};Z.proj="kolmit",Z.func="remdep",Z.role=d,Z.dep=R,Z.em=d.email,Z.lang=v,Z.abonent=d.abonent,Z.uid=d.uid;const K=await(await fetch(i+"/api/operator",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({par:Z})})).json();t(2,P=K.users)}}function M(R,j,Z,Y){Z[Y]=R,t(2,P)}function ee(R){A=R,t(1,A)}function H(R){I=R,t(4,I)}return s.$$set=R=>{"operator"in R&&t(0,d=R.operator),"view"in R&&t(7,g=R.view),"tarif"in R&&t(1,A=R.tarif)},s.$$.update=()=>{s.$$.dirty&128&&(g==="cc"?t(3,p="block"):t(3,p="none")),s.$$.dirty&5&&P&&P.length>0&&f(P,(R,j)=>{R.admin&&R.admin.email===d.email&&t(0,d.role=R.admin.role,d),m=j})},[d,A,P,p,I,z,x,g,M,ee,H]}class yg extends xe{constructor(r){super(),He(this,r,bg,vg,We,{operator:0,view:7,tarif:1})}}class wg{constructor(r,t,i){this.con=new RTCPeerConnection(t),this.signal=r.signal,this.rtc=r,this.pc_key=i,this.params={}}async SendDesc(r){let t=this,i={};return i.proj="kolmit",i.func="call",i.abonent=t.rtc.abonent,i.type=this.rtc.type,i.em=this.rtc.em,i.uid=this.rtc.uid,i.desc=r,i.status="call",i.oper_uid=this.rtc.oper_uid,await this.signal.SendMessage(i)}async SendCand(r){let t=this,i={};return i.proj="kolmit",i.func="call",i.type=this.rtc.type,i.uid=this.rtc.uid,i.em=this.rtc.em,i.cand=r,i.status="call",i.abonent=t.rtc.abonent,i.oper_uid=this.rtc.oper_uid,await this.signal.SendMessage(i)}async SendOffer(r){let t={};return t.proj="kolmit",t.func="offer",t.abonent=this.rtc.abonent,t.type=this.rtc.type,t.uid=this.rtc.uid,t.em=this.rtc.em,t.desc=this.params.loc_desc,t.cand=this.params.loc_cand,t.status="offer",await this.signal.SendMessage(t)}StartEvents(){let r=this;this.con.ontrack=function(i){r.pc_key!=="reserve"&&(r.rtc.GetRemoteAudio()!==i.streams[0]&&(r.rtc.remoteStream=i.streams[0],r.rtc.remoteStream.onaddtrack=function(o){console.log("addtrack in remote stream",r)}),r.rtc.remoteStream&&(i.track.kind==="audio"&&(r.rtc.SetRemoteAudio(null),r.rtc.SetRemoteAudio(r.rtc.remoteStream)),i.track.kind==="video"&&(r.rtc.SetRemoteVideo(r.rtc.remoteStream),r.rtc.DC.SendDCVideoOK(()=>{}))))};let t;this.con.onicecandidate=i=>{let o=this;i.candidate&&(this.params.loc_cand||(this.params.loc_cand=[]),this.params.loc_cand.push(i.candidate),t||(t=setTimeout(()=>{if(this.rtc.DC&&this.rtc.DC.dc.readyState==="open"){let a="";this.rtc.type&&this.rtc.type.offerToReceiveVideo===1&&(a={confirm:"Do you mind to turn on the cameras?"}),this.rtc.DC.SendDCOffer(o.pc_key,a),clearTimeout(t)}else this.rtc.DC&&this.rtc.DC.dc.readyState!=="open"&&(this.SendOffer(i.candidate),clearTimeout(t))},100)))},this.con.oniceconnectionstatechange=function(i){r.rtc.onIceStateChange(r,i)},this.con.onremovestream=function(i){},this.con.onsignalingstatechange=function(i){},this.con.onconnectionstatechange=function(i){console.log()}}onCreateAnswerSuccess(r){let t=this;console.log("Answer from pcPull 2:",this),console.log("setLocalDescription start",t),t.con.setLocalDescription(r).then(function(){t.params.loc_desc=t.con.localDescription,console.log("onSetLocalDescriptionSuccess",t),t.SendDesc(r)},t.onSetAnswerError)}setRemoteDesc(r){let t=this;console.log("setRemoteDescription start",t),console.log("Peer connectionState:"+this.con.connectionState,t),this.con.setRemoteDescription(r).then(function(){t.params.rem_desc=t.con.remoteDescription,t.con.remoteDescription.type==="offer"&&t.con.createAnswer().then(i=>t.onCreateAnswerSuccess(i),t.onCreateAnswerError)},function(i){console.log("Failed to set remote description: "+i.toString(),this)})}onCreateAnswerError(r){console.log("Failed to create answer: "+r.toString(),this)}onCreateOfferSuccess(r){let t=this;console.log("Offer created",t),console.log("setLocalDescription start",t),t.con.setLocalDescription(r).then(function(){t.params.loc_desc=t.con.localDescription,console.log(" setLocalDescription complete",t)},t.onSetOfferError)}onCreateVideoOfferSuccess(r,t){let i=this;console.log("Offer created",i),console.log("setLocalDescription start",i),i.con.setLocalDescription(r).then(function(){i.params.loc_desc=i.con.localDescription,console.log(" setLocalDescription complete",i),i.rtc.DC.SendDCDesc(r,i.pc_key)},i.onSetOfferError)}onSetOfferError(r){console.log("Failed to set offer: "+r.toString(),this)}onSetAnswerError(r){console.log("Failed to set session description: "+r.toString(),this)}onAddIceCandidateSuccess(r){console.log(" addIceCandidate success",this)}onAddIceCandidateError(r,t){console.log(" failed to add ICE Candidate: "+t.toString(),this)}onCreateOfferError(r){console.log("Failed to create session description: "+r.toString(),this)}onAddVideo(r){let t=this,i="Do you mind to turn on the cameras?";t.rtc.DC&&t.rtc.DC.dc.readyState==="open"&&t.rtc.DC.SendData({confirm:i})}onCreateSessionDescriptionError(r){}Cancel(){this.close()}}class Cg{constructor(r,t){this.rtc=r,this.pc=t,this.call_num=3,this.forward}CreateDC(){this.dc=pc.con.createDataChannel(pc.pc_key+" data channel")}}const zu=ro();class Sg extends Cg{constructor(r,t){super(r,t);let i=this;i.cnt_call=0,this.dc=t.con.createDataChannel(t.pc_key+" data channel"),this.dc.onopen=()=>{i.dc.readyState==="open"&&console.log(i.pc.pc_key+" datachannel open"),this.dc.onclose=()=>{}},t.StartEvents(),t.con.ondatachannel=f=>{console.log("Receive Channel Callback"),this.dc=f.channel};let o="",a=[],u=0;this.dc.onmessage=function(f){try{let c=JSON.parse(f.data);if(c.type==="eom"){o&&(i.rtc.OnMessage(JSON.parse(o),i),zu.set(JSON.parse(o))),o="";return}if(o+=c.slice,c.file,c.type==="eof"){const d=new Blob(a);if(a=[],u=0,confirm("Получен файл: "+c.file+". Размер: "+c.length+" Сохранить?")){let g=document.getElementById("download_href");g.text("Получен файл: "+c.file+". Размер: "+c.length+" Сохранить?"),g.attributes.href="URL.createObjectURL(received)",g.attributes.download=c.file,g.click()}setTimeout(function(){document.getElementById("dataProgress").style.display="none"},2e3);return}}catch{if(o="",!f.data.byteLength)return}}}SendFile(r,t){try{if(this.dc.readyState==="open"){let i=16384;const o=Math.ceil(r.byteLength/i);this.dc.send(JSON.stringify({file:t,length:r.byteLength}),function(a){console.log(a)});for(let a=0,u=0;a<o;++a,u+=i){const f=r.slice(u,u+i);document.getElementById("dataProgress").attributes.value=u+i,this.dc.send(f,function(c){console.log(c)})}setTimeout(function(){document.getElementById("dataProgress").style.display="none"},2e3),this.dc.send(JSON.stringify({type:"eof",file:t,length:r.byteLength}),function(a){console.log(a)})}}catch(i){console.log(i)}}SendData(r,t){try{if(this.dc.readyState==="open"){r=JSON.stringify(r);let i=16384;const o=Math.ceil(r.length/i);for(let a=0,u=0;a<o;++a,u+=i)this.dc.send(JSON.stringify({slice:r.substr(u,i)}));this.dc.send(JSON.stringify({type:"eom"}))}t&&t()}catch(i){console.log(i)}}SendDCHangup(r){let t={};t.proj="kolmit",t.func="mute",t.type=this.rtc.type,this.SendData(t,r)}SendDCClose(r){let t={};t.proj="kolmit",t.func="close",t.type=this.rtc.type,this.SendData(t,r)}SendDCTalk(r){let t={};t.proj="kolmit",t.func="talk",t.type=this.rtc.type,this.SendData(t,r)}SendDCCand(r,t,i){let o={};o.proj="kolmit",o.func="offer",o.cand=r,o.trans=t,o.abonent=this.rtc.abonent,o.msg=i,this.SendData(o)}SendDCDesc(r,t,i){let o={};o.proj="kolmit",o.func="offer",o.desc=r,o.trans=t,o.abonent=this.rtc.abonent,o.msg=i,this.SendData(o)}SendDCOffer(r,t){let i={};i.proj="kolmit",i.func="offer",i.desc=this.pc.params.loc_desc,i.cand=this.pc.params.loc_cand,i.trans=r,i.abonent=this.rtc.abonent,i.msg=t,this.SendData(i)}SendDCVideoOK(r){let t={};t.proj="kolmit",t.func="video",t.type=this.rtc.type,this.SendData(t,r)}SendRedirect(r,t){let i={};if(i.proj="kolmit",i.func="redirect",i.abonent=r,this.dc.readyState==="open"){this.SendData(i);let o=new Date().toLocaleString("es-CL");t(o)}}}class kg{constructor(r,t,i){this.signal=i,this.type=r.type,this.abonent=r.abonent,this.em=r.em,this.role=r.role,this.uid=t,this.status,this.pcPull={},this.main_pc,this.url,this.localStream,this.remoteStream,this.startTime,this.phone=""}async SendCheck(){let r={};r.proj="kolmit",r.func="check",r.status="check",r.type=this.type,r.abonent=this.abonent,r.em=this.em,r.uid=this.uid,this.signal.SendMessage(r,t=>{this.status="check"})}SendVideoOffer(r){this.pcPull[r].params.loc_desc="",this.pcPull[r].params.loc_cand="",this.pcPull[r].con.createOffer(this.mode={offerToReceiveAudio:1,offerToReceiveVideo:1,iceRestart:1}).then(t=>this.pcPull[r].onCreateVideoOfferSuccess(t),this.pcPull[r].onCreateOfferError)}onIceStateChange(r,t){r&&r.con&&(r.con.iceConnectionState==="new"&&console.log(r.pc_key+" ICE state change event: new",this),r.con.iceConnectionState==="checking"&&(console.log(r.pc_key+" ICE state change event: checking",this),this.checking_tmr=setTimeout(()=>{r.con.restartIce()},5e3)),r.con.iceConnectionState==="disconnected"&&(console.log(r.pc_key+" ICE state change event: disconnected",this),r.con.restartIce()),r.con.iceConnectionState==="connected"&&(clearTimeout(this.checking_tmr),console.log(r.pc_key+" ICE state change event: connected",this),this.main_pc=r.pc_key),r.con.iceConnectionState==="failed"&&(console.log(r.pc_key+" ICE state change event: failed",this),r.con.restartIce()),r.con.iceConnectionState==="completed"&&console.log(r.pc_key+" ICE state change event: completed",this),console.log(r.pc_key+" ICE state change event: "+t.type,this))}TransFile(){async function r(){const t=this.fileInput.files[0];if(t||console.log("No file chosen"),t.size===0)return;dataProgress.style.display="block",dataProgress.attributes.max=t.size;let i=new FileReader;i.onload=o=>{console.log("FileRead.onload ",o),this.DC.SendFile(o.target.result,t.name)},i.readAsArrayBuffer(t)}this.fileInput.removeEventListener("change",this.fileInput.onchange),this.fileInput.onchange=r,this.fileInput.dispatchEvent(new Event("click"))}GetUserMedia(r,t){navigator.mediaDevices.getUserMedia(r).then(i=>this.gotStream(i,t)).catch(function(i){(i.name==="NotFoundError"||i.name==="NotReadableError")&&(r.audio&&alert("Something wrong with mic?"),r.video&&alert("Something wrong with camera?"),t(!1))})}get RemoteStream(){return this.remoteStream}async InitRTC(r,t){this.conf=Lu;let i={iceTransportPolicy:"all",lifetimeDuration:this.conf.lifetimeDuration,rtcpMuxPolicy:"require",bundlePolicy:"balanced",iceServers:[this.conf.stun,this.conf.turn]};this.pcPull[r]&&(this.DC&&this.DC.dc&&(this.DC.dc.close(),this.DC=null),this.pcPull[r].con&&(this.pcPull[r].con.close(),this.pcPull[r].con=null));let o={};this.pcPull[r]=null,this.pcPull[r]=new wg(this,i,r),this.pcPull[r].signal=this.signal,this.pcPull[r].params=o,this.DC=new Sg(this,this.pcPull[r]),this.startTime=Date.now(),t()}gotStream(r,t){this.localStream||(this.localStream=r),this.getTracks(r,t)}getTracks(r,t){r.getTracks().forEach(a=>{for(let u in this.pcPull)u!=="reserve"&&(this.pcPull[u].con.iceConnectionState==="disconnected"||this.pcPull[u].con.iceConnectionState==="closed"||(this.localStream.addTrack(a),this.pcPull[u].sender=this.pcPull[u].con.addTrack(a,this.localStream),a.kind==="video"?this.SetLocalVideo(this.localStream):a.kind))});var i=this.localStream.getVideoTracks(),o=this.localStream.getAudioTracks();i.length>0&&console.log("Using video device: "+i[0].label,this),o.length>0&&console.log("Using audio device: "+o[0].label,this),t(!0)}RemoveTracks(){this.localStream&&(this.localStream.getVideoTracks().forEach(i=>{i.readyState=="live"&&i.kind==="video"&&i.stop(),this.localStream.removeTrack(i)}),this.localStream.getAudioTracks().forEach(i=>{i.readyState=="live"&&i.kind==="audio"&&i.stop(),this.localStream.removeTrack(i)}))}}class Eg extends kg{constructor(r,t,i){super(r,t,i),this.checking_tmr,Nr.subscribe(o=>{try{o&&this.OnMessage(o)}catch(a){console.log(a)}})}Init(r){let t=this;this.mode="";let i=[t.abonent];t.main_pc="";for(let o in i)t.InitRTC(i[o],function(){r()})}SendOffer(r){let t=this;t.pcPull[r].params.loc_desc="",t.pcPull[r].params.loc_cand="",t.pcPull[r].con.createOffer(this.mode={offerToReceiveAudio:1,offerToReceiveVideo:1,iceRestart:1}).then(i=>t.pcPull[r].onCreateOfferSuccess(i),t.pcPull[r].onCreateOfferError)}ChooseTarif(r){let t={};return t.proj="kolmit",t.func="tarif",t.em=this.em,t.tarif=r,t.psw=this.psw,new Promise((i,o)=>{this.signal.SendMessage(t,a=>{i(a)})})}SendStatus(r){let t={};return t.proj="kolmit",t.func="status",t.type=this.type,t.abonent=this.abonent,t.uid=this.uid,t.em=this.em,t.status=r,this.status=r,new Promise((i,o)=>{this.signal.SendMessage(t,a=>{i(a)})})}SendVideoOffer(r){let t=this;t.pcPull[r].params.loc_desc="",t.pcPull[r].params.loc_cand="",t.pcPull[r].con.createOffer(t.mode={offerToReceiveAudio:1,offerToReceiveVideo:1,iceRestart:1}).then(i=>t.pcPull[r].onCreateVideoOfferSuccess(i),t.pcPull[r].onCreateOfferError)}async Offer(){this.Init(async()=>{this.pcPull[this.abonent].con.signalingState!=="closed"&&this.GetUserMedia({audio:1,video:0},()=>{this.SendOffer(this.abonent)})})}OnActive(){this.Init(()=>{this.pcPull[this.abonent].con.signalingState!=="closed"&&this.GetUserMedia({audio:1,video:0},r=>{r&&this.SendOffer(this.abonent)})})}OnCall(){this.DC&&clearInterval(this.DC.inter),this.SendStatus("call")}OnTalk(){this.DC.dc&&this.DC.SendDCTalk(),this.SendStatus("talk"),console.log()}OnMute(){this.RemoveTracks(),this.DC&&this.DC.SendDCHangup(()=>{})}OnInactive(){this.RemoveTracks(),(this.DC.dc.readyState==="open"||this.DC.dc.readyState==="connecting")&&this.DC.SendDCHangup(()=>{this.DC.dc.close(),this.SendStatus("close")})}OnMessage(r){let t=this;if(r.func,r.func==="mute"&&this.RemoveTracks(),r.func==="talk"&&clearInterval(t.DC.inter),r.func,r.func,r.desc&&t.pcPull[r.abonent]&&(t.pcPull[r.abonent].con&&(t.pcPull[r.abonent].con.connectionState==="failed"||t.pcPull[r.abonent].con.connectionState==="disconnected")&&t.pcPull[r.abonent].con.restartIce(),t.pcPull[r.abonent]&&(t.pcPull[r.abonent].params.rem_desc=r.desc,t.pcPull[r.abonent].setRemoteDesc(r.desc),t.PlayCallCnt())),r.cand&&t.pcPull[r.abonent]&&t.pcPull[r.abonent]){if(!t.pcPull[r.abonent].con||t.pcPull[r.abonent].con.signalingState==="closed")return;try{if(t.pcPull[r.abonent].params.rem_cand=r.cand,Array.isArray(r.cand))for(let i in r.cand)t.pcPull[r.abonent].con.addIceCandidate(r.cand[i]);else t.pcPull[r.abonent].con.addIceCandidate(r.cand)}catch(i){log(i)}}}}function Og(s){let r,t,i,o,a,u,f,c;return{c(){r=U("div"),t=Pe("svg"),i=Pe("g"),o=Pe("title"),a=Ue("Layer 1"),u=Pe("path"),this.h()},l(d){r=N(d,"DIV",{class:!0,style:!0});var g=J(r);t=Le(g,"svg",{class:!0,status:!0,width:!0,height:!0,style:!0});var p=J(t);i=Le(p,"g",{class:!0,style:!0});var m=J(i);o=Le(m,"title",{});var v=J(o);a=Ne(v,"Layer 1"),v.forEach(S),u=Le(m,"path",{d:!0,id:!0,class:!0,transform:!0}),J(u).forEach(S),m.forEach(S),p.forEach(S),g.forEach(S),this.h()},h(){C(u,"d","M390.7 353.3c-120.30000000000001 69.5 63.19999999999999 413.59999999999997 194.90000000000003 337.59999999999997l122.10000000000002 211.39999999999998c-55.60000000000002 32.10000000000002-102.5 52.30000000000007-166.9000000000001 15.5-178.79999999999995-102.19999999999993-375.59999999999997-442.9-369.99999999999994-646.0999999999999 1.8999999999999773-70.60000000000005 43.599999999999994-98.30000000000004 97.89999999999998-129.70000000000005 23.30000000000001 40.400000000000006 98.60000000000002 170.8 122 211.3z m50.400000000000034-5.699999999999989c-13 7.5-29.700000000000045 3.099999999999966-37.30000000000001-10l-115-199.3c-7.5-13.000000000000014-3.1000000000000227-29.700000000000017 10-37.30000000000001l60.5-34.900000000000006c13-7.499999999999993 29.69999999999999-3.0999999999999943 37.30000000000001 10l115.09999999999997 199.29999999999998c7.500000000000057 13 3.099999999999966 29.700000000000045-10 37.200000000000045l-60.599999999999966 35z m314.4 544.5c-13 7.5-29.700000000000045 3.1000000000000227-37.299999999999955-10l-115-199.30000000000007c-7.5-13-3.1000000000000227-29.699999999999932 10-37.299999999999955l60.5-34.89999999999998c13-7.5 29.699999999999932-3.1000000000000227 37.299999999999955 10l115.10000000000002 199.29999999999995c7.5 13 3.1000000000000227 29.700000000000045-10 37.30000000000007l-60.60000000000002 34.89999999999998z"),C(u,"id","svg_1"),C(u,"class","selected"),C(u,"transform","scale(.04)"),C(i,"class","currentLayer svelte-jaz7he"),k(i,"stroke","lightgrey"),k(i,"stroke-width","10px"),C(t,"class","callButton svelte-jaz7he"),C(t,"status",s[0]),C(t,"width","50"),C(t,"height","50"),k(t,"position","absolute"),k(t,"left","0px"),k(t,"top","5px"),k(t,"z-index","30"),C(r,"class","callObject"),k(r,"display","block")},m(d,g){W(d,r,g),L(r,t),L(t,i),L(i,o),L(o,a),L(i,u),f||(c=[ue(t,"click",s[2]),ue(r,"long-press",function(){Cr(s[1])&&s[1].apply(this,arguments)})],f=!0)},p(d,[g]){s=d,g&1&&C(t,"status",s[0])},i:we,o:we,d(d){d&&S(r),f=!1,Jt(c)}}}function Ig(s,r,t){let{status:i="inactive"}=r,{OnLongPress:o}=r;function a(u){$l.call(this,s,u)}return s.$$set=u=>{"status"in u&&t(0,i=u.status),"OnLongPress"in u&&t(1,o=u.OnLongPress)},[i,o,a]}class Tg extends xe{constructor(r){super(),He(this,r,Ig,Og,We,{status:0,OnLongPress:1})}}function Ag(s){let r,t,i,o,a,u,f;return{c(){r=U("button"),t=Pe("svg"),i=Pe("line"),o=Pe("line"),a=Pe("line"),this.h()},l(c){r=N(c,"BUTTON",{style:!0,class:!0});var d=J(r);t=Le(d,"svg",{width:!0,height:!0,class:!0});var g=J(t);i=Le(g,"line",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,style:!0,class:!0}),J(i).forEach(S),o=Le(g,"line",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,style:!0,class:!0}),J(o).forEach(S),a=Le(g,"line",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0,style:!0,class:!0}),J(a).forEach(S),g.forEach(S),d.forEach(S),this.h()},h(){C(i,"id","top"),C(i,"x1","0"),C(i,"y1","8"),C(i,"x2","26"),C(i,"y2","8"),k(i,"transition","transform "+s[1]+"s ease-in-out, opacity "+s[1]+"s ease-in-out"),C(i,"class","svelte-15vte99"),C(o,"id","mid"),C(o,"x1","0"),C(o,"y1","16"),C(o,"x2","26"),C(o,"y2","16"),k(o,"transition","transform "+s[1]+"s ease-in-out, opacity "+s[1]+"s ease-in-out"),C(o,"class","svelte-15vte99"),C(a,"id","bot"),C(a,"x1","0"),C(a,"y1","24"),C(a,"x2","26"),C(a,"y2","24"),k(a,"transition","transform "+s[1]+"s ease-in-out, opacity "+s[1]+"s ease-in-out"),C(a,"class","svelte-15vte99"),C(t,"width","26"),C(t,"height","26"),C(t,"class","svelte-15vte99"),k(r,"position","fixed"),k(r,"transition","color "+s[1]+"s ease-in-out"),k(r,"color",s[0]?s[3]:s[2]),C(r,"class","svelte-15vte99"),z0(r,"open",s[0])},m(c,d){W(c,r,d),L(r,t),L(t,i),L(t,o),L(t,a),u||(f=ue(r,"click",s[4]),u=!0)},p(c,[d]){d&2&&k(i,"transition","transform "+c[1]+"s ease-in-out, opacity "+c[1]+"s ease-in-out"),d&2&&k(o,"transition","transform "+c[1]+"s ease-in-out, opacity "+c[1]+"s ease-in-out"),d&2&&k(a,"transition","transform "+c[1]+"s ease-in-out, opacity "+c[1]+"s ease-in-out"),d&2&&k(r,"transition","color "+c[1]+"s ease-in-out"),d&13&&k(r,"color",c[0]?c[3]:c[2]),d&1&&z0(r,"open",c[0])},i:we,o:we,d(c){c&&S(r),u=!1,f()}}}function Dg(s,r,t){let{open:i}=r,{duration:o}=r,{burgerColor:a}=r,{menuColor:u}=r;const f=()=>t(0,i=!i);return s.$$set=c=>{"open"in c&&t(0,i=c.open),"duration"in c&&t(1,o=c.duration),"burgerColor"in c&&t(2,a=c.burgerColor),"menuColor"in c&&t(3,u=c.menuColor)},[i,o,a,u,f]}class Rg extends xe{constructor(r){super(),He(this,r,Dg,Ag,We,{open:0,duration:1,burgerColor:2,menuColor:3})}}function Pg(s){let r,t,i;const o=s[8].default,a=Jn(o,s,s[7],null);return{c(){r=U("div"),t=U("div"),a&&a.c(),this.h()},l(u){r=N(u,"DIV",{id:!0,style:!0,class:!0});var f=J(r);t=N(f,"DIV",{id:!0,style:!0,class:!0});var c=J(t);a&&a.l(c),c.forEach(S),f.forEach(S),this.h()},h(){C(t,"id","menu"),k(t,"padding",s[3]),k(t,"padding-top",s[4]),C(t,"class","svelte-42ebs2"),C(r,"id","container"),k(r,"position","fixed"),k(r,"z-index","1"),k(r,"background-color",s[5]),k(r,"color",s[6]),k(r,"width",s[2]),k(r,"right",s[0]?"0px":"-"+(parseInt(s[2])+10)+"px"),k(r,"transition","right "+s[1]+"s ease-in-out"),C(r,"class","svelte-42ebs2")},m(u,f){W(u,r,f),L(r,t),a&&a.m(t,null),i=!0},p(u,[f]){a&&a.p&&(!i||f&128)&&Kn(a,o,u,u[7],i?Zn(o,u[7],f,null):Yn(u[7]),null),(!i||f&8)&&k(t,"padding",u[3]),(!i||f&16)&&k(t,"padding-top",u[4]),(!i||f&32)&&k(r,"background-color",u[5]),(!i||f&64)&&k(r,"color",u[6]),(!i||f&4)&&k(r,"width",u[2]),(!i||f&5)&&k(r,"right",u[0]?"0px":"-"+(parseInt(u[2])+10)+"px"),(!i||f&2)&&k(r,"transition","right "+u[1]+"s ease-in-out")},i(u){i||(le(a,u),i=!0)},o(u){ae(a,u),i=!1},d(u){u&&S(r),a&&a.d(u)}}}function Lg(s,r,t){let{$$slots:i={},$$scope:o}=r,{open:a}=r,{duration:u}=r,{width:f}=r,{padding:c}=r,{paddingTop:d}=r,{backgroundColor:g}=r,{menuColor:p}=r;return s.$$set=m=>{"open"in m&&t(0,a=m.open),"duration"in m&&t(1,u=m.duration),"width"in m&&t(2,f=m.width),"padding"in m&&t(3,c=m.padding),"paddingTop"in m&&t(4,d=m.paddingTop),"backgroundColor"in m&&t(5,g=m.backgroundColor),"menuColor"in m&&t(6,p=m.menuColor),"$$scope"in m&&t(7,o=m.$$scope)},[a,u,f,c,d,g,p,o,i]}class Mg extends xe{constructor(r){super(),He(this,r,Lg,Pg,We,{open:0,duration:1,width:2,padding:3,paddingTop:4,backgroundColor:5,menuColor:6})}}function Bg(s){let r;const t=s[10].default,i=Jn(t,s,s[13],null);return{c(){i&&i.c()},l(o){i&&i.l(o)},m(o,a){i&&i.m(o,a),r=!0},p(o,a){i&&i.p&&(!r||a&8192)&&Kn(i,t,o,o[13],r?Zn(t,o[13],a,null):Yn(o[13]),null)},i(o){r||(le(i,o),r=!0)},o(o){ae(i,o),r=!1},d(o){i&&i.d(o)}}}function Fg(s){let r,t,i,o,a,u;const f=[s[1]];function c(v){s[11](v)}let d={};for(let v=0;v<f.length;v+=1)d=mr(d,f[v]);s[0]!==void 0&&(d.open=s[0]),r=new Rg({props:d}),Oe.push(()=>at(r,"open",c));const g=[s[2]];function p(v){s[12](v)}let m={$$slots:{default:[Bg]},$$scope:{ctx:s}};for(let v=0;v<g.length;v+=1)m=mr(m,g[v]);return s[0]!==void 0&&(m.open=s[0]),o=new Mg({props:m}),Oe.push(()=>at(o,"open",p)),{c(){qe(r.$$.fragment),i=ne(),qe(o.$$.fragment)},l(v){Ge(r.$$.fragment,v),i=re(v),Ge(o.$$.fragment,v)},m(v,P){je(r,v,P),W(v,i,P),je(o,v,P),u=!0},p(v,[P]){const O=P&2?vr(f,[br(v[1])]):{};!t&&P&1&&(t=!0,O.open=v[0],ut(()=>t=!1)),r.$set(O);const I=P&4?vr(g,[br(v[2])]):{};P&8192&&(I.$$scope={dirty:P,ctx:v}),!a&&P&1&&(a=!0,I.open=v[0],ut(()=>a=!1)),o.$set(I)},i(v){u||(le(r.$$.fragment,v),le(o.$$.fragment,v),u=!0)},o(v){ae(r.$$.fragment,v),ae(o.$$.fragment,v),u=!1},d(v){v&&S(i),Je(r,v),Je(o,v)}}}function zg(s,r,t){let{$$slots:i={},$$scope:o}=r,{open:a=!1}=r,{duration:u=.4}=r,{width:f="250px"}=r,{padding:c="20px"}=r,{paddingTop:d="50px"}=r,{backgroundColor:g="rgb(250, 250, 250)"}=r,{burgerColor:p="rgb(18.4, 18.4, 18.4)"}=r,{menuColor:m="rgb(180, 180, 180)"}=r,v={duration:u,burgerColor:p,menuColor:m},P={duration:u,width:f,padding:c,paddingTop:d,backgroundColor:g,menuColor:m};function O(A){a=A,t(0,a)}function I(A){a=A,t(0,a)}return s.$$set=A=>{"open"in A&&t(0,a=A.open),"duration"in A&&t(3,u=A.duration),"width"in A&&t(4,f=A.width),"padding"in A&&t(5,c=A.padding),"paddingTop"in A&&t(6,d=A.paddingTop),"backgroundColor"in A&&t(7,g=A.backgroundColor),"burgerColor"in A&&t(8,p=A.burgerColor),"menuColor"in A&&t(9,m=A.menuColor),"$$scope"in A&&t(13,o=A.$$scope)},[a,v,P,u,f,c,d,g,p,m,i,O,I,o]}class Ug extends xe{constructor(r){super(),He(this,r,zg,Fg,We,{open:0,duration:3,width:4,padding:5,paddingTop:6,backgroundColor:7,burgerColor:8,menuColor:9})}}function Ng(s){let r,t,i,o;const a=s[6].default,u=Jn(a,s,s[5],null);return{c(){r=U("video"),t=U("track"),i=ne(),u&&u.c(),this.h()},l(f){r=N(f,"VIDEO",{poster:!0,style:!0});var c=J(r);t=N(c,"TRACK",{kind:!0}),c.forEach(S),i=re(f),u&&u.l(f),this.h()},h(){C(t,"kind","captions"),r.autoplay=!0,r.playsInline=!0,C(r,"poster",s[1]),k(r,"display",s[0]),k(r,"position","absolute"),k(r,"height","105px"),k(r,"background-color","white"),k(r,"max-width","12%"),k(r,"z-index","10")},m(f,c){W(f,r,c),L(r,t),s[7](r),W(f,i,c),u&&u.m(f,c),o=!0},p(f,[c]){(!o||c&2)&&C(r,"poster",f[1]),(!o||c&1)&&k(r,"display",f[0]),u&&u.p&&(!o||c&32)&&Kn(u,a,f,f[5],o?Zn(a,f[5],c,null):Yn(f[5]),null)},i(f){o||(le(u,f),o=!0)},o(f){ae(u,f),o=!1},d(f){f&&(S(r),S(i)),s[7](null),u&&u.d(f)}}}function Wg(s,r,t){let{$$slots:i={},$$scope:o}=r,{display:a="none"}=r,{poster:u}=r,{srcObject:f}=r,c,d;Ft(async()=>{t(4,c=d)});function g(p){Oe[p?"unshift":"push"](()=>{d=p,t(2,d)})}return s.$$set=p=>{"display"in p&&t(0,a=p.display),"poster"in p&&t(1,u=p.poster),"srcObject"in p&&t(3,f=p.srcObject),"$$scope"in p&&t(5,o=p.$$scope)},s.$$.update=()=>{s.$$.dirty&24&&(c&&f?t(4,c.srcObject=f,c):c&&c.srcObject&&(c.srcObject.getVideoTracks().forEach(p=>{p.stop(),c.srcObject.removeTrack(p)}),t(4,c.src="",c)))},[a,u,d,f,c,o,i,g]}class xg extends xe{constructor(r){super(),He(this,r,Wg,Ng,We,{display:0,poster:1,srcObject:3})}}function Hg(s){let r,t="",i,o,a='<input type="file" id="fileInput" name="files"/>',u,f;return{c(){r=U("a"),r.innerHTML=t,i=ne(),o=U("form"),o.innerHTML=a,u=ne(),f=U("i"),this.h()},l(c){r=N(c,"A",{id:!0,style:!0,"data-svelte-h":!0}),nn(r)!=="svelte-1ulz4fx"&&(r.innerHTML=t),i=re(c),o=N(c,"FORM",{id:!0,style:!0,"data-svelte-h":!0}),nn(o)!=="svelte-tjvju7"&&(o.innerHTML=a),u=re(c),f=N(c,"I",{class:!0,style:!0}),J(f).forEach(S),this.h()},h(){C(r,"id","download_href"),k(r,"display","none"),C(o,"id","fileInfo"),k(o,"display","none"),C(f,"class","fa fa-spinner fa-spin"),k(f,"position","absolute"),k(f,"top","50%"),k(f,"left","50%"),k(f,"font-size","44px")},m(c,d){W(c,r,d),W(c,i,d),W(c,o,d),W(c,u,d),W(c,f,d)},p:we,i:we,o:we,d(c){c&&(S(r),S(i),S(o),S(u),S(f))}}}class Vg extends xe{constructor(r){super(),He(this,r,null,Hg,We,{})}}function qg(s){let r,t='<track kind="captions"/>',i;return{c(){r=U("audio"),r.innerHTML=t,this.h()},l(o){r=N(o,"AUDIO",{id:!0,src:!0,"data-svelte-h":!0}),nn(r)!=="svelte-qhtjm0"&&(r.innerHTML=t),this.h()},h(){C(r,"id","localSound"),wt(r.src,i="../src/routes/assets/mp3/ring.mp3")||C(r,"src",i)},m(o,a){W(o,r,a)},p:we,i:we,o:we,d(o){o&&S(r)}}}function Gg(s,r,t){let{paused:i=!0}=r,o;return Ft(async()=>{t(1,o=document.getElementById("localSound"))}),s.$$set=a=>{"paused"in a&&t(0,i=a.paused)},s.$$.update=()=>{s.$$.dirty&3&&o&&(i?o.pause():o.play())},[i,o]}class jg extends xe{constructor(r){super(),He(this,r,Gg,qg,We,{paused:0})}}function Jg(s){let r,t;return{c(){r=U("audio"),t=U("track"),this.h()},l(i){r=N(i,"AUDIO",{id:!0});var o=J(r);t=N(o,"TRACK",{kind:!0}),o.forEach(S),this.h()},h(){C(t,"kind","captions"),C(r,"id","remoteAudio"),r.autoplay=!0,r.muted=s[0]},m(i,o){W(i,r,o),L(r,t)},p(i,[o]){o&1&&(r.muted=i[0])},i:we,o:we,d(i){i&&S(r)}}}function Kg(s,r,t){let{muted:i=!1}=r,{srcObject:o}=r,a;return Ft(async()=>{t(2,a=document.getElementById("remoteAudio"))}),s.$$set=u=>{"muted"in u&&t(0,i=u.muted),"srcObject"in u&&t(1,o=u.srcObject)},s.$$.update=()=>{s.$$.dirty&6&&a&&o&&t(2,a.srcObject=o,a)},[i,o,a]}class Yg extends xe{constructor(r){super(),He(this,r,Kg,Jg,We,{muted:0,srcObject:1})}}function Zg(s){let r;return{c(){r=U("video"),this.h()},l(t){r=N(t,"VIDEO",{class:!0,style:!0}),J(r).forEach(S),this.h()},h(){C(r,"class","recordedVideo"),r.autoplay=!0,r.muted=!0,k(r,"display",s[0])},m(t,i){W(t,r,i)},p(t,[i]){i&1&&k(r,"display",t[0])},i:we,o:we,d(t){t&&S(r)}}}function Xg(s,r,t){let{display:i="none"}=r;return s.$$set=o=>{"display"in o&&t(0,i=o.display)},[i]}class Qg extends xe{constructor(r){super(),He(this,r,Xg,Zg,We,{display:0})}}function $g(s){let r,t=s[0][0].s+"",i;return{c(){r=U("div"),i=Ue(t)},l(o){r=N(o,"DIV",{});var a=J(r);i=Ne(a,t),a.forEach(S)},m(o,a){W(o,r,a),L(r,i)},p(o,[a]){a&1&&t!==(t=o[0][0].s+"")&&It(i,t)},i:we,o:we,d(o){o&&S(r)}}}function e_(s,r,t){let{data:i}=r;return s.$$set=o=>{"data"in o&&t(0,i=o.data)},[i]}class t_ extends xe{constructor(r){super(),He(this,r,e_,$g,We,{data:0})}}function uu(s,r,t){const i=s.slice();return i[1]=r[t],i[3]=t,i}function au(s){let r,t=s[1].name+"",i;return{c(){r=U("div"),i=Ue(t)},l(o){r=N(o,"DIV",{});var a=J(r);i=Ne(a,t),a.forEach(S)},m(o,a){W(o,r,a),L(r,i)},p(o,a){a&1&&t!==(t=o[1].name+"")&&It(i,t)},d(o){o&&S(r)}}}function n_(s){let r,t,i,o=_t(s[0][0].staff),a=[];for(let u=0;u<o.length;u+=1)a[u]=au(uu(s,o,u));return{c(){r=U("div"),t=ne();for(let u=0;u<a.length;u+=1)a[u].c();i=Re()},l(u){r=N(u,"DIV",{}),J(r).forEach(S),t=re(u);for(let f=0;f<a.length;f+=1)a[f].l(u);i=Re()},m(u,f){W(u,r,f),W(u,t,f);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(u,f);W(u,i,f)},p(u,[f]){if(f&1){o=_t(u[0][0].staff);let c;for(c=0;c<o.length;c+=1){const d=uu(u,o,c);a[c]?a[c].p(d,f):(a[c]=au(d),a[c].c(),a[c].m(i.parentNode,i))}for(;c<a.length;c+=1)a[c].d(1);a.length=o.length}},i:we,o:we,d(u){u&&(S(r),S(t),S(i)),Xn(a,u)}}}function r_(s,r,t){let i;return Be(s,Mi,o=>t(0,i=o)),console.log(i[0].staff),[i]}class i_ extends xe{constructor(r){super(),He(this,r,r_,n_,We,{})}}var Uu={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cze:"cs",dan:"da",div:"dv",dut:"nl",dzo:"dz",eng:"en",epo:"eo",est:"et",ewe:"ee",fao:"fo",fij:"fj",fin:"fi",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mlg:"mg",mlt:"mt",mon:"mn",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zul:"zu"},l_={afar:"aa",abkhazian:"ab",afrikaans:"af",akan:"ak",albanian:"sq",amharic:"am",arabic:"ar",aragonese:"an",armenian:"hy",assamese:"as",avaric:"av",avestan:"ae",aymara:"ay",azerbaijani:"az",bashkir:"ba",bambara:"bm",basque:"eu",belarusian:"be",bengali:"bn","bihari languages":"bh",bislama:"bi",tibetan:"bo",bosnian:"bs",breton:"br",bulgarian:"bg",burmese:"my",catalan:"ca",valencian:"ca",czech:"cs",chamorro:"ch",chechen:"ce",chinese:"zh","church slavic":"cu","old slavonic":"cu","church slavonic":"cu","old bulgarian":"cu","old church slavonic":"cu",chuvash:"cv",cornish:"kw",corsican:"co",cree:"cr",welsh:"cy",danish:"da",german:"de",divehi:"dv",dhivehi:"dv",maldivian:"dv",dutch:"nl",flemish:"nl",dzongkha:"dz",greek:"el",english:"en",esperanto:"eo",estonian:"et",ewe:"ee",faroese:"fo",persian:"fa",fijian:"fj",finnish:"fi",french:"fr","western frisian":"fy",fulah:"ff",georgian:"ka",gaelic:"gd","scottish gaelic":"gd",irish:"ga",galician:"gl",manx:"gv",guarani:"gn",gujarati:"gu",haitian:"ht","haitian creole":"ht",hausa:"ha",hebrew:"he",herero:"hz",hindi:"hi","hiri motu":"ho",croatian:"hr",hungarian:"hu",igbo:"ig",icelandic:"is",ido:"io","sichuan yi":"ii",nuosu:"ii",inuktitut:"iu",interlingue:"ie",occidental:"ie",interlingua:"ia",indonesian:"id",inupiaq:"ik",italian:"it",javanese:"jv",japanese:"ja",kalaallisut:"kl",greenlandic:"kl",kannada:"kn",kashmiri:"ks",kanuri:"kr",kazakh:"kk","central khmer":"km",kikuyu:"ki",gikuyu:"ki",kinyarwanda:"rw",kirghiz:"ky",kyrgyz:"ky",komi:"kv",kongo:"kg",korean:"ko",kuanyama:"kj",kwanyama:"kj",kurdish:"ku",lao:"lo",latin:"la",latvian:"lv",limburgan:"li",limburger:"li",limburgish:"li",lingala:"ln",lithuanian:"lt",luxembourgish:"lb",letzeburgesch:"lb","luba-katanga":"lu",ganda:"lg",macedonian:"mk",marshallese:"mh",malayalam:"ml",maori:"mi",marathi:"mr",malay:"ms",malagasy:"mg",maltese:"mt",mongolian:"mn",nauru:"na",navajo:"nv",navaho:"nv","ndebele, south":"nr","south ndebele":"nr","ndebele, north":"nd","north ndebele":"nd",ndonga:"ng",nepali:"ne","norwegian nynorsk":"nn","nynorsk, norwegian":"nn","norwegian bokmål":"nb","bokmål, norwegian":"nb",norwegian:"no",chichewa:"ny",chewa:"ny",nyanja:"ny",occitan:"oc",ojibwa:"oj",oriya:"or",oromo:"om",ossetian:"os",ossetic:"os",panjabi:"pa",punjabi:"pa",pali:"pi",polish:"pl",portuguese:"pt",pushto:"ps",pashto:"ps",quechua:"qu",romansh:"rm",romanian:"ro",moldavian:"ro",moldovan:"ro",rundi:"rn",russian:"ru",sango:"sg",sanskrit:"sa",sinhala:"si",sinhalese:"si",slovak:"sk",slovenian:"sl","northern sami":"se",samoan:"sm",shona:"sn",sindhi:"sd",somali:"so","sotho, southern":"st",spanish:"es",castilian:"es",sardinian:"sc",serbian:"sr",swati:"ss",sundanese:"su",swahili:"sw",swedish:"sv",tahitian:"ty",tamil:"ta",tatar:"tt",telugu:"te",tajik:"tg",tagalog:"tl",thai:"th",tigrinya:"ti",tonga:"to",tswana:"tn",tsonga:"ts",turkmen:"tk",turkish:"tr",twi:"tw",uighur:"ug",uyghur:"ug",ukrainian:"uk",urdu:"ur",uzbek:"uz",venda:"ve",vietnamese:"vi",volapük:"vo",walloon:"wa",wolof:"wo",xhosa:"xh",yiddish:"yi",yoruba:"yo",zhuang:"za",chuang:"za",zulu:"zu"};const o_=Object.values(Uu).sort();var Ql=s=>{if(typeof s!="string")throw new Error('The "language" must be a string, received '+typeof s);if(s.length>100)throw new Error(`The "language" is too long at ${s.length} characters`);if(s=s.toLowerCase(),s=l_[s]||Uu[s]||s,!o_.includes(s))throw new Error(`The language "${s}" is not part of the ISO 639-1`);return s};function Nu(){var s=Object.create(null);function r(t){delete s[t]}this.set=function(t,i,o){if(o!==void 0&&(typeof o!="number"||isNaN(o)||o<=0))throw new Error("Cache timeout must be a positive number");var a=s[t];a&&clearTimeout(a.timeout);var u={value:i,expire:o+Date.now()};return isNaN(u.expire)||(u.timeout=setTimeout(()=>r(t),o)),s[t]=u,i},this.del=function(t){var i=!0,o=s[t];return o?(clearTimeout(o.timeout),!isNaN(o.expire)&&o.expire<Date.now()&&(i=!1)):i=!1,i&&r(t),i},this.clear=function(){for(var t in s)clearTimeout(s[t].timeout);s=Object.create(null)},this.get=function(t){var i=s[t];if(i!==void 0){if(isNaN(i.expire)||i.expire>=Date.now())return i.value;delete s[t]}return null}}const no=new Nu;no.Cache=Nu;const s_="https://translate.googleapis.com/translate_a/single";var u_={fetch:({key:s,from:r,to:t,text:i})=>[`${s_}?client=gtx&sl=${r}&tl=${t}&dt=t&q=${encodeURI(i)}`],parse:s=>s.json().then(r=>{if(!(r=r&&r[0]&&r[0][0]&&r[0].map(t=>t[0]).join("")))throw new Error("Translation not found");return r})},a_={needkey:!0,fetch:({key:s,from:r,to:t,text:i})=>[`https://translate.yandex.net/api/v1.5/tr.json/translate?key=${s}&lang=${r}-${t}&text=${encodeURIComponent(i)}`,{method:"POST",body:""}],parse:s=>s.json().then(r=>{if(r.code!==200)throw new Error(r.message);return r.text[0]})};const f_="https://libretranslate.com/translate";var c_={needkey:!1,fetch:({url:s=f_,key:r,from:t,to:i,text:o})=>[s,{method:"POST",body:JSON.stringify({q:o,source:t,target:i,api_key:r}),headers:{"Content-Type":"application/json"}}],parse:s=>s.json().then(r=>{if(!r)throw new Error("No response found");if(r.error)throw new Error(r.error);if(!r.translatedText)throw new Error("No response found");return r.translatedText})},h_={needkey:!0,fetch:({key:s,from:r,to:t,text:i})=>[`https://api${/:fx$/.test(s)?"-free":""}.deepl.com/v2/translate?auth_key=${s}&source_lang=${r}&target_lang=${t}&text=${i=encodeURIComponent(i)}`,{method:"POST",body:""}],parse:async s=>{if(!s.ok)throw s.status===403?new Error("Auth Error, please review the key for DeepL"):new Error(`Error ${s.status}`);return s.json().then(r=>r.translations[0].text)}},d_={google:u_,yandex:a_,libre:c_,deepl:h_};const Pi=function(s={}){if(!(this instanceof Pi))return new Pi(s);const r={from:"en",to:"en",cache:void 0,languages:Ql,engines:d_,engine:"google",keys:{}},t=async(i,o={})=>{typeof o=="string"&&(o={to:o}),o.text=i,o.from=Ql(o.from||t.from),o.to=Ql(o.to||t.to),o.cache=o.cache||t.cache,o.engines=o.engines||{},o.engine=o.engine||t.engine,o.url=o.url||t.url,o.id=o.id||`${o.url}:${o.from}:${o.to}:${o.engine}:${o.text}`,o.keys=o.keys||t.keys||{};for(let c in t.keys)o.keys[c]=o.keys[c]||t.keys[c];o.key=o.key||t.key||o.keys[o.engine];const a=o.engines[o.engine]||t.engines[o.engine],u=no.get(o.id);if(u)return Promise.resolve(u);if(o.to===o.from)return Promise.resolve(o.text);if(a.needkey&&!o.key)throw new Error(`The engine "${o.engine}" needs a key, please provide it`);const f=a.fetch(o);return fetch(...f).then(a.parse).then(c=>no.set(o.id,c,o.cache))};for(let i in r)t[i]=s[i]===void 0?r[i]:s[i];return t},Ai=new Pi;Ai.Translate=Pi;function p_(s){let r,t,i,o,a,u,f;return{c(){r=U("span"),t=U("sup"),i=Ue(s[1]),o=ne(),a=Ue(s[0]),this.h()},l(c){r=N(c,"SPAN",{class:!0});var d=J(r);t=N(d,"SUP",{class:!0});var g=J(t);i=Ne(g,s[1]),g.forEach(S),o=re(d),a=Ne(d,s[0]),d.forEach(S),this.h()},h(){C(t,"class","trans svelte-1caqcag"),C(r,"class","a svelte-1caqcag")},m(c,d){W(c,r,d),L(r,t),L(t,i),L(r,o),L(r,a),u||(f=ue(r,"click",k1(E1(g_))),u=!0)},p(c,[d]){d&2&&It(i,c[1]),d&1&&It(a,c[0])},i:we,o:we,d(c){c&&S(r),u=!1,f()}}}async function g_(s){s.currentTarget.firstChild&&setTimeout(async r=>{r.style.visibility="hidden"},2e3,s.currentTarget.firstChild),s.currentTarget.firstChild.style.visibility="visible"}function __(s,r,t){let i;Be(s,Sn,c=>t(3,i=c));let{text:o,woorden:a}=r,u="trans";Ai.from="nl",Ai.engine="google";async function f(c){for(const d of Object.keys(a))if(c.toLowerCase().includes(`${d}`)&&a[d][i]){t(1,u=a[d][i]);return}t(1,u=await Ai(c.trim().toLowerCase(),i))}return Ft(()=>{}),s.$$set=c=>{"text"in c&&t(0,o=c.text),"woorden"in c&&t(2,a=c.woorden)},s.$$.update=()=>{s.$$.dirty&9&&i&&o&&f(o)},[o,u,a,i]}class m_ extends xe{constructor(r){super(),He(this,r,__,p_,We,{text:0,woorden:2})}}function fu(s,r,t){const i=s.slice();return i[0]=r[t],i[9]=t,i}function cu(s){let r=[],t=new Map,i,o,a=_t(s[1]);const u=f=>f[9];for(let f=0;f<a.length;f+=1){let c=fu(s,a,f),d=u(c);t.set(d,r[f]=hu(d,c))}return{c(){for(let f=0;f<r.length;f+=1)r[f].c();i=Re()},l(f){for(let c=0;c<r.length;c+=1)r[c].l(f);i=Re()},m(f,c){for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(f,c);W(f,i,c),o=!0},p(f,c){c&42&&(a=_t(f[1]),Gt(),r=Iu(r,c,u,1,f,a,t,i.parentNode,A1,hu,i,fu),jt())},i(f){if(!o){for(let c=0;c<a.length;c+=1)le(r[c]);o=!0}},o(f){for(let c=0;c<r.length;c+=1)ae(r[c]);o=!1},d(f){f&&S(i);for(let c=0;c<r.length;c+=1)r[c].d(f)}}}function v_(s){let r=s[0]+"",t;return{c(){t=Ue(r)},l(i){t=Ne(i,r)},m(i,o){W(i,t,o)},p(i,o){o&2&&r!==(r=i[0]+"")&&It(t,r)},i:we,o:we,d(i){i&&S(t)}}}function b_(s){let r,t;return r=new m_({props:{text:s[0],woorden:s[3]}}),{c(){qe(r.$$.fragment)},l(i){Ge(r.$$.fragment,i)},m(i,o){je(r,i,o),t=!0},p(i,o){const a={};o&2&&(a.text=i[0]),o&8&&(a.woorden=i[3]),r.$set(a)},i(i){t||(le(r.$$.fragment,i),t=!0)},o(i){ae(r.$$.fragment,i),t=!1},d(i){Je(r,i)}}}function hu(s,r){let t,i,o,a,u,f;const c=[b_,v_],d=[];function g(p,m){return m&2&&(i=null),i==null&&(i=!!p[5](p[0])),i?0:1}return o=g(r,-1),a=d[o]=c[o](r),{key:s,first:null,c(){t=Re(),a.c(),u=Re(),this.h()},l(p){t=Re(),a.l(p),u=Re(),this.h()},h(){this.first=t},m(p,m){W(p,t,m),d[o].m(p,m),W(p,u,m),f=!0},p(p,m){r=p;let v=o;o=g(r,m),o===v?d[o].p(r,m):(Gt(),ae(d[v],1,1,()=>{d[v]=null}),jt(),a=d[o],a?a.p(r,m):(a=d[o]=c[o](r),a.c()),le(a,1),a.m(u.parentNode,u))},i(p){f||(le(a),f=!0)},o(p){ae(a),f=!1},d(p){p&&(S(t),S(u)),d[o].d(p)}}}function y_(s){let r,t,i,o,a,u,f=s[2]&&cu(s);return{c(){r=U("div"),f&&f.c(),t=ne(),i=U("div"),o=ne(),a=U("div"),this.h()},l(c){r=N(c,"DIV",{});var d=J(r);f&&f.l(d),d.forEach(S),t=re(c),i=N(c,"DIV",{}),J(i).forEach(S),o=re(c),a=N(c,"DIV",{style:!0}),J(a).forEach(S),this.h()},h(){k(a,"height","10px")},m(c,d){W(c,r,d),f&&f.m(r,null),W(c,t,d),W(c,i,d),s[6](i),W(c,o,d),W(c,a,d),u=!0},p(c,[d]){c[2]?f?(f.p(c,d),d&4&&le(f,1)):(f=cu(c),f.c(),le(f,1),f.m(r,null)):f&&(Gt(),ae(f,1,1,()=>{f=null}),jt())},i(c){u||(le(f),u=!0)},o(c){ae(f),u=!1},d(c){c&&(S(r),S(t),S(i),S(o),S(a)),f&&f.d(),s[6](null)}}}function w_(s,r,t){let{text:i}=r,o,a,u,f;const c=Eu("abonent");fetch("/operator/lesson?dict=theme&level=12&theme=1&abonent="+c).then(p=>p.json()).then(p=>{t(3,u=JSON.parse(p.data))}).catch(p=>(console.log(p),[]));function d(p){for(let m in a)if(p.trim().toLowerCase().includes(a[m]))return!0;return!1}Ft(()=>{f.scrollIntoView()});function g(p){Oe[p?"unshift":"push"](()=>{f=p,t(4,f)})}return s.$$set=p=>{"text"in p&&t(0,i=p.text)},s.$$.update=()=>{if(s.$$.dirty&15&&u){t(2,a=Object.keys(u)),a.map(m=>{let v=m.trim().replaceAll(" ","&nbsp;");return t(0,i=i.replaceAll(m,v)),i});let p=i.replaceAll(" "," ю");t(1,o=p.split("ю")),t(1,o=o.map((m,v)=>m.replaceAll("&nbsp;"," ")))}},[i,o,a,u,f,d,g]}class C_ extends xe{constructor(r){super(),He(this,r,w_,y_,We,{text:0})}}function S_(s){let r,t,i=">>",o,a;return{c(){r=U("div"),t=U("button"),t.textContent=i,this.h()},l(u){r=N(u,"DIV",{class:!0});var f=J(r);t=N(f,"BUTTON",{color:!0,"data-svelte-h":!0}),nn(t)!=="svelte-1xguzdp"&&(t.textContent=i),f.forEach(S),this.h()},h(){C(t,"color","danger"),C(r,"class","flex_container svelte-1rlx1tl")},m(u,f){W(u,r,f),L(r,t),o||(a=ue(t,"click",function(){Cr(s[0])&&s[0].apply(this,arguments)}),o=!0)},p(u,[f]){s=u},i:we,o:we,d(u){u&&S(r),o=!1,a()}}}function k_(s,r,t){let{bottomOpen:i=!1}=r,{onContinueClick:o}=r;return s.$$set=a=>{"bottomOpen"in a&&t(1,i=a.bottomOpen),"onContinueClick"in a&&t(0,o=a.onContinueClick)},[o,i]}class E_ extends xe{constructor(r){super(),He(this,r,k_,S_,We,{bottomOpen:1,onContinueClick:0})}}function du(s,r,t){const i=s.slice();return i[4]=r[t],i[21]=t,i}function pu(s){let r,t,i,o,a,u;return t=new C_({props:{text:s[4]}}),{c(){r=U("div"),qe(t.$$.fragment),i=ne(),this.h()},l(f){r=N(f,"DIV",{class:!0,cnt:!0});var c=J(r);Ge(t.$$.fragment,c),i=re(c),c.forEach(S),this.h()},h(){C(r,"class","selected_sentence svelte-1l038g8"),C(r,"cnt",s[21])},m(f,c){W(f,r,c),je(t,r,null),L(r,i),s[10](r),o=!0,a||(u=ue(r,"click",s[7]),a=!0)},p(f,c){const d={};c&8&&(d.text=f[4]),t.$set(d)},i(f){o||(le(t.$$.fragment,f),o=!0)},o(f){ae(t.$$.fragment,f),o=!1},d(f){f&&S(r),Je(t),s[10](null),a=!1,u()}}}function O_(s){let r,t,i,o,a,u,f,c,d,g,p,m=_t(s[3]),v=[];for(let O=0;O<m.length;O+=1)v[O]=pu(du(s,m,O));const P=O=>ae(v[O],1,1,()=>{v[O]=null});return i=new E_({props:{bottomOpen:I_,onContinueClick:s[8]}}),{c(){r=U("div");for(let O=0;O<v.length;O+=1)v[O].c();t=ne(),qe(i.$$.fragment),o=ne(),a=U("audio"),f=ne(),c=U("div"),this.h()},l(O){r=N(O,"DIV",{});var I=J(r);for(let A=0;A<v.length;A+=1)v[A].l(I);I.forEach(S),t=re(O),Ge(i.$$.fragment,O),o=re(O),a=N(O,"AUDIO",{name:!0,src:!0}),J(a).forEach(S),f=re(O),c=N(O,"DIV",{style:!0}),J(c).forEach(S),this.h()},h(){a.autoplay=!0,C(a,"name","media"),wt(a.src,u=s[2])||C(a,"src",u),k(c,"height","200px")},m(O,I){W(O,r,I);for(let A=0;A<v.length;A+=1)v[A]&&v[A].m(r,null);W(O,t,I),je(i,O,I),W(O,o,I),W(O,a,I),s[11](a),W(O,f,I),W(O,c,I),d=!0,g||(p=[ue(a,"canplay",s[6]),ue(a,"ended",s[5])],g=!0)},p(O,[I]){if(I&138){m=_t(O[3]);let A;for(A=0;A<m.length;A+=1){const z=du(O,m,A);v[A]?(v[A].p(z,I),le(v[A],1)):(v[A]=pu(z),v[A].c(),le(v[A],1),v[A].m(r,null))}for(Gt(),A=m.length;A<v.length;A+=1)P(A);jt()}(!d||I&4&&!wt(a.src,u=O[2]))&&C(a,"src",u)},i(O){if(!d){for(let I=0;I<m.length;I+=1)le(v[I]);le(i.$$.fragment,O),d=!0}},o(O){v=v.filter(Boolean);for(let I=0;I<v.length;I+=1)ae(v[I]);ae(i.$$.fragment,O),d=!1},d(O){O&&(S(r),S(t),S(o),S(a),S(f),S(c)),Xn(v,O),Je(i,O),s[11](null),g=!1,Jt(p)}}}let I_=!0;function T_(s,r,t){let{data:i}=r,o,a,u={},f,c,d,g=0,p=[];const m=Eu("abonent");fetch(`/operator/lesson?text=theme&level=${i.level}&theme=${i.theme}&abonent=${m}`).then(M=>M.json()).then(M=>{t(4,d=M.obj.text),t(4,d=d.replaceAll(`\r
`,"")),t(4,d=d.replaceAll(".","..")),t(4,d=d.split(". ")),t(4,d=d.map(ee=>ee.trim())),v()}).catch(M=>(console.log(M),[]));function v(){d[g]&&(d[g]?fetch("/operator/lesson?key="+wr(d[g])).then(M=>M.text()).then(M=>{p.push(d[g]),t(3,p),v(g++);try{u[wr(d[g])]=JSON.parse(M).audio}catch{}}).catch(M=>(console.log(M),[])):v(g++))}function P(){t(1,a.style.fontWeight=100,a),!f&&(g++,g>=d.length||v())}Ft(()=>{try{t(0,o.playbackRate=0,o)}catch(M){console.log(M)}});function O(){a&&t(1,a.style.fontWeight=500,a)}function I(M){t(2,c=""),t(0,o.src="",o),f=!0,t(1,a.style.fontWeight=100,a);let ee=parseInt(M.currentTarget.attributes.cnt.nodeValue);M.currentTarget.style.fontWeight=500,d[ee]&&t(2,c=u[wr(d[ee])]),t(1,a=M.currentTarget)}function A(){f=!1,g++,v()}function z(M){Oe[M?"unshift":"push"](()=>{a=M,t(1,a)})}function x(M){Oe[M?"unshift":"push"](()=>{o=M,t(0,o)})}return s.$$set=M=>{"data"in M&&t(9,i=M.data)},[o,a,c,p,d,P,O,I,A,i,z,x]}class A_ extends xe{constructor(r){super(),He(this,r,T_,O_,We,{data:9})}}function D_(s){let r,t;return r=new A_({props:{data:s[0]}}),{c(){qe(r.$$.fragment)},l(i){Ge(r.$$.fragment,i)},m(i,o){je(r,i,o),t=!0},p(i,o){const a={};o&1&&(a.data=i[0]),r.$set(a)},i(i){t||(le(r.$$.fragment,i),t=!0)},o(i){ae(r.$$.fragment,i),t=!1},d(i){Je(r,i)}}}function R_(s){let r,t;return r=new i_({}),{c(){qe(r.$$.fragment)},l(i){Ge(r.$$.fragment,i)},m(i,o){je(r,i,o),t=!0},p:we,i(i){t||(le(r.$$.fragment,i),t=!0)},o(i){ae(r.$$.fragment,i),t=!1},d(i){Je(r,i)}}}function P_(s){let r,t;return r=new t_({props:{data:s[0].zinnen}}),{c(){qe(r.$$.fragment)},l(i){Ge(r.$$.fragment,i)},m(i,o){je(r,i,o),t=!0},p(i,o){const a={};o&1&&(a.data=i[0].zinnen),r.$set(a)},i(i){t||(le(r.$$.fragment,i),t=!0)},o(i){ae(r.$$.fragment,i),t=!1},d(i){Je(r,i)}}}function L_(s){let r,t,i,o,a,u;const f=[P_,R_,D_],c=[];function d(g,p){return g[1]==="sequence"?0:g[1]==="pair"?1:2}return i=d(s),o=c[i]=f[i](s),{c(){r=U("div"),t=ne(),o.c(),a=Re()},l(g){r=N(g,"DIV",{}),J(r).forEach(S),t=re(g),o.l(g),a=Re()},m(g,p){W(g,r,p),W(g,t,p),c[i].m(g,p),W(g,a,p),u=!0},p(g,[p]){o.p(g,p)},i(g){u||(le(o),u=!0)},o(g){ae(o),u=!1},d(g){g&&(S(r),S(t),S(a)),c[i].d(g)}}}function M_(s,r,t){let{data:i}=r;const o=i.quiz;return s.$$set=a=>{"data"in a&&t(0,i=a.data)},[i,o]}class B_ extends xe{constructor(r){super(),He(this,r,M_,L_,We,{data:0})}}function gu(s,r,t){const i=s.slice();return i[8]=r[t],i[10]=t,i}function _u(s,r,t){const i=s.slice();return i[11]=r[t],i}function mu(s,r,t){const i=s.slice();return i[14]=r[t],i}function F_(s){let r,t,i=s[3].level+"",o,a,u,f,c,d,g,p,m,v="Familie van Marc 1",P,O,I,A,z,x="Familie van Marc 2",M,ee,H=_t(s[3].themes),R=[];for(let j=0;j<H.length;j+=1)R[j]=yu(gu(s,H,j));return{c(){r=U("div"),t=Ue("Module "),o=Ue(i),a=ne();for(let j=0;j<R.length;j+=1)R[j].c();u=ne(),f=U("h3"),c=Ue("Les "),d=Ue(wu),g=ne(),p=U("div"),m=U("a"),m.textContent=v,P=ne(),O=U("div"),I=ne(),A=U("div"),z=U("a"),z.textContent=x,this.h()},l(j){r=N(j,"DIV",{});var Z=J(r);t=Ne(Z,"Module "),o=Ne(Z,i),Z.forEach(S),a=re(j);for(let ge=0;ge<R.length;ge+=1)R[ge].l(j);u=re(j),f=N(j,"H3",{});var Y=J(f);c=Ne(Y,"Les "),d=Ne(Y,wu),Y.forEach(S),g=re(j),p=N(j,"DIV",{});var K=J(p);m=N(K,"A",{"data-svelte-h":!0}),nn(m)!=="svelte-4c9h20"&&(m.textContent=v),K.forEach(S),P=re(j),O=N(j,"DIV",{style:!0}),J(O).forEach(S),I=re(j),A=N(j,"DIV",{});var V=J(A);z=N(V,"A",{"data-svelte-h":!0}),nn(z)!=="svelte-e5fyy2"&&(z.textContent=x),V.forEach(S),this.h()},h(){k(O,"height","30px")},m(j,Z){W(j,r,Z),L(r,t),L(r,o),W(j,a,Z);for(let Y=0;Y<R.length;Y+=1)R[Y]&&R[Y].m(j,Z);W(j,u,Z),W(j,f,Z),L(f,c),L(f,d),W(j,g,Z),W(j,p,Z),L(p,m),W(j,P,Z),W(j,O,Z),W(j,I,Z),W(j,A,Z),L(A,z),M||(ee=[ue(m,"click",s[6]),ue(z,"click",s[7])],M=!0)},p(j,Z){if(Z&24){H=_t(j[3].themes);let Y;for(Y=0;Y<H.length;Y+=1){const K=gu(j,H,Y);R[Y]?R[Y].p(K,Z):(R[Y]=yu(K),R[Y].c(),R[Y].m(u.parentNode,u))}for(;Y<R.length;Y+=1)R[Y].d(1);R.length=H.length}},i:we,o:we,d(j){j&&(S(r),S(a),S(u),S(f),S(g),S(p),S(P),S(O),S(I),S(A)),Xn(R,j),M=!1,Jt(ee)}}}function z_(s){let r,t;return r=new B_({props:{data:s[0]}}),{c(){qe(r.$$.fragment)},l(i){Ge(r.$$.fragment,i)},m(i,o){je(r,i,o),t=!0},p(i,o){const a={};o&1&&(a.data=i[0]),r.$set(a)},i(i){t||(le(r.$$.fragment,i),t=!0)},o(i){ae(r.$$.fragment,i),t=!1},d(i){Je(r,i)}}}function U_(s){let r,t=_t(s[8].lessons),i=[];for(let o=0;o<t.length;o+=1)i[o]=bu(_u(s,t,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();r=Re()},l(o){for(let a=0;a<i.length;a+=1)i[a].l(o);r=Re()},m(o,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(o,a);W(o,r,a)},p(o,a){if(a&24){t=_t(o[8].lessons);let u;for(u=0;u<t.length;u+=1){const f=_u(o,t,u);i[u]?i[u].p(f,a):(i[u]=bu(f),i[u].c(),i[u].m(r.parentNode,r))}for(;u<i.length;u+=1)i[u].d(1);i.length=t.length}},d(o){o&&S(r),Xn(i,o)}}}function N_(s){let r,t=_t(s[11].quizes),i=[];for(let o=0;o<t.length;o+=1)i[o]=vu(mu(s,t,o));return{c(){for(let o=0;o<i.length;o+=1)i[o].c();r=Re()},l(o){for(let a=0;a<i.length;a+=1)i[a].l(o);r=Re()},m(o,a){for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(o,a);W(o,r,a)},p(o,a){if(a&24){t=_t(o[11].quizes);let u;for(u=0;u<t.length;u+=1){const f=mu(o,t,u);i[u]?i[u].p(f,a):(i[u]=vu(f),i[u].c(),i[u].m(r.parentNode,r))}for(;u<i.length;u+=1)i[u].d(1);i.length=t.length}},d(o){o&&S(r),Xn(i,o)}}}function vu(s){let r,t=s[14].title+"",i,o,a;return{c(){r=U("div"),i=Ue(t),this.h()},l(u){r=N(u,"DIV",{type:!0,level:!0,name:!0,theme:!0});var f=J(r);i=Ne(f,t),f.forEach(S),this.h()},h(){C(r,"type",s[14].type),C(r,"level",s[3].level),C(r,"name",s[14].title),C(r,"theme",s[8].num)},m(u,f){W(u,r,f),L(r,i),o||(a=ue(r,"click",s[4]),o=!0)},p:we,d(u){u&&S(r),o=!1,a()}}}function bu(s){let r,t=s[11].num+"",i,o,a=s[11].title+"",u,f,c,d=s[11].quizes&&N_(s);return{c(){r=U("div"),i=Ue(t),o=Ue("."),u=Ue(a),f=ne(),d&&d.c(),c=Re()},l(g){r=N(g,"DIV",{});var p=J(r);i=Ne(p,t),o=Ne(p,"."),u=Ne(p,a),p.forEach(S),f=re(g),d&&d.l(g),c=Re()},m(g,p){W(g,r,p),L(r,i),L(r,o),L(r,u),W(g,f,p),d&&d.m(g,p),W(g,c,p)},p(g,p){g[11].quizes&&d.p(g,p)},d(g){g&&(S(r),S(f),S(c)),d&&d.d(g)}}}function yu(s){let r,t=s[8].name+"",i,o,a,u=s[8].lessons&&U_(s);return{c(){r=U("div"),i=Ue(t),o=ne(),u&&u.c(),a=Re()},l(f){r=N(f,"DIV",{});var c=J(r);i=Ne(c,t),c.forEach(S),o=re(f),u&&u.l(f),a=Re()},m(f,c){W(f,r,c),L(r,i),W(f,o,c),u&&u.m(f,c),W(f,a,c)},p(f,c){f[8].lessons&&u.p(f,c)},d(f){f&&(S(r),S(o),S(a)),u&&u.d(f)}}}function W_(s){let r,t,i,o;const a=[z_,F_],u=[];function f(c,d){return c[2]?0:1}return t=f(s),i=u[t]=a[t](s),{c(){r=U("div"),i.c(),this.h()},l(c){r=N(c,"DIV",{style:!0});var d=J(r);i.l(d),d.forEach(S),this.h()},h(){k(r,"display",s[1]),k(r,"overflow-y","auto"),k(r,"height","400px")},m(c,d){W(c,r,d),u[t].m(r,null),o=!0},p(c,[d]){let g=t;t=f(c),t===g?u[t].p(c,d):(Gt(),ae(u[g],1,1,()=>{u[g]=null}),jt(),i=u[t],i?i.p(c,d):(i=u[t]=a[t](c),i.c()),le(i,1),i.m(r,null)),(!o||d&2)&&k(r,"display",c[1])},i(c){o||(le(i),o=!0)},o(c){ae(i),o=!1},d(c){c&&S(r),u[t].d()}}}let wu="2";function x_(s,r,t){let{data:i}=r,{view:o}=r,a="none",u={level:"1.2",themes:[{num:"1",name:"Familie",lessons:[{num:1,title:"",quizes:[{type:"text",title:"Familie 1"},{type:"text",title:"Familie 2"},{type:"text",title:"Familie 3"}]},{num:2,title:""},{num:3,title:""}]},{num:"2",name:"In Het Restorant",lessons:[{num:1,title:"",quizes:[{type:"text",title:"In Het Restorant 1"},{type:"text",title:"In Het Restorant 2"},{type:"text",title:"In Het Restorant 3"}]},{num:2,title:""},{num:3,title:""}]},{num:"3",name:"Wonen",lessons:[{num:1,title:"",quizes:[{type:"text",title:"Wonen 1"},{type:"text",title:"Wonen 2"},{type:"text",title:"Wonen 3"}]},{num:2,title:""},{num:3,title:""}]}]},f=!1;function c(p){t(0,i.quiz=p.currentTarget.attributes[0].nodeValue,i),t(0,i.level=p.currentTarget.attributes[1].nodeValue.replace(".",""),i),t(0,i.name=p.currentTarget.attributes[2].nodeValue,i),t(0,i.theme=p.currentTarget.attributes[3].nodeValue,i),t(2,f=!0)}const d=()=>{t(2,f=!0),t(0,i.quiz="text",i),t(0,i.name="Quiz 1",i),t(0,i.level="12",i),t(0,i.theme="1",i)},g=()=>{t(2,f=!0),t(0,i.quiz="text",i),t(0,i.name="Quiz 2",i),t(0,i.level="12",i),t(0,i.theme="1",i)};return s.$$set=p=>{"data"in p&&t(0,i=p.data),"view"in p&&t(5,o=p.view)},s.$$.update=()=>{s.$$.dirty&32&&(o==="lesson"?t(1,a="block"):t(1,a="none"))},[i,a,f,u,c,o,d,g]}class H_ extends xe{constructor(r){super(),He(this,r,x_,W_,We,{data:0,view:5})}}function V_(s){let r,t="100",i,o,a="0";return{c(){r=U("b"),r.textContent=t,i=ne(),o=U("span"),o.textContent=a,this.h()},l(u){r=N(u,"B",{class:!0,style:!0,"data-svelte-h":!0}),nn(r)!=="svelte-1h19z5i"&&(r.textContent=t),i=re(u),o=N(u,"SPAN",{class:!0,style:!0,"data-svelte-h":!0}),nn(o)!=="svelte-1dn9ak7"&&(o.textContent=a),this.h()},h(){C(r,"class","call_cnt"),k(r,"display","none"),k(r,"position","absolute"),k(r,"left","22px"),k(r,"top","10px"),k(r,"color","#0e0cff"),k(r,"font-size","12px"),C(o,"class","badge badge-primary badge-pill call-queue"),k(o,"display","none"),k(o,"position","absolute"),k(o,"right","0px"),k(o,"bottom","0px"),k(o,"color","#0e0cff"),k(o,"font-size","12px"),k(o,"opacity","1")},m(u,f){W(u,r,f),W(u,i,f),W(u,o,f)},p:we,d(u){u&&(S(r),S(i),S(o))}}}function q_(s){let r;return{c(){r=U("div")},l(t){r=N(t,"DIV",{}),J(r).forEach(S)},m(t,i){W(t,r,i),s[23](r)},p:we,d(t){t&&S(r),s[23](null)}}}function Cu(s){let r,t,i,o,a,u,f;return{c(){r=U("div"),t=Pe("svg"),i=Pe("glyph"),o=Pe("g"),a=Pe("path"),this.h()},l(c){r=N(c,"DIV",{class:!0,style:!0});var d=J(r);t=Le(d,"svg",{height:!0,width:!0,style:!0});var g=J(t);i=Le(g,"glyph",{"glyph-name":!0,unicode:!0,"horiz-adv-x":!0}),J(i).forEach(S),o=Le(g,"g",{class:!0,style:!0});var p=J(o);a=Le(p,"path",{d:!0,transform:!0,style:!0}),J(a).forEach(S),p.forEach(S),g.forEach(S),d.forEach(S),this.h()},h(){C(i,"glyph-name","ui-video-chat"),C(i,"unicode",""),C(i,"horiz-adv-x","50"),C(a,"d","M891.5 23h-783c-59.7 0-108.5 48.8-108.5 108.5v466.20000000000005c0 59.59999999999991 48.8 108.5 108.5 108.5h222.39999999999998v270.5999999999999l270.70000000000005-270.5999999999999h289.9c59.700000000000045 0 108.5-48.90000000000009 108.5-108.5v-466.20000000000005c0-59.7-48.799999999999955-108.5-108.5-108.5z m-223.5 370l-252.8 134.70000000000005c-26.30000000000001 14-47.89999999999998 1.099999999999909-47.89999999999998-28.700000000000045v-262.9c0-29.900000000000034 21.599999999999966-42.80000000000001 47.89999999999998-28.80000000000001l252.8 134.7c26.299999999999955 14 26.299999999999955 37 0 51z"),C(a,"transform","scale(.03)"),k(a,"fill","lightgrey"),k(a,"stroke","black"),k(a,"stroke-width","20px"),C(o,"class","currentLayer"),k(o,"position","absolute"),k(o,"right","0"),k(o,"top","0"),k(o,"stroke","grey"),k(o,"stroke-width","2px"),k(o,"fill","lightgrey"),k(o,"font-size","30px"),C(t,"height","30"),C(t,"width","30"),k(t,"position","absolute"),k(t,"bottom","70px"),k(t,"right","0px"),k(t,"z-index","30"),C(r,"class","video"),k(r,"position","absolute"),k(r,"top","0"),k(r,"width","100px"),k(r,"height","100px")},m(c,d){W(c,r,d),L(r,t),L(t,i),L(t,o),L(o,a),u||(f=ue(t,"click",s[17]),u=!0)},p:we,d(c){c&&S(r),u=!1,f()}}}function Su(s){let r;function t(a,u){return a[6]?G_:j_}let i=t(s),o=i(s);return{c(){o.c(),r=Re()},l(a){o.l(a),r=Re()},m(a,u){o.m(a,u),W(a,r,u)},p(a,u){i===(i=t(a))&&o?o.p(a,u):(o.d(1),o=i(a),o&&(o.c(),o.m(r.parentNode,r)))},d(a){a&&S(r),o.d(a)}}}function G_(s){let r,t=s[11]["Cancel Edit Call Center"][s[10]]+"",i,o,a;return{c(){r=U("h5"),i=Ue(t)},l(u){r=N(u,"H5",{});var f=J(r);i=Ne(f,t),f.forEach(S)},m(u,f){W(u,r,f),L(r,i),o||(a=ue(r,"click",s[31]),o=!0)},p(u,f){f[0]&3072&&t!==(t=u[11]["Cancel Edit Call Center"][u[10]]+"")&&It(i,t)},d(u){u&&S(r),o=!1,a()}}}function j_(s){let r,t=s[11]["Edit Call Center"][s[10]]+"",i,o,a;return{c(){r=U("h5"),i=Ue(t)},l(u){r=N(u,"H5",{});var f=J(r);i=Ne(f,t),f.forEach(S)},m(u,f){W(u,r,f),L(r,i),o||(a=ue(r,"click",s[30]),o=!0)},p(u,f){f[0]&3072&&t!==(t=u[11]["Edit Call Center"][u[10]]+"")&&It(i,t)},d(u){u&&S(r),o=!1,a()}}}function ku(s){let r,t=s[11]["Create my own net"][s[10]]+"",i,o,a;return{c(){r=U("h5"),i=Ue(t)},l(u){r=N(u,"H5",{});var f=J(r);i=Ne(f,t),f.forEach(S)},m(u,f){W(u,r,f),L(r,i),o||(a=ue(r,"click",Z_),o=!0)},p(u,f){f[0]&3072&&t!==(t=u[11]["Create my own net"][u[10]]+"")&&It(i,t)},d(u){u&&S(r),o=!1,a()}}}function J_(s){let r=s[11]["Language Select"][s[10]]+"",t,i,o,a,u,f,c,d,g,p,m,v,P,O,I,A,z,x,M,ee,H,R,j,Z,Y,K,V=s[7].role=="admin"&&Su(s),ge=s[7].role=="user"&&ku(s);return Z=O1(s[27][0]),{c(){t=Ue(r),i=Ue(`:\r
\r
		`),o=U("div"),a=U("label"),u=U("input"),f=ne(),c=U("img"),g=ne(),p=U("label"),m=U("input"),v=ne(),P=U("img"),I=ne(),A=U("label"),z=U("input"),x=ne(),M=U("img"),H=ne(),V&&V.c(),R=ne(),ge&&ge.c(),j=Re(),this.h()},l(Q){t=Ne(Q,r),i=Ne(Q,`:\r
\r
		`),o=N(Q,"DIV",{style:!0});var oe=J(o);a=N(oe,"LABEL",{style:!0});var $e=J(a);u=N($e,"INPUT",{type:!0,name:!0}),f=re($e),c=N($e,"IMG",{src:!0,alt:!0}),$e.forEach(S),g=re(oe),p=N(oe,"LABEL",{style:!0});var ke=J(p);m=N(ke,"INPUT",{type:!0,name:!0}),v=re(ke),P=N(ke,"IMG",{src:!0,alt:!0}),ke.forEach(S),I=re(oe),A=N(oe,"LABEL",{style:!0});var Ke=J(A);z=N(Ke,"INPUT",{type:!0,name:!0}),x=re(Ke),M=N(Ke,"IMG",{src:!0,alt:!0}),Ke.forEach(S),oe.forEach(S),H=re(Q),V&&V.l(Q),R=re(Q),ge&&ge.l(Q),j=Re(),this.h()},h(){C(u,"type","radio"),C(u,"name","lang"),u.__value="en",nt(u,u.__value),wt(c.src,d="https://www.sic-info.org/wp-content/uploads/2014/01/gb.png")||C(c,"src",d),C(c,"alt","English"),k(a,"flex","1"),C(m,"type","radio"),C(m,"name","lang"),m.__value="fr",nt(m,m.__value),wt(P.src,O="https://www.sic-info.org/wp-content/uploads/2014/01/fr.png")||C(P,"src",O),C(P,"alt","French"),k(p,"flex","1"),C(z,"type","radio"),C(z,"name","lang"),z.__value="ru",nt(z,z.__value),wt(M.src,ee="https://www.sic-info.org/wp-content/uploads/2014/01/ru.png")||C(M,"src",ee),C(M,"alt","Russian"),k(A,"flex","1"),k(o,"display","flex"),k(o,"margin-bottom","20px"),Z.p(u,m,z)},m(Q,oe){W(Q,t,oe),W(Q,i,oe),W(Q,o,oe),L(o,a),L(a,u),u.checked=u.__value===s[10],L(a,f),L(a,c),L(o,g),L(o,p),L(p,m),m.checked=m.__value===s[10],L(p,v),L(p,P),L(o,I),L(o,A),L(A,z),z.checked=z.__value===s[10],L(A,x),L(A,M),W(Q,H,oe),V&&V.m(Q,oe),W(Q,R,oe),ge&&ge.m(Q,oe),W(Q,j,oe),Y||(K=[ue(u,"change",s[26]),ue(u,"change",s[15]),ue(m,"change",s[28]),ue(m,"change",s[15]),ue(z,"change",s[29]),ue(z,"change",s[15])],Y=!0)},p(Q,oe){oe[0]&3072&&r!==(r=Q[11]["Language Select"][Q[10]]+"")&&It(t,r),oe[0]&1024&&(u.checked=u.__value===Q[10]),oe[0]&1024&&(m.checked=m.__value===Q[10]),oe[0]&1024&&(z.checked=z.__value===Q[10]),Q[7].role=="admin"?V?V.p(Q,oe):(V=Su(Q),V.c(),V.m(R.parentNode,R)):V&&(V.d(1),V=null),Q[7].role=="user"?ge?ge.p(Q,oe):(ge=ku(Q),ge.c(),ge.m(j.parentNode,j)):ge&&(ge.d(1),ge=null)},d(Q){Q&&(S(t),S(i),S(o),S(H),S(R),S(j)),V&&V.d(Q),ge&&ge.d(Q),Z.r(),Y=!1,Jt(K)}}}function K_(s){let r,t,i,o,a,u,f,c,d,g=s[2].text.msg+"",p,m,v,P,O=s[2].text.name+"",I,A,z,x,M,ee,H,R,j,Z,Y,K,V,ge,Q,oe,$e,ke,Ke,it,Ae,be,ce,De,Ze,lt,ft;const Tt=[s[2].video];let At={};for(let $=0;$<Tt.length;$+=1)At=mr(At,Tt[$]);i=new xg({props:At});function cn($){s[22]($)}let Qn={OnLongPress:Y_,$$slots:{default:[V_]},$$scope:{ctx:s}};s[1]!==void 0&&(Qn.status=s[1]),a=new Tg({props:Qn}),Oe.push(()=>at(a,"status",cn)),a.$on("click",s[16]);const te=[s[9].video];let ct={$$slots:{footer:[q_]},$$scope:{ctx:s}};for(let $=0;$<te.length;$+=1)ct=mr(ct,te[$]);x=new z1({props:ct});let Xe=s[5]&&Cu(s);const pt=[s[9].audio];function Bn($){s[24]($)}let $n={};for(let $=0;$<pt.length;$+=1)$n=mr($n,pt[$]);s[9].audio.paused!==void 0&&($n.paused=s[9].audio.paused),R=new jg({props:$n}),Oe.push(()=>at(R,"paused",Bn));const zt=[s[2].audio];function Wr($){s[25]($)}let er={};for(let $=0;$<zt.length;$+=1)er=mr(er,zt[$]);s[2].audio.srcObject!==void 0&&(er.srcObject=s[2].audio.srcObject),Y=new Yg({props:er}),Oe.push(()=>at(Y,"srcObject",Wr)),ge=new Qg({}),oe=new Vg({}),ke=new Ug({props:{padding:"25px",$$slots:{default:[J_]},$$scope:{ctx:s}}});function Fn($){s[33]($)}function Ut($){s[34]($)}let hn={view:s[12],tarif:s[0]};return s[1]!==void 0&&(hn.status=s[1]),s[7]!==void 0&&(hn.operator=s[7]),be=new yg({props:hn}),s[32](be),Oe.push(()=>at(be,"status",Fn)),Oe.push(()=>at(be,"operator",Ut)),lt=new H_({props:{view:s[12],data:s[13][0].staff}}),{c(){r=U("div"),t=U("div"),qe(i.$$.fragment),o=ne(),qe(a.$$.fragment),f=ne(),c=U("div"),d=U("p"),p=Ue(g),m=ne(),v=U("br"),P=ne(),I=Ue(O),A=ne(),z=U("div"),qe(x.$$.fragment),M=ne(),Xe&&Xe.c(),ee=ne(),H=U("div"),qe(R.$$.fragment),Z=ne(),qe(Y.$$.fragment),V=ne(),qe(ge.$$.fragment),Q=ne(),qe(oe.$$.fragment),$e=ne(),qe(ke.$$.fragment),Ke=ne(),it=U("progress"),Ae=ne(),qe(be.$$.fragment),Ze=ne(),qe(lt.$$.fragment),this.h()},l($){r=N($,"DIV",{style:!0});var _e=J(r);t=N(_e,"DIV",{style:!0});var Dt=J(t);Ge(i.$$.fragment,Dt),o=re(Dt),Ge(a.$$.fragment,Dt),f=re(Dt),c=N(Dt,"DIV",{class:!0,style:!0});var kn=J(c);d=N(kn,"P",{class:!0,style:!0});var Ct=J(d);p=Ne(Ct,g),m=re(Ct),v=N(Ct,"BR",{}),P=re(Ct),I=Ne(Ct,O),Ct.forEach(S),kn.forEach(S),Dt.forEach(S),A=re(_e),z=N(_e,"DIV",{style:!0});var Rt=J(z);Ge(x.$$.fragment,Rt),M=re(Rt),Xe&&Xe.l(Rt),Rt.forEach(S),ee=re(_e),H=N(_e,"DIV",{style:!0});var St=J(H);Ge(R.$$.fragment,St),Z=re(St),Ge(Y.$$.fragment,St),V=re(St),Ge(ge.$$.fragment,St),Q=re(St),Ge(oe.$$.fragment,St),St.forEach(S),$e=re(_e),Ge(ke.$$.fragment,_e),_e.forEach(S),Ke=re($),it=N($,"PROGRESS",{id:!0,max:!0,duration:!0,style:!0}),J(it).forEach(S),Ae=re($),Ge(be.$$.fragment,$),Ze=re($),Ge(lt.$$.fragment,$),this.h()},h(){C(d,"class","remote_msg"),k(d,"font-size",".7em"),k(d,"white-space","nowrap"),k(d,"color","white"),k(d,"margin","auto"),k(d,"text-align","center"),C(c,"class","remote_text_display"),k(c,"display",s[2].text.display),k(c,"position","absolute"),k(c,"z-index","21"),k(c,"background-color","rgba(125, 125, 125, 0.8)"),k(c,"top","90px"),k(c,"left","2px"),k(t,"flex","1"),k(z,"position","absolute"),k(z,"flex","1 1 0%"),k(H,"flex","3"),k(r,"display","flex"),k(r,"min-height","100px"),k(r,"flex-wrap","nowrap"),k(r,"justify-content","space-between"),C(it,"id","dataProgress"),it.value=s[14].value,C(it,"max","100"),C(it,"duration","200"),k(it,"display",s[14].display),k(it,"top","100px"),k(it,"width","98%")},m($,_e){W($,r,_e),L(r,t),je(i,t,null),L(t,o),je(a,t,null),L(t,f),L(t,c),L(c,d),L(d,p),L(d,m),L(d,v),L(d,P),L(d,I),L(r,A),L(r,z),je(x,z,null),L(z,M),Xe&&Xe.m(z,null),L(r,ee),L(r,H),je(R,H,null),L(H,Z),je(Y,H,null),L(H,V),je(ge,H,null),L(H,Q),je(oe,H,null),L(r,$e),je(ke,r,null),W($,Ke,_e),W($,it,_e),W($,Ae,_e),je(be,$,_e),W($,Ze,_e),je(lt,$,_e),ft=!0},p($,_e){const Dt=_e[0]&4?vr(Tt,[br($[2].video)]):{};i.$set(Dt);const kn={};_e[1]&131072&&(kn.$$scope={dirty:_e,ctx:$}),!u&&_e[0]&2&&(u=!0,kn.status=$[1],ut(()=>u=!1)),a.$set(kn),(!ft||_e[0]&4)&&g!==(g=$[2].text.msg+"")&&It(p,g),(!ft||_e[0]&4)&&O!==(O=$[2].text.name+"")&&It(I,O),(!ft||_e[0]&4)&&k(c,"display",$[2].text.display);const Ct=_e[0]&512?vr(te,[br($[9].video)]):{};_e[0]&256|_e[1]&131072&&(Ct.$$scope={dirty:_e,ctx:$}),x.$set(Ct),$[5]?Xe?Xe.p($,_e):(Xe=Cu($),Xe.c(),Xe.m(z,null)):Xe&&(Xe.d(1),Xe=null);const Rt=_e[0]&512?vr(pt,[br($[9].audio)]):{};!j&&_e[0]&512&&(j=!0,Rt.paused=$[9].audio.paused,ut(()=>j=!1)),R.$set(Rt);const St=_e[0]&4?vr(zt,[br($[2].audio)]):{};!K&&_e[0]&4&&(K=!0,St.srcObject=$[2].audio.srcObject,ut(()=>K=!1)),Y.$set(St);const tr={};_e[0]&3272|_e[1]&131072&&(tr.$$scope={dirty:_e,ctx:$}),ke.$set(tr);const dn={};_e[0]&4096&&(dn.view=$[12]),_e[0]&1&&(dn.tarif=$[0]),!ce&&_e[0]&2&&(ce=!0,dn.status=$[1],ut(()=>ce=!1)),!De&&_e[0]&128&&(De=!0,dn.operator=$[7],ut(()=>De=!1)),be.$set(dn);const zn={};_e[0]&4096&&(zn.view=$[12]),_e[0]&8192&&(zn.data=$[13][0].staff),lt.$set(zn)},i($){ft||(le(i.$$.fragment,$),le(a.$$.fragment,$),le(x.$$.fragment,$),le(R.$$.fragment,$),le(Y.$$.fragment,$),le(ge.$$.fragment,$),le(oe.$$.fragment,$),le(ke.$$.fragment,$),le(be.$$.fragment,$),le(lt.$$.fragment,$),ft=!0)},o($){ae(i.$$.fragment,$),ae(a.$$.fragment,$),ae(x.$$.fragment,$),ae(R.$$.fragment,$),ae(Y.$$.fragment,$),ae(ge.$$.fragment,$),ae(oe.$$.fragment,$),ae(ke.$$.fragment,$),ae(be.$$.fragment,$),ae(lt.$$.fragment,$),ft=!1},d($){$&&(S(r),S(Ke),S(it),S(Ae),S(Ze)),Je(i),Je(a),Je(x),Xe&&Xe.d(),Je(R),Je(Y),Je(ge),Je(oe),Je(ke),s[32](null),Je(be,$),Je(lt,$)}}}function Y_(){select.display=!0}const Z_=()=>{};function X_(s,r,t){let i,o,a,u,f,c,d,g,p;Be(s,Sn,te=>t(10,i=te)),Be(s,Li,te=>t(39,o=te)),Be(s,Nr,te=>t(20,a=te)),Be(s,io,te=>t(40,u=te)),Be(s,zu,te=>t(21,f=te)),Be(s,Ur,te=>t(3,c=te)),Be(s,Ou,te=>t(11,d=te)),Be(s,I1,te=>t(12,g=te)),Be(s,Mi,te=>t(13,p=te));let m,v,{tarif:P}=r,O,I="inactive",A,z=!1,x=!1,{email:M,abonent:ee}=r;const H=wr(M);let R={type:"operator",em:M,abonent:ee,uid:H};R.em===ee?R.role="admin":R.role="user";let j;async function Z(te){te.func="callwaiting",fetch(u+`/api/operator?func=${te.func}&uid=${te.uid}&role=${te.role}&abonent=${te.abonent}&em=${te.em}&type=${te.type}`).then(ct=>ct.json()).then(ct=>{Array.isArray(ct.resp)?ct.resp.map(Xe=>{Mn(Nr,a=Xe,a)}):Mn(Nr,a=ct.resp,a),Z(te)}).catch(ct=>(console.log(ct),[]))}Ft(async()=>{try{v=new Eg(R,H,o),Q(),v.SendCheck(),Z(R)}catch{console.log()}});let Y={display:"block",value:0},K={video:{display:"none",srcObject:"",poster:""},audio:{paused:!0,src:""}},V={text:{display:"none",msg:"You have a call from:",name:"",email:""},video:{display:"none",srcObject:"",poster:""},audio:{muted:!0,srcObject:""}};S1("abonent",ee);function ge(te){Mn(Sn,i=te.target.attributes[2].nodeValue,i)}async function Q(){v.PlayCallCnt=()=>{O=10,t(9,K.audio.paused=!1,K),A=setInterval(function(){O--,O===0&&(clearInterval(A),t(9,K.audio.paused=!0,K))},2e3)},v.GetRemoteAudio=()=>V.audio.srcObject,v.SetRemoteAudio=te=>{te&&t(2,V.audio.srcObject=te,V)},v.GetRemoteVideo=()=>V.video.srcObject,v.SetLocalVideo=te=>{te&&t(9,K.video.srcObject=te,K)},v.SetRemoteVideo=te=>{I==="talk"&&(t(2,V.video.poster="",V),t(2,V.video.srcObject=te,V),t(2,V.video.display="block",V),t(9,K.audio.paused=!0,K))}}function oe(){try{if(!window.AudioContext){window.AudioContext=window.AudioContext||window.webkitAudioContext;let te=new AudioContext;v.localSoundSrc=te.createMediaElementSource(window.user.localSound),v.localSoundSrc.connect(te.destination)}}catch{console.log("Web Audio API is not supported in this browser")}switch(I){case"inactive":v.Offer(),t(1,I="active");break;case"active":t(1,I="inactive"),v.OnInactive();break;case"call":t(1,I="talk"),clearInterval(A),t(9,K.audio.paused=!0,K),t(2,V.audio.muted=!1,V),v.OnTalk(),t(5,z=!0),t(2,V.text.display="block",V);const te=new Event("talk");document.getElementsByTagName("body")[0].dispatchEvent(te);break;case"talk":v.OnInactive(),t(2,V.audio.muted=!0,V),t(9,K.video.display="none",K),t(5,z=!1),t(2,V.video.display="none",V),t(2,V.video.srcObject="",V),t(2,V.video.poster="",V),t(2,V.text.display="none",V),t(2,V.text.name="",V),t(2,V.text.email="",V),t(1,I="inactive");break;case"muted":t(1,I="inactive"),t(9,K.video.srcObject="",K),t(2,V.audio.muted=!0,V),t(2,V.video.display="none",V),t(2,V.video.srcObject="",V),t(2,V.video.poster="",V),t(2,V.text.display="none",V),v.OnInactive();break;default:return}}function $e(){t(1,I="talk"),t(9,K.audio.paused=!0,K),t(9,K.video.display="block",K),v.DC.dc.readyState==="open"&&v.GetUserMedia({audio:1,video:1},function(){v.SendVideoOffer(v.main_pc)})}function ke(te,ct){if(te.func==="mute"&&(t(9,K.audio.paused=!0,K),t(2,V.audio.muted=!0,V),t(5,z=!1),t(9,K.video.display="none",K),t(9,K.video.srcObject="",K),t(2,V.video.srcObject="",V),t(2,V.video.poster="",V),t(2,V.video.display="none",V),t(2,V.text.name="",V),t(2,V.text.email="",V),t(2,V.text.display="none",V),v.OnInactive(),I==="talk"?t(1,I="inactive"):I==="call"&&(t(1,I="inactive"),v.OnMute(),oe()),ct&&ct()),(te.call||te.func==="call")&&(t(1,I="call"),v.OnCall(),t(2,V.text.display="block",V),te.profile)){let Xe=te.profile,pt=Xe.src;t(2,V.video.poster=pt,V),pt&&t(2,V.video.display="block",V),t(2,V.text.name=Xe.name,V),t(2,V.text.email=Xe.email,V)}te.desc,te.camera&&t(9,K.video.src=that.localStream,K),te.status==="wait"&&(t(2,V.text.display="block",V),t(2,V.text.msg="You have a waiting call",V))}const Ke=[[]];function it(te){I=te,t(1,I)}function Ae(te){Oe[te?"unshift":"push"](()=>{j=te,t(8,j)})}function be(te){s.$$.not_equal(K.audio.paused,te)&&(K.audio.paused=te,t(9,K))}function ce(te){s.$$.not_equal(V.audio.srcObject,te)&&(V.audio.srcObject=te,t(2,V))}function De(){i=this.__value,Sn.set(i)}function Ze(){i=this.__value,Sn.set(i)}function lt(){i=this.__value,Sn.set(i)}const ft=()=>Mn(Ur,c=!0,c),Tt=()=>Mn(Ur,c=!1,c);function At(te){Oe[te?"unshift":"push"](()=>{m=te,t(4,m)})}function cn(te){I=te,t(1,I)}function Qn(te){R=te,t(7,R)}return s.$$set=te=>{"tarif"in te&&t(0,P=te.tarif),"email"in te&&t(18,M=te.email),"abonent"in te&&t(19,ee=te.abonent)},s.$$.update=()=>{s.$$.dirty[0]&1048576&&a&&ke(a),s.$$.dirty[0]&2&&Di.set(I),s.$$.dirty[0]&8&&c&&t(6,x=c),s.$$.dirty[0]&2097152&&f&&ke(f),s.$$.dirty[0]&4&&V.text.msg&&console.log(V.text.msg)},[P,I,V,c,m,z,x,R,j,K,i,d,g,p,Y,ge,oe,$e,M,ee,a,f,it,Ae,be,ce,De,Ke,Ze,lt,ft,Tt,At,cn,Qn]}class um extends xe{constructor(r){super(),He(this,r,X_,K_,We,{tarif:0,email:18,abonent:19},null,[-1,-1])}}function Q_(s){let r,t,i,o,a,u,f,c,d,g,p,m,v,P,O,I,A,z;return{c(){r=U("form"),t=U("div"),i=U("input"),o=ne(),a=U("input"),u=ne(),f=U("input"),c=ne(),d=U("div"),g=U("img"),m=ne(),v=U("div"),P=U("input"),O=ne(),I=U("input"),this.h()},l(x){r=N(x,"FORM",{});var M=J(r);t=N(M,"DIV",{id:!0});var ee=J(t);i=N(ee,"INPUT",{type:!0,placeholder:!0}),o=re(ee),a=N(ee,"INPUT",{type:!0,placeholder:!0}),u=re(ee),f=N(ee,"INPUT",{class:!0,accept:!0,id:!0,name:!0,type:!0,style:!0}),c=re(ee),d=N(ee,"DIV",{});var H=J(d);g=N(H,"IMG",{class:!0,src:!0,alt:!0,style:!0}),H.forEach(S),m=re(ee),v=N(ee,"DIV",{});var R=J(v);P=N(R,"INPUT",{type:!0,placeholder:!0}),O=re(R),I=N(R,"INPUT",{type:!0,placeholder:!0}),R.forEach(S),ee.forEach(S),M.forEach(S),this.h()},h(){C(i,"type","email"),C(i,"placeholder","input your email"),i.required=!0,C(a,"type","text"),C(a,"placeholder","input your name"),a.required=!0,C(f,"class","file-upload"),C(f,"accept","image/png, image/jpeg"),C(f,"id","avatar"),C(f,"name","avatar"),C(f,"type","file"),k(f,"display","none"),C(g,"class","user_pic is-rounded"),wt(g.src,p=s[1])||C(g,"src",p),C(g,"alt",""),k(g,"border-radius","5px"),k(g,"max-width","10%"),C(P,"type","password"),C(P,"placeholder","input your password"),P.required=!0,C(I,"type","password"),C(I,"placeholder","repeat your password"),I.required=!0,C(t,"id","inputs")},m(x,M){W(x,r,M),L(r,t),L(t,i),nt(i,s[4]),L(t,o),L(t,a),nt(a,s[0]),L(t,u),L(t,f),s[15](f),L(t,c),L(t,d),L(d,g),L(t,m),L(t,v),L(v,P),nt(P,s[5]),L(v,O),L(v,I),nt(I,s[6]),A||(z=[ue(i,"input",s[13]),ue(a,"input",s[14]),ue(a,"change",s[7]),ue(f,"change",s[9]),ue(f,"change",s[16]),ue(g,"click",s[8]),ue(P,"input",s[17]),ue(I,"input",s[18]),ue(I,"change",s[7])],A=!0)},p(x,[M]){M&16&&i.value!==x[4]&&nt(i,x[4]),M&1&&a.value!==x[0]&&nt(a,x[0]),M&2&&!wt(g.src,p=x[1])&&C(g,"src",p),M&32&&P.value!==x[5]&&nt(P,x[5]),M&64&&I.value!==x[6]&&nt(I,x[6])},i:we,o:we,d(x){x&&S(r),s[15](null),A=!1,Jt(z)}}}function $_(s,r,t){let i;Be(s,Li,Z=>t(21,i=Z));let{user_name:o,user_pic:a}=r,{lang:u="en",checked:f,abonent:c,upload:d,files:g}=r,p="",m="demo",v="demo",P,O;a||(a=Bu),Ft(async()=>{});async function I(Z){let Y={};Y.proj="kolmit",Y.func="operator",Y.abonent=c,Y.email=p,Y.psw=wr(m),Y.img=a,Y.lang=u,(await new Promise((ge,Q)=>{i.SendMessage(Y,oe=>{ge(oe)})})).func===Y.func&&t(10,f=!0)}function A(Z){let Y=new MouseEvent("click",{bubbles:!1,cancelable:!0,view:window});d&&d.dispatchEvent(Y)}function z(Z){try{oo(Z.target.files[0],function(Y,K){Y.type==="error"?console.error("Error loading image "):(P=Y.width,O=Y.height,t(1,a=Y.toDataURL()))},{orientation:!0,maxWidth:100,maxHeight:100,minWidth:50,minHeight:50,canvas:!0})}catch(Y){console.log(Y)}}function x(){p=this.value,t(4,p)}function M(){o=this.value,t(0,o)}function ee(Z){Oe[Z?"unshift":"push"](()=>{d=Z,t(2,d)})}function H(){g=this.files,t(3,g)}function R(){m=this.value,t(5,m)}function j(){v=this.value,t(6,v)}return s.$$set=Z=>{"user_name"in Z&&t(0,o=Z.user_name),"user_pic"in Z&&t(1,a=Z.user_pic),"lang"in Z&&t(11,u=Z.lang),"checked"in Z&&t(10,f=Z.checked),"abonent"in Z&&t(12,c=Z.abonent),"upload"in Z&&t(2,d=Z.upload),"files"in Z&&t(3,g=Z.files)},[o,a,d,g,p,m,v,I,A,z,f,u,c,x,M,ee,H,R,j]}class am extends xe{constructor(r){super(),He(this,r,$_,Q_,We,{user_name:0,user_pic:1,lang:11,checked:10,abonent:12,upload:2,files:3})}}let Wu;io.subscribe(s=>{Wu=s});const em={"Content-Type":"application/json"};class fm{constructor(r){this.msg_signal_oper=Nr,this.msg_signal_user=yr,this.operator=r}async SendMessage(r,t){r.operator=this.operator,fetch(Wu+"/api",{method:"POST",body:JSON.stringify({par:r}),headers:{headers:em}}).then(i=>i.json()).then(i=>{t&&t(i)}).catch(i=>(console.log(i),[]))}}export{am as L,um as O,fm as S,lm as a};
